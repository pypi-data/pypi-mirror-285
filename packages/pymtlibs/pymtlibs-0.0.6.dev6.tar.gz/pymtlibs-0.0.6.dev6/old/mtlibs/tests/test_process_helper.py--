import unittest
from mtlibs import process_helper
import asyncio


class Test_Process_helper(unittest.TestCase):
    def setUp(self) -> None:
        self.loop = asyncio.new_event_loop()
        return super().setUp()

    def test_bash(self):
        """应该能执行bash脚本并能获取脚本输出"""
        bash_code = """
export AA="some value aa"
echo ${AA}
"""
        stdout_bytes, stderrbytes = process_helper.bash(bash_code)
        self.assertEqual(stdout_bytes.decode().strip(), "some value aa")
