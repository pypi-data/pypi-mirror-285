"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[77907],{81771:function(n,e,t){t.d(e,{$W:function(){return d},Dp:function(){return y},EC:function(){return o},HB:function(){return g},S9:function(){return v},XF:function(){return u},b1:function(){return f},bV:function(){return s},lB:function(){return a},lg:function(){return c},mX:function(){return p},oj:function(){return l},rY:function(){return h},vH:function(){return m}});t(26098);var i,r=t(16312),o="single",s=10,u=function(n){if("condition"in n&&Array.isArray(n.condition))return{condition:"and",conditions:n.condition};for(var e=0,t=["and","or","not"];e<t.length;e++){var i=t[e];if(i in n)return{condition:i,conditions:n[i]}}return n},a=function(n,e){n.callService("automation","trigger",{entity_id:e,skip_condition:!0})},c=function(n,e){return n.callApi("DELETE","config/automation/config/".concat(e))},l=function(n,e){return n.callApi("GET","config/automation/config/".concat(e))},d=function(n,e){return n.callWS({type:"automation/config",entity_id:e})},f=function(n,e,t){return n.callApi("POST","config/automation/config/".concat(e),t)},g=function(n){for(var e=0,t=["trigger","condition","action"];e<t.length;e++){var i=t[e],r=n[i];r&&!Array.isArray(r)&&(n[i]=[r])}return n},p=function(n){i=n,(0,r.o)("/config/automation/edit/new")},m=function(n){p(Object.assign(Object.assign({},n),{},{id:void 0,alias:void 0}))},h=function(){var n=i;return i=void 0,n},y=function(n,e,t,i){return n.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:t,variables:i})},v=function(n,e,t){return n.callWS({type:"test_condition",condition:e,variables:t})}},77907:function(n,e,t){t.r(e),t.d(e,{addExternalBarCodeListener:function(){return a},attachExternalToApp:function(){return u}});t(95737),t(39790),t(74268),t(99019),t(253),t(54846),t(19588),t(40322),t(41499),t(3714),t(64961),t(62726),t(19192),t(66555),t(96858);var i=t(34897),r=t(74005),o=t(81771),s=new Set,u=function(n){window.addEventListener("haptic",(function(e){return n.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:e.detail}})})),n.hass.auth.external.addCommandHandler((function(e){return c(n,e)}))},a=function(n){return s.add(n),function(){s.delete(n)}},c=function(n,e){var t=n.hass.auth.external;if("restart"===e.command)n.hass.connection.reconnect(!0),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("notifications/show"===e.command)(0,i.r)(n,"hass-show-notifications"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===e.command){var u;if(null!==(u=r.G.history.state)&&void 0!==u&&u.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.r)(n,"hass-toggle-menu"),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("sidebar/show"===e.command){var a;if(null!==(a=r.G.history.state)&&void 0!==a&&a.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,i.r)(n,"hass-toggle-menu",{open:!0}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===e.command){var c;(0,o.mX)(null===(c=e.payload)||void 0===c?void 0:c.config),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("bar_code/scan_result"===e.command)s.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==e.command)return!1;s.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}return!0}}}]);
//# sourceMappingURL=77907.2dXwM9AaPMU.js.map