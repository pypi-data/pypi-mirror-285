(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7553],{33745:function(e,t,n){"use strict";n.d(t,{Tg:function(){return a}});var s=n(24246),i=n(10503),r=n(23536),a=function(e){return(0,i.C)(r.uu).filter((function(t){return e.includes(t)})).length>0};t.ZP=function(e){var t=e.scopes,n=e.children;return a(t)?(0,s.jsx)(s.Fragment,{children:n}):null}},76738:function(e,t,n){"use strict";n.d(t,{Gt:function(){return f},eB:function(){return m},oI:function(){return u}});var s=n(24246),i=n(34090),r=n(27378),a=n(10503),o=n(18345),c=n(49730),d=(0,r.createRef)(),l=(0,r.createRef)(),u=function(){var e=(0,a.T)(),t=(0,a.C)(o.DB),n=(0,r.useCallback)((function(){l.current=void 0,d.current=void 0}),[]),s=(0,r.useCallback)((function(){e((0,o.Mr)()),l.current&&(l.current(!0),n())}),[e,n]),i=(0,r.useCallback)((function(){e((0,o.Mr)()),l.current&&(l.current(!1),n())}),[e,n]);return{attemptAction:(0,r.useCallback)((function(){return t?(e((0,o.h7)()),d.current||(d.current=new Promise((function(e){l.current=e}))),d.current):Promise.resolve(!0)}),[t,e]),onConfirm:s,onClose:i}},f=function(e){var t=e.id,n=e.name,s=(0,i.u6)().dirty,c=(0,a.T)();return(0,r.useEffect)((function(){return c((0,o.Zu)({id:t,name:n})),function(){c((0,o.dz)({id:t}))}}),[c,t,n]),(0,r.useEffect)((function(){c((0,o.$p)({id:t,isDirty:s}))}),[s,c,t]),null},m=function(){var e=u(),t=e.onConfirm,n=e.onClose,i=(0,a.C)(o.uv);return(0,s.jsx)(c.Z,{isOpen:i,onClose:n,onConfirm:t,isCentered:!0,title:"Unsaved Changes",message:"You have unsaved changes"})}},86702:function(e,t,n){"use strict";n.d(t,{q:function(){return F}});var s=n(24246),i=n(83265),r=n(27378),a=n(23842),o=n(85034),c=n(70169),d=n(52050),l=n(85556),u=n(32556),f=n(76738),m=n(83334),h=n(31716),x=n(34090),y=function(e){var t=e.systems,n=e.dataFlows,r=e.onDataFlowSystemChange,a=(0,x.u6)().setFieldValue,o=n.map((function(e){return e.fides_key}));return(0,s.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,s.jsx)(i.hrZ,{children:(0,s.jsxs)(i.Tr,{children:[(0,s.jsx)(i.Th,{children:"System"}),(0,s.jsx)(i.Th,{})]})}),(0,s.jsx)(i.p3B,{children:t.filter((function(e){return o.includes(e.fides_key)})).map((function(e){return(0,s.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,s.jsx)(i.Td,{children:(0,s.jsx)(i.xvT,{fontSize:"xs",lineHeight:4,fontWeight:"medium",children:e.name})}),(0,s.jsx)(i.Td,{textAlign:"end",children:(0,s.jsx)(i.hU,{background:"gray.50","aria-label":"Unassign data flow from system",icon:(0,s.jsx)(h.l,{}),variant:"outline",size:"sm",onClick:function(){return function(e){var t=n.filter((function(t){return t.fides_key!==e.fides_key}));a("dataFlowSystems",t),r(t)}(e)},"data-testid":"unassign-btn"})})]},e.fides_key)}))})]})},g=n(47346),j=n(42330),v=n(3204),p=function(e){var t=e.allSystems,n=e.dataFlowSystems,r=e.onChange,a=e.flowType,o=(0,x.u6)().setFieldValue;return(0,s.jsx)(i.xuv,{overflowY:"auto",maxHeight:"300px",children:(0,s.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,s.jsx)(i.hrZ,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,s.jsxs)(i.Tr,{children:[(0,s.jsx)(i.Th,{children:"System"}),(0,s.jsxs)(i.Th,{textAlign:"right",children:["Set as ",a]})]})}),(0,s.jsx)(i.p3B,{children:t.map((function(e){var t=!!n.find((function(t){return t.fides_key===e.fides_key}));return(0,s.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,s.jsx)(i.Td,{children:(0,s.jsx)(i.xvT,{fontSize:"xs",lineHeight:4,fontWeight:"medium",children:e.name})}),(0,s.jsx)(i.Td,{textAlign:"right",children:(0,s.jsx)(i.rsf,{isChecked:t,onChange:function(){return function(e){if(n.find((function(t){return t.fides_key===e.fides_key}))){var t=n.filter((function(t){return t.fides_key!==e.fides_key}));o("dataFlowSystems",t),r(t)}else{var s=(0,v.Z)(n).concat([{fides_key:e.fides_key,type:"system"}]);o("dataFlowSystems",s),r(s)}}(e)},"data-testid":"assign-switch"})})]},e.fides_key)}))})]})})},C=function(e){var t=e.currentSystem,n=e.systems,o=e.isOpen,c=e.onClose,d=e.dataFlowSystems,u=e.onDataFlowSystemChange,f=e.flowType,m=(0,x.u6)().setFieldValue,h=(0,r.useState)(""),y=h[0],v=h[1],C=(0,r.useState)(d),k=C[0],w=C[1],S=function(){var e=(0,a.Z)((function(){return(0,l.__generator)(this,(function(e){return u(k),c(),[2]}))}));return function(){return e.apply(this,arguments)}}(),b=0===n.length,_=(0,r.useMemo)((function(){return n?n.filter((function(e){return e.fides_key!==t.fides_key})).filter((function(e){return(0,j.R)(e,y)})):[]}),[n,t.fides_key,y]),T=(0,r.useMemo)((function(){var e=new Set(k.map((function(e){return e.fides_key})));return _.every((function(t){return e.has(t.fides_key)}))}),[_,k]);return(0,s.jsxs)(i.u_l,{isOpen:o,onClose:c,size:"2xl",isCentered:!0,children:[(0,s.jsx)(i.ZAr,{}),(0,s.jsxs)(i.hzk,{p:8,"data-testid":"confirmation-modal",children:[(0,s.jsxs)(i.xBx,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(i.xvT,{fontSize:"2xl",lineHeight:8,fontWeight:"semibold",children:["Configure ",f.toLocaleLowerCase()," systems"]}),(0,s.jsxs)(i.Cts,{bg:"green.500",color:"white",px:1,children:["Assigned to ",k.length," systems"]})]}),(0,s.jsx)(i.fef,{"data-testid":"assign-systems-modal-body",children:b?(0,s.jsx)(i.xvT,{children:"No systems found"}):(0,s.jsxs)(i.Kqy,{spacing:4,children:[(0,s.jsxs)(i.kCb,{justifyContent:"space-between",children:[(0,s.jsx)(i.xvT,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Add or remove destination systems from your data map"}),(0,s.jsx)(i.xuv,{children:(0,s.jsxs)(i.NIc,{display:"flex",alignItems:"center",children:[(0,s.jsx)(i.lXp,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,s.jsx)(i.rsf,{size:"sm",id:"assign-all-systems",isChecked:T,onChange:function(e){if(e.target.checked&&n){var t=_.map((function(e){return{fides_key:e.fides_key,type:"system"}}));m("dataFlowSystems",t),w(t)}else w([])},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,s.jsx)(g.Z,{search:y,onChange:v,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,s.jsx)(p,{flowType:f,allSystems:_,dataFlowSystems:k,onChange:w})]})}),(0,s.jsx)(i.mzw,{justifyContent:"flex-start",children:(0,s.jsxs)(i.hE2,{size:"sm",children:[(0,s.jsx)(i.zxk,{variant:"outline",mr:2,onClick:c,"data-testid":"cancel-btn",children:"Cancel"}),b?null:(0,s.jsx)(i.zxk,{colorScheme:"primary",onClick:S,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},k=n(61186),w=n(10503),S=n(12062),b=n(44982),_={dataFlowSystems:[]},T=function(e){var t=e.system,n=e.isIngress,h=e.isSystemTab,g=(0,i.pmc)(),j=n?"Source":"Destination",v="".concat(j,"s"),p=(0,i.qY0)(),T=(0,d.Z)((0,S.qQ)(),1)[0];(0,S.K3)();var F=(0,w.C)(b.cS),z=(0,r.useMemo)((function(){var e=n?t.ingress:t.egress;e||(e=[]);var s=F?F.map((function(e){return e.fides_key})):[];return e.filter((function(e){return s.includes(e.fides_key)}))}),[n,t,F]),D=(0,r.useState)(z),L=D[0],Z=D[1];(0,r.useEffect)((function(){Z(z)}),[z]);var I=function(){var e=(0,a.Z)((function(e,s){var i,r,a,d;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=e.dataFlowSystems,r=s.resetForm,a=(0,c.Z)((0,o.Z)({},t),{ingress:n?i:t.ingress,egress:n?t.egress:i}),[4,T(a)];case 1:return d=l.sent(),(0,u.D4)(d)?g((0,k.Vo)("Failed to update data flows")):g((0,k.t5)("".concat(v," updated"))),r({values:{dataFlowSystems:i}}),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,s.jsxs)(i.Qdk,{children:[(0,s.jsx)(i.KFZ,{height:"68px",paddingLeft:h?6:2,"data-testid":"data-flow-button-".concat(j),children:(0,s.jsxs)(i.kCb,{alignItems:"center",justifyContent:"start",flex:1,textAlign:"left",children:[(0,s.jsx)(i.xvT,{fontSize:"sm",lineHeight:5,fontWeight:"semibold",mr:2,children:v}),(0,s.jsx)(i.Vp9,{ml:2,backgroundColor:"primary.400",borderRadius:"6px",color:"white",children:L.length}),(0,s.jsx)(i.LZC,{}),(0,s.jsx)(i.XEm,{})]})}),(0,s.jsx)(i.Hk3,{backgroundColor:"gray.50",padding:6,"data-testid":"data-flow-panel-".concat(j),children:(0,s.jsx)(i.Kqy,{borderRadius:"md",backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:(0,s.jsx)(x.J9,{initialValues:_,onSubmit:I,children:function(e){var n=e.isSubmitting,r=e.dirty,a=e.resetForm;return(0,s.jsxs)(x.l0,{children:[(0,s.jsx)(f.Gt,{id:"".concat(t.fides_key,":").concat(j),name:"".concat(j," Data Flow")}),(0,s.jsx)(i.zxk,{colorScheme:"primary",size:"xs",width:"fit-content",onClick:p.onOpen,"data-testid":"assign-systems-btn",rightIcon:(0,s.jsx)(m.A5,{}),marginBottom:4,children:"Configure ".concat(v.toLocaleLowerCase())}),(0,s.jsx)(y,{systems:F,dataFlows:L,onDataFlowSystemChange:Z}),(0,s.jsxs)(i.hE2,{marginTop:6,children:[(0,s.jsx)(i.zxk,{size:"sm",variant:"outline",isDisabled:!r&&L===z,onClick:function(){Z(z),a({values:{dataFlowSystems:z}})},children:"Cancel"}),(0,s.jsx)(i.zxk,{size:"sm",colorScheme:"primary",type:"submit",isLoading:n,isDisabled:!r&&L===z,"data-testid":"save-btn",children:"Save"})]}),p.isOpen?(0,s.jsx)(C,{currentSystem:t,systems:F,isOpen:p.isOpen,onClose:p.onClose,dataFlowSystems:L,onDataFlowSystemChange:Z,flowType:j}):null]})}})})})]})},F=function(e){var t=e.system,n=e.isSystemTab;return(0,s.jsxs)(i.UQy,{allowToggle:!0,"data-testid":"data-flow-accordion",children:[(0,s.jsx)(T,{system:t,isIngress:!0,isSystemTab:n}),(0,s.jsx)(T,{system:t,isSystemTab:n})]})}},42330:function(e,t,n){"use strict";n.d(t,{R:function(){return b},Z:function(){return _}});var s=n(24246),i=n(83265),r=n(27378),a=n(33571),o=n.n(a),c=function(e){var t=e.columns,n=e.items,r=e.renderItem,a=(0,i.yo_)(n,t);return(0,s.jsx)(i.xuv,{children:a.map((function(e,n,a){var c=a.length;return(0,s.jsx)(i.xuv,{className:o()["grid-row"],borderBottomWidth:c>1&&n===c-1&&e.length===t?"0.5px":void 0,children:(0,s.jsx)(i.MIq,{columns:t,children:e.map((function(e){return(0,s.jsx)(i.xuv,{className:o()["grid-item"],children:r(e)},JSON.stringify(e))}))})},JSON.stringify(e))}))})},d=n(47346),l=n(23842),u=n(52050),f=n(85556),m=n(79894),h=n.n(m),x=n(86677),y=n(10503),g=n(49730),j=n(93677),v=n(33745),p=n(12262),C=n(32556),k=n(61186),w=n(44982),S=function(e){var t=e.system,n=(0,i.qY0)(),r=n.isOpen,a=n.onOpen,o=n.onClose,c=(0,i.pmc)(),d=(0,y.T)(),m=(0,x.useRouter)(),S=(0,u.Z)((0,w.DW)(),1)[0],b=function(){var e=(0,l.Z)((function(){var e;return(0,f.__generator)(this,(function(n){switch(n.label){case 0:return[4,S(t.fides_key)];case 1:return e=n.sent(),(0,C.D4)(e)?c((0,k.Vo)((0,C.e$)(e.error))):c((0,k.t5)("Successfully deleted system")),o(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),_=""===t.name||null==t.name?t.fides_key:t.name;return(0,s.jsxs)(i.xuv,{display:"flex","data-testid":"system-".concat(t.fides_key),children:[(0,s.jsx)(h(),{href:"".concat(j.So,"/configure/").concat(t.fides_key),passHref:!0,children:(0,s.jsxs)(i.xuv,{flexGrow:1,p:4,"data-testid":"system-box",_hover:{cursor:"pointer"},children:[(0,s.jsx)(i.X6q,{as:"h2",fontSize:"16px",mb:2,children:_}),(0,s.jsx)(i.xuv,{color:"gray.600",fontSize:"14px",children:(0,s.jsx)(i.xvT,{children:t.description})})]})}),(0,s.jsxs)(i.v2r,{children:[(0,s.jsx)(i.j2t,{as:i.hU,icon:(0,s.jsx)(i.nXP,{}),"aria-label":"more actions",variant:"unstyled",size:"sm","data-testid":"more-btn",m:1}),(0,s.jsxs)(i.qyq,{children:[(0,s.jsx)(i.sNh,{onClick:function(){d((0,w.db)(t)),m.push("".concat(j.So,"/configure/").concat(t.fides_key))},"data-testid":"edit-btn",children:"Edit"}),(0,s.jsx)(v.ZP,{scopes:[p.Sh.SYSTEM_DELETE],children:(0,s.jsx)(i.sNh,{onClick:a,"data-testid":"delete-btn",children:"Delete"})})]})]}),(0,s.jsx)(g.Z,{isOpen:r,onClose:o,onConfirm:b,title:"Delete ".concat(_),message:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.xvT,{children:["You are about to permanently delete the system"," ",(0,s.jsx)(i.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:_}),"."]}),(0,s.jsx)(i.xvT,{children:"Are you sure you would like to continue?"})]})})]})},b=function(e,t){var n,s;return(null===(n=e.name)||void 0===n?void 0:n.toLocaleLowerCase().includes(t.toLocaleLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLocaleLowerCase().includes(t.toLocaleLowerCase()))},_=function(e){var t=e.systems,n=(0,r.useState)(""),a=n[0],o=n[1],l=(0,r.useMemo)((function(){return t?t.filter((function(e){return b(e,a)})):[]}),[t,a]);return t&&t.length?(0,s.jsxs)(i.xuv,{"data-testid":"system-management",children:[(0,s.jsx)(i.xuv,{mb:4,"data-testid":"system-filters",children:(0,s.jsx)(d.Z,{search:a,onChange:o,maxWidth:"30vw",placeholder:"Search system name or description","data-testid":"system-search",withIcon:!0})}),(0,s.jsx)(c,{columns:3,items:l,renderItem:function(e){return(0,s.jsx)(S,{system:e})}})]}):(0,s.jsx)("div",{"data-testid":"empty-state",children:"No systems registered."})}},95241:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var s=n(10503),i=n(32918),r=n(21788),a=n(41799),o=n(57812),c=function(e){var t=e.includeDatasets,n=e.includeDisabled,c=(0,o.MO)().isLoading,d=(0,i.te)().isLoading,l=(0,r.fd)().isLoading,u=(0,a.LH)({onlyUnlinkedDatasets:!1},{skip:!t}).isLoading,f=(0,s.C)(o.qb),m=(0,s.C)(o.Bd),h=(0,s.C)(i.ZL),x=(0,s.C)(i.H7),y=(0,s.C)(r.U3),g=(0,s.C)(r.jp),j=(0,s.C)(a.Q4);return{allDataCategories:n?f:m,allDataSubjects:n?h:x,allDataUses:n?y:g,allDatasets:t?j:void 0,isLoading:c||d||l||u}}},34038:function(e,t,n){"use strict";n.d(t,{Bw:function(){return s.Bw},D4:function(){return s.D4}});var s=n(32764)},33571:function(e){e.exports={"grid-row":"BorderGrid_grid-row__gzSVf","grid-item":"BorderGrid_grid-item__7gUTW"}}}]);