(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{50697:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations/[id]",function(){return t(61720)}])},87594:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(85034),o=t(70169),a=t(31373),s=t(24246),r=t(83265),l=t(98784),c=t(27378),d=t(79894),u=t.n(d),g=function(e){var n=e.breadcrumbs;return(0,s.jsx)(r.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:n.map((function(e,t){var i=t+1===n.length,o=!!e.link||!!e.onClick;return(0,s.jsx)(r.gN6,{color:i||e.isOpaque?"black":"gray.500",children:o?(0,s.jsx)(r.Atw,{as:u(),href:e.link,isCurrentPage:i,children:e.title}):(0,s.jsx)(r.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:i,children:e.title})},e.title)}))})},m=function(e){var n=e.breadcrumbs,t=e.isSticky,d=void 0===t||t,u=e.children,m=(0,a.Z)(e,["breadcrumbs","isSticky","children"]);return(0,s.jsxs)(r.xuv,(0,o.Z)((0,i.Z)({bgColor:"white",paddingY:5},d?{position:"sticky",top:0,left:0,zIndex:10}:{},m),{children:[(0,l.isArray)(n)&&(0,s.jsx)(r.xuv,{marginBottom:u?4:0,children:(0,s.jsx)(g,{breadcrumbs:n})}),(0,c.isValidElement)(n)&&n,u]}))}},52300:function(e,n,t){"use strict";t.d(n,{Od:function(){return s},QZ:function(){return a}});var i=t(3204),o=t(27378),a=function(e){var n=e.items,t=e.selected,o=e.onChange,a=n.every((function(e){return t.includes(e.id)}))&&!!n.length,s=n.some((function(e){return t.includes(e.id)}))&&!!n.length;return{allSelected:a,someSelected:s,handleToggleAll:function(){o(a?[]:n.map((function(e){return e.id})))},handleToggleSelection:function(e){t.includes(e)?o(t.filter((function(n){return n!==e}))):o((0,i.Z)(t).concat([e]))}}},s=function(e){var n=e.initialAllSelected,t=e.itemCount,a=e.selected,s=e.onChange,r=(0,o.useState)(n||a.length===t),l=r[0],c=r[1],d=!!a.length;return{allSelected:l,someSelected:d,handleToggleAll:function(){s([]),c(!l)},handleToggleSelection:function(e){if(a.includes(e))s(a.filter((function(n){return n!==e})));else{var n=(0,i.Z)(a).concat([e]);s(n),n.length===t&&c(!0)}}}}},61720:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ee}});var i=t(24246),o=t(83265),a=t(86677),s=t(83834),r=t(1496),l=t(93677),c=t(87594),d=t(1789),u=t(3939),g=t(26585),m=t(85034),x=t(70169),f=t(92222),h=t(59003),v=t(27378),p=t(45358),j=(0,o.IUT)({displayName:"MonitorIcon",viewBox:"0 0 12 12",path:(0,i.jsx)("path",{d:"M1.33333 2.21875C1.15 2.21875 1 2.37344 1 2.5625V5.65625H3.66667C3.84167 5.65625 4.00417 5.75078 4.09583 5.90762L4.62708 6.8207L5.88542 4.22324C5.96667 4.05566 6.13125 3.94609 6.3125 3.93965C6.49375 3.9332 6.66667 4.02773 6.76042 4.18887L7.61458 5.65625H8.83333C9.11042 5.65625 9.33333 5.88613 9.33333 6.17188C9.33333 6.45762 9.11042 6.6875 8.83333 6.6875H7.33333C7.15833 6.6875 6.99583 6.59297 6.90417 6.43613L6.37292 5.52305L5.11458 8.12051C5.03333 8.28809 4.86875 8.39766 4.6875 8.4041C4.50625 8.41055 4.33333 8.31602 4.23958 8.15488L3.38542 6.6875H1V9.4375C1 9.62656 1.15 9.78125 1.33333 9.78125H10.6667C10.85 9.78125 11 9.62656 11 9.4375V2.5625C11 2.37344 10.85 2.21875 10.6667 2.21875H1.33333ZM0 2.5625C0 1.8041 0.597917 1.1875 1.33333 1.1875H10.6667C11.4021 1.1875 12 1.8041 12 2.5625V9.4375C12 10.1959 11.4021 10.8125 10.6667 10.8125H1.33333C0.597917 10.8125 0 10.1959 0 9.4375V2.5625Z",fill:"currentColor"})}),b=t(73659),C=t(76353),y=t(23842),S=t(52050),_=t(85556),k=t(32556),Z=function(e){var n=e.defaultSuccessMsg,t=e.defaultErrorMsg,i=(0,o.pmc)();return{toastResult:function(e){if((0,k.D4)(e)){var o=(0,k.e$)(e.error,t);i({status:"error",description:o})}else i({status:"success",description:n})}}},P=t(83403),z=t(52300),A=t(12934),w=function(e){var n=e.items,t=e.itemCount,a=e.selected,s=e.allSelected,r=e.someSelected,l=e.handleToggleSelection,c=e.handleToggleAll,d=s?t:a.length;return(0,i.jsxs)(o.kCb,{w:"full",direction:"column",gap:3,children:[(0,i.jsx)(o.XZJ,{fontSize:"md",isChecked:s,size:"md",mr:2,onChange:c,colorScheme:"complimentary","data-testid":"select-all",isIndeterminate:!s&&r,children:"Select all"}),d>0?(0,i.jsxs)(o.Cts,{colorScheme:"purple",variant:"solid",width:"fit-content","data-testid":"num-selected-badge",children:[d," selected"]}):null,(0,i.jsx)(o.kCb,{pl:6,fontSize:"sm",gap:2,direction:"column",children:(0,i.jsx)(o.cOn,{colorScheme:"complimentary",children:n.map((function(e){return(0,i.jsx)(o.XZJ,{isChecked:a.includes(e.id)||s,size:"md",onChange:function(){return l(e.id)},disabled:s,"data-testid":"".concat(e.id,"-checkbox"),children:e.name},e.id)}))})})]})},R={items:[],total:1,page:1,size:50,pages:0},E=function(e){var n,t=e.monitor,a=e.isEditing,s=e.isSubmitting,r=e.integrationKey,l=e.onSubmit,c=e.onClose,d=(0,b.oi)(),u=d.PAGE_SIZES,g=d.pageSize,f=d.setPageSize,h=d.onPreviousPageClick,j=d.isPreviousPageDisabled,y=d.onNextPageClick,S=d.isNextPageDisabled,_=d.startRange,k=d.endRange,Z=d.pageIndex,P=d.setTotalPages,E=(0,C.QW)({page:Z,size:g,connection_config_key:r}),O=E.data,N=E.isLoading,D=E.isFetching,T=null!==O&&void 0!==O?O:R,q=T.items,M=T.total,L=T.pages;(0,v.useEffect)((function(){P(L)}),[L,P]);var I=(0,v.useState)(null!==(n=t.databases)&&void 0!==n?n:[]),V=I[0],H=I[1],W=(0,z.Od)({selected:V,initialAllSelected:a&&!V.length,itemCount:M,onChange:H}),F=W.allSelected,Y=W.someSelected,G=W.handleToggleSelection,K=W.handleToggleAll;if(N)return(0,i.jsx)(p.Z,{});var Q=!F&&0===V.length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.kCb,{p:4,direction:"column",children:[(0,i.jsxs)(o.kCb,{direction:"row",mb:4,gap:1,align:"center",children:[(0,i.jsx)(o.xvT,{fontSize:"sm",children:"Select projects to monitor"}),(0,i.jsx)(A.Z,{label:"Select projects to restrict which datasets this monitor can access. If no projects are selected, the monitor will observe all current and future projects."})]}),(0,i.jsx)(w,{items:q.map((function(e){return{name:e,id:e}})),itemCount:M,selected:V,allSelected:F,someSelected:Y,handleToggleSelection:G,handleToggleAll:K})]}),(0,i.jsx)(b.s8,{totalRows:M,pageSizes:u,setPageSize:f,onPreviousPageClick:h,isPreviousPageDisabled:j||D,onNextPageClick:y,isNextPageDisabled:S||D,startRange:_,endRange:k}),(0,i.jsxs)(o.hE2,{size:"sm",w:"full",justifyContent:"space-between",mt:4,children:[(0,i.jsx)(o.zxk,{onClick:c,variant:"outline",children:"Cancel"}),(0,i.jsx)(o.ua7,{label:"Select one or more projects to save",isDisabled:!Q,children:(0,i.jsx)(o.zxk,{onClick:function(){var e=(0,x.Z)((0,m.Z)({},t),{databases:F?[]:V});l(e)},isLoading:s,variant:"primary","data-testid":"save-btn",isDisabled:Q,children:"Save"})})]})]})},O=t(3204),N=t(73809),D=t(87941),T=t(34090),q=t(16310),M=t(56071),L=t(12262),I="Not scheduled",V=function(e){var n,t,s=e.monitor,r=e.integrationOption,l=e.isSubmitting,c=e.databasesAvailable,d=e.onClose,u=e.onAdvance,g=e.onSubmit,f=!!s,h=(0,a.useRouter)().query,v=Array.isArray(h.id)?h.id[0]:h.id,p=q.Ry().shape({name:q.Z_().required().label("Name"),execution_frequency:q.Z_().nullable().label("Execution frequency"),execution_start_date:q.hT().nullable().label("Execution start date")}),j=(null===s||void 0===s?void 0:s.execution_start_date)?(0,N.Z)(s.execution_start_date):Date.now(),b={name:null!==(n=null===s||void 0===s?void 0:s.name)&&void 0!==n?n:"",execution_start_date:(0,D.Z)(j,"yyyy-MM-dd'T'HH:mm"),execution_frequency:null!==(t=null===s||void 0===s?void 0:s.execution_frequency)&&void 0!==t?t:I},C=[{label:I,value:I}].concat((0,O.Z)((0,k.MM)(L.hV)));return(0,i.jsx)(T.J9,{initialValues:b,enableReinitialize:!0,onSubmit:function(e){var n=e.execution_frequency!==I?{execution_frequency:e.execution_frequency,execution_start_date:new Date(e.execution_start_date).toISOString()}:{execution_frequency:void 0,execution_start_date:void 0},t=f?(0,x.Z)((0,m.Z)({},s,n),{name:e.name}):(0,x.Z)((0,m.Z)({},n),{name:e.name,connection_config_key:v,classify_params:{num_samples:25,num_threads:1}});r.identifier===L.Rj.DYNAMODB&&(t.datasource_params={single_dataset:!1}),c?u(t):g(t)},validationSchema:p,children:function(e){var n=e.values,t=e.isValid,a=e.resetForm;return(0,i.jsx)(T.l0,{children:(0,i.jsxs)(o.gCW,{alignItems:"start",spacing:6,mt:4,children:[(0,i.jsx)(M.j0,{name:"name",id:"name",label:"Name",isRequired:!0,variant:"stacked"}),(0,i.jsx)(M.AP,{name:"execution_frequency",id:"execution_frequency",tooltip:"Interval to run the monitor automatically after the start date",options:C,label:"Automatic execution frequency",variant:"stacked"}),(0,i.jsx)(M.YL,{name:"execution_start_date",label:"Automatic execution start time",disabled:n.execution_frequency===I,id:"execution_start_date"}),(0,i.jsxs)(o.hE2,{size:"sm",w:"full",justifyContent:"space-between",children:[(0,i.jsx)(o.zxk,{variant:"outline",onClick:function(){a(),d()},children:"Cancel"}),(0,i.jsx)(o.zxk,{type:"submit",variant:"primary",isDisabled:!t,isLoading:l,"data-testid":"next-btn",children:c?"Next":"Save"})]})]})})}})},H=t(34038),W=function(e){var n=e.isOpen,t=e.onClose,o=e.formStep,a=e.onAdvance,s=e.monitor,r=e.isEditing,l=e.integration,c=e.integrationOption,d=(0,S.Z)((0,C.Fy)(),2),u=d[0],g=d[1].isLoading,m=(0,C.QW)({page:1,size:25,connection_config_key:l.key}).data,x=!!m&&!!m.total,f=Z({defaultSuccessMsg:"Monitor ".concat(r?"updated":"created"," successfully"),defaultErrorMsg:"A problem occurred while ".concat(r?"updating":"creating"," this monitor")}).toastResult,h=function(){var e=(0,y.Z)((function(e){var n;return(0,_.__generator)(this,(function(i){switch(i.label){case 0:return[4,u(e)];case 1:return n=i.sent(),f(n),(0,H.D4)(n)||t(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,i.jsxs)(P.Z,{title:(null===s||void 0===s?void 0:s.name)?"Configure ".concat(s.name):"Configure discovery monitor",isOpen:n,onClose:t,children:[0===o&&(0,i.jsx)(V,{monitor:s,onClose:t,onAdvance:a,onSubmit:h,isSubmitting:g,databasesAvailable:x,integrationOption:c}),1===o&&(s?(0,i.jsx)(E,{monitor:s,isEditing:r,isSubmitting:g,onSubmit:h,onClose:t,integrationKey:l.key}):(0,i.jsx)(p.Z,{}))]})},F=function(e){var n=e.onEditClick;return(0,i.jsx)(o.xuv,{children:(0,i.jsx)(o.hU,{onClick:n,icon:(0,i.jsx)(o.dY8,{}),variant:"outline",size:"xs","data-testid":"edit-monitor-btn","aria-label":"Edit monitor"})})},Y={items:[],total:0,page:1,size:50,pages:0},G=(0,f.Cl)(),K=function(e){var n=e.onAddClick;return(0,i.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:(0,i.jsxs)(o.gCW,{children:[(0,i.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No monitors"}),(0,i.jsx)(o.xvT,{fontSize:"sm",children:'You have not configured any data discovery monitors. Click "Add monitor" to configure data discovery now.'}),(0,i.jsx)(o.zxk,{onClick:n,colorScheme:"primary",children:"Add monitor"})]})})},Q=function(e){var n=e.integration,t=e.integrationOption,a=(0,b.oi)(),s=a.PAGE_SIZES,r=a.pageSize,l=a.setPageSize,c=a.onPreviousPageClick,d=a.isPreviousPageDisabled,u=a.onNextPageClick,g=a.isNextPageDisabled,y=a.startRange,S=a.endRange,_=a.pageIndex,k=a.setTotalPages,Z=(0,C.Fu)({page:_,size:r,connection_config_key:n.key}),P=Z.isLoading,z=Z.isFetching,A=Z.data,w=(0,o.qY0)(),R=(0,v.useState)(void 0),E=R[0],O=R[1],N=(0,v.useState)(!1),D=N[0],T=N[1],q=(0,v.useState)(0),M=q[0],L=q[1],I=function(e){O(e),T(!0),w.onOpen()},V=null!==A&&void 0!==A?A:Y,H=(0,v.useMemo)((function(){return V}),[V]),Q=H.items,X=H.total,B=H.pages;(0,v.useEffect)((function(){k(B)}),[B,k]);var J=(0,v.useMemo)((function(){return[G.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,i.jsx)(b.G3,{value:e.getValue()})},header:function(e){return(0,i.jsx)(b.Rr,(0,m.Z)({value:"Name"},e))}}),G.accessor((function(e){return e.databases}),{id:"projects",cell:function(e){return 0===e.getValue().length?(0,i.jsx)(b.G3,{value:"All projects"}):(0,i.jsx)(b.WP,(0,x.Z)((0,m.Z)({suffix:"Projects",value:e.getValue()},e),{isDisplayAll:!0}))},header:function(e){return(0,i.jsx)(b.Rr,(0,m.Z)({value:"Location"},e))}}),G.display({id:"action",cell:function(e){return(0,i.jsx)(F,{onEditClick:function(){return I(e.row.original)}})},header:"Actions",meta:{disableRowClick:!0},maxSize:50})]}),[]),$=(0,h.b7)({getCoreRowModel:(0,f.sC)(),getGroupedRowModel:(0,f.qe)(),getExpandedRowModel:(0,f.rV)(),getRowId:function(e){return e.name},manualPagination:!0,data:Q,columns:J});return P?(0,i.jsx)(p.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.xvT,{maxW:"720px",mb:6,fontSize:"sm",children:"A data discovery monitor observes configured systems for data model changes to proactively discover and classify data risks. Monitors can observe part or all of a project, dataset, table, or API for changes and each can be assigned to a different data steward."}),(0,i.jsxs)(b.Q$,{children:[(0,i.jsx)(o.LZC,{}),(0,i.jsx)(o.zxk,{onClick:w.onOpen,size:"xs",variant:"outline",rightIcon:(0,i.jsx)(j,{}),"data-testid":"add-monitor-btn",children:"Add monitor"}),(0,i.jsx)(W,{isOpen:w.isOpen,onClose:function(){O(void 0),T(!1),L(0),w.onClose()},formStep:M,onAdvance:function(e){O(e),L(1)},monitor:E,isEditing:D,integration:n,integrationOption:t})]}),(0,i.jsx)(b.ZK,{tableInstance:$,onRowClick:I,emptyTableNotice:(0,i.jsx)(K,{onAddClick:w.onOpen})}),(0,i.jsx)(b.s8,{totalRows:X,pageSizes:s,setPageSize:l,onPreviousPageClick:c,isPreviousPageDisabled:d||z,onNextPageClick:u,isNextPageDisabled:g||z,startRange:y,endRange:S})]})},X=t(30737),B=t(23623),J=function(e){var n=e.isOpen,t=e.onClose,o=e.connection,a=(0,B.Z)(o.connection_type);return(0,i.jsx)(P.Z,{title:"Manage integration secret",isOpen:n,onClose:t,children:(0,i.jsx)(X.Z,{connection:o,connectionOption:a,onCancel:t})})},$=t(37601),U=t(35208),ee=function(){var e=(0,a.useRouter)().query,n=Array.isArray(e.id)?e.id[0]:e.id,t=(0,d.jA)(null!==n&&void 0!==n?n:""),m=t.data,x=t.isLoading,f=(0,B.Z)(null===m||void 0===m?void 0:m.connection_type),h=(0,u.Z)(m),v=h.testConnection,p=h.isLoading,j=h.testData,b=(0,o.qY0)(),C=b.onOpen,y=b.isOpen,S=b.onClose,_=(0,g.ZP)(null===m||void 0===m?void 0:m.connection_type),k=_.overview,Z=_.instructions,P=(0,a.useRouter)();m&&!g.jq.includes(m.connection_type)&&P.push(l.KH);var z,A,w=[{label:"Connection",content:(0,i.jsxs)(o.xuv,{maxW:"720px",children:[(0,i.jsxs)(o.kCb,{borderRadius:"md",outline:"1px solid",outlineColor:"gray.100",align:"center",p:3,children:[(0,i.jsx)(o.kCb,{flexDirection:"column",children:(0,i.jsx)($.Z,{testData:j})}),(0,i.jsx)(o.LZC,{}),(0,i.jsxs)(o.hE2,{size:"sm",variant:"outline",children:[(0,i.jsx)(o.zxk,{onClick:v,isLoading:p,"data-testid":"test-connection-btn",children:"Test connection"}),(0,i.jsx)(o.zxk,{onClick:C,"data-testid":"manage-btn",children:"Manage"})]})]}),(0,i.jsx)(J,{isOpen:y,onClose:S,connection:m}),k,Z]})},{label:"Data discovery",content:(0,i.jsx)(Q,{integration:m,integrationOption:f})}];return(0,i.jsx)(r.Z,{title:"Integrations",children:(0,i.jsxs)(c.Z,{breadcrumbs:[{title:"Integrations",link:l.KH},{title:null!==(A=null!==(z=null===m||void 0===m?void 0:m.name)&&void 0!==z?z:null===m||void 0===m?void 0:m.key)&&void 0!==A?A:""}],children:[(0,i.jsx)(U.Z,{integration:m}),x?(0,i.jsx)(o.$jN,{}):!!m&&(0,i.jsx)(s.Z,{data:w,isLazy:!0})]})})}}},function(e){e.O(0,[8033,3667,1813,3659,8886,9774,2888,179],(function(){return n=50697,e(e.s=n);var n}));var n=e.O();_N_E=n}]);