
RDMA-STATISTIC(8)                    Linux                   RDMA-STATISTIC(8)

NAME
       rdma-statistic - RDMA statistic counter configuration

SYNOPSIS
       rdma [ OPTIONS ] statistic  { COMMAND | help }

       rdma statistic { OBJECT } show

       rdma statistic [ OBJECT ] show link [ DEV/PORT_INDX ]

       rdma statistic OBJECT mode

       rdma statistic OBJECT set COUNTER_SCOPE [ DEV/PORT_INDEX] auto { CRITE-
               RIA | off }

       rdma statistic OBJECT bind COUNTER_SCOPE [ DEV/PORT_INDEX] [ OBJECT-ID
               ] [ COUNTER-ID ]

       rdma statistic OBJECT unbind COUNTER_SCOPE [ DEV/PORT_INDEX] [ COUNTER-
               ID ] [ OBJECT-ID ]

       COUNTER_SCOPE := { link | dev }

       OBJECT := { qp | mr }

       CRITERIA := { type }

DESCRIPTION
   rdma statistic [object] show - Queries the specified RDMA device for RDMA
       and driver-specific statistics. Show the default hw counters if object
       is not specified
       DEV - specifies counters on this RDMA device to show.

       PORT_INDEX - specifies counters on this RDMA port to show.

   rdma statistic <object> set - configure counter statistic auto-mode for a
       specific device/port
       In auto mode all objects belong to one category are bind automatically
       to a single counter set. Not applicable for MR's.

   rdma statistic <object> bind - manually bind an object (e.g., a qp) with a
       counter
       When bound the statistics of this object are available in this counter.
       Not applicable for MR's.

   rdma statistic <object> unbind - manually unbind an object (e.g., a qp)
       from the counter previously bound
       When unbound the statistics of this object are no longer available in
       this counter; And if object id is not specified then all objects on
       this counter will be unbound. Not applicable for MR's.

       COUNTER-ID - specifies the id of the counter to be bound.  If this ar-
       gument is omitted then a new counter will be allocated.

EXAMPLES
       rdma statistic show
           Shows the state of the default counter of all RDMA devices on the
           system.

       rdma statistic show link mlx5_2/1
           Shows the state of the default counter of specified RDMA port

       rdma statistic qp show
           Shows the state of all qp counters of all RDMA devices on the sys-
           tem.

       rdma statistic qp show link mlx5_2/1
           Shows the state of all qp counters of specified RDMA port.

       rdma statistic qp show link mlx5_2 pid 30489
           Shows the state of all qp counters of specified RDMA port and be-
           longing to pid 30489

       rdma statistic qp mode
           List current counter mode on all devices

       rdma statistic qp mode link mlx5_2/1
           List current counter mode of device mlx5_2 port 1

       rdma statistic qp set link mlx5_2/1 auto type on
           On device mlx5_2 port 1, for each new QP bind it with a counter au-
           tomatically. Per counter for QPs with same qp type in each process.
           Currently only "type" is supported.

       rdma statistic qp set link mlx5_2/1 auto off
           Turn-off auto mode on device mlx5_2 port 1. The allocated counters
           can be manually accessed.

       rdma statistic qp bind link mlx5_2/1 lqpn 178
           On device mlx5_2 port 1, allocate a counter and bind the specified
           qp on it

       rdma statistic qp unbind link mlx5_2/1 cntn 4 lqpn 178
           On device mlx5_2 port 1, bind the specified qp on the specified
           counter

       rdma statistic qp unbind link mlx5_2/1 cntn 4
           On device mlx5_2 port 1, unbind all QPs on the specified counter.
           After that this counter will be released automatically by the ker-
           nel.

       rdma statistic show mr
           List all currently allocated MR's and their counters.

       rdma statistic show mr mrn 6
           Dump a specific MR statistics with mrn 6. Dumps nothing if does not
           exists.

SEE ALSO
       rdma(8), rdma-dev(8), rdma-link(8), rdma-resource(8),

AUTHORS
       Mark Zhang <markz@mellanox.com>
       Erez Alfasi <ereza@mellanox.com>

iproute2                         27 June 2019                RDMA-STATISTIC(8)