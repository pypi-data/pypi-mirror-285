"use strict";(self.webpackChunkjupyterlab_trame_manager=self.webpackChunkjupyterlab_trame_manager||[]).push([[105],{105:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(974),c=n(607),l=n(256),r=n(345),s=n.n(r),i=n(523),o=n.n(i),m=n(355),d=n(74),u=n(465);async function p(e,t={}){const n=u.ServerConnection.makeSettings(),a=d.URLExt.join(n.baseUrl,"trame-manager",e);let c;try{c=await u.ServerConnection.makeRequest(a,t,n)}catch(e){throw new u.ServerConnection.NetworkError(e)}let l=await c.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",c)}if(!c.ok)throw new u.ServerConnection.ResponseError(c,l.message||l);return l}function h(e,t={}){const[n,a]=(0,r.useState)(null),c=()=>{p(e,t).then((e=>a(e))).catch((e=>console.error(e)))};return(0,r.useEffect)(c,[e,t]),[n,c]}function E(e,t){const n=document.createElement("label");return n.htmlFor=e,n.textContent=t,n}function v(e,t){const n=document.createElement("select");n.id=e;for(const e of t){const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}return n}function g(e,t,n,a=[]){const c=document.createElement("input");c.type=t,c.id=e,c.value=n,c.classList.add("form-input");for(const[e,t]of a)c.setAttribute(e,t);return c}class b extends l.Widget{constructor(){super(),this.fetchUserData=async()=>{const e=await p("user");for(const t of e.accounts){const e=document.createElement("option");e.value=t,e.textContent=t,this._accountElement.appendChild(e)}for(const t of e.partitions){const e=document.createElement("option");e.value=t,e.textContent=t,this._partitionElement.appendChild(e)}};const e=document.createElement("div");e.appendChild(E("name","Name: ")),e.appendChild(this._nameElement=g("name","text","ParaView Server")),this.node.appendChild(e);const t=document.createElement("div");t.appendChild(E("account","Account: ")),t.appendChild(this._accountElement=v("account",[])),this.node.appendChild(t);const n=document.createElement("div");n.appendChild(E("partition","Partition: ")),n.appendChild(this._partitionElement=v("partition",[])),this.node.appendChild(n);const a=document.createElement("div");a.appendChild(E("nodes","Nodes: ")),a.appendChild(this._nodesElement=g("nodes","number","4",[["min","1"],["max","32"],["step","1"]])),this.node.appendChild(a);const c=document.createElement("div");c.appendChild(E("time","Time: ")),c.appendChild(this._timeElement=g("time","text","02:00:00")),this.node.appendChild(c),this.fetchUserData()}getValue(){return{name:this._nameElement.value,account:this._accountElement.value,partition:this._partitionElement.value,nodes:Number(this._nodesElement.value),timeLimit:this._timeElement.value}}}class f extends l.Widget{constructor(e,t){super(),this.fetchUserData=async()=>{const e=await p("user");this._dataDirElement.value=e.home};const n=document.createElement("div");n.appendChild(E("name","Name: ")),n.appendChild(this._nameElement=g("name","text",`${e} Instance ${t+1}`)),this.node.appendChild(n);const a=document.createElement("div");a.appendChild(E("dataDir","Data Directory: ")),a.appendChild(this._dataDirElement=g("dataDir","text","")),this.node.appendChild(a),this.fetchUserData()}getValue(){return{name:this._nameElement.value,dataDirectory:this._dataDirElement.value}}}function C(e){return r.createElement("div",{className:"info-container"},r.createElement("span",{className:"info-label"},e.label,":"),"object"==typeof e.value?e.value:r.createElement("span",{className:"info-value"},e.value))}const w={};function x(e){return r.createElement("div",{className:"path-container"},r.createElement("div",null,e.path),r.createElement("button",{className:"icon-button",onClick:()=>{c.Clipboard.copyToSystem(e.path)}},r.createElement(m.copyIcon.react,{tag:"span",width:"16px"})),r.createElement("button",{className:"icon-button",onClick:async()=>{var t;console.log(w.instance),await(null===(t=w.instance)||void 0===t?void 0:t.execute("filebrowser:open-path",{path:e.path}))}},r.createElement(m.folderIcon.react,{tag:"span",width:"16px"})))}const y=(0,r.createContext)([]);function N({index:e}){const{name:t,account:n,nodes:a,partition:c,state:l,timeLimit:i,timeUsed:m}=(0,r.useContext)(y)[e],d=s().createElement(s().Fragment,null,s().createElement("b",null,t),s().createElement(C,{label:"Nodes",value:a.toString()}),s().createElement(C,{label:"Status",value:l}),s().createElement(C,{label:"Time",value:`${m} / ${i}`}));return s().createElement(s().Fragment,null,s().createElement(o(),{trigger:d},s().createElement(C,{label:"Project",value:n}),s().createElement(C,{label:"Partition",value:c}),s().createElement(C,{label:"Nodes",value:a.toString()})))}function L(){const[e,t]=h("paraview");return(0,r.useEffect)((()=>{const e=setInterval(t,3e4);return()=>clearInterval(e)}),[]),s().createElement(s().Fragment,null,s().createElement("h3",null,"Running ParaView backends:"),s().createElement("span",{className:"toolbar"},s().createElement("button",{className:"icon-button",onClick:t},s().createElement(m.refreshIcon.react,{tag:"div",width:"20px"})),s().createElement("button",{className:"launch-button",onClick:async function(){const e=await(0,c.showDialog)({title:"Launch a new ParaView instance",body:new b});console.log(e.value);const t=await p("paraview",{method:"POST",body:JSON.stringify(e.value)});await(0,c.showErrorMessage)(0===t.returnCode?"Success":"Error",t.message)}},"Launch")),s().createElement("div",{id:"paraview-instances",className:"instance-list"},s().createElement(y.Provider,{value:null!=e?e:[]},null==e?void 0:e.map(((e,t)=>s().createElement(N,{index:t}))))))}const S=(0,r.createContext)([]);function _({appName:e,appIndex:t,instanceIndex:n}){const{base_url:a,dataDirectory:l,log:i,name:m,port:u}=(0,r.useContext)(S)[t].instances[n],[h,E]=(0,r.useState)(null),v=s().createElement(s().Fragment,null,s().createElement("b",null,m)),g=h?s().createElement("div",{style:{marginTop:"10px"}},"Connected to ParaView Server ",s().createElement("span",{style:{fontWeight:"bold"}},h[0])," on ",s().createElement("span",{style:{fontWeight:"bold"}},h[1],":11111"),s().createElement("button",{className:"disconnect-button",onClick:async function(){await p(d.URLExt.join("trame","disconnect"),{method:"POST",body:JSON.stringify({appName:e,instanceName:m})}),E(null)}},"Disconnect")):s().createElement("button",{className:"connect-button",onClick:async function(){const t=await p("paraview"),n=await c.InputDialog.getItem({title:"Select ParaView Server to connect to",items:t.map((e=>e.name)),current:0,editable:!1});if(!n.value||0===n.value.length)return;console.log(`Connecting instance '${m}' to Server '${n.value}'`);const a=await p(d.URLExt.join("trame","connect"),{method:"POST",body:JSON.stringify({appName:e,instanceName:m,serverName:n.value})});E([n.value,a.url])}},"Connect");return s().createElement("li",null,s().createElement("div",{style:{flexGrow:1}},s().createElement(o(),{trigger:v},s().createElement(C,{label:"Data Directory",value:s().createElement(x,{path:l})}),s().createElement(C,{label:"Port",value:`${u}`}),s().createElement(C,{label:"Base URL",value:`${a}`}),s().createElement(C,{label:"Log File",value:s().createElement(x,{path:i})}),g)),s().createElement("button",{className:"open-button",onClick:function(){window.open(a,"_blank","noreferrer")}},"Open"))}function k({index:e}){const{displayName:t,name:n,path:a,instances:l}=(0,r.useContext)(S)[e],i=s().createElement("div",null,s().createElement("b",null," ",t," "),s().createElement("br",null),"Running Instances: ",l.length);return s().createElement(s().Fragment,null,s().createElement(o(),{trigger:i},s().createElement(C,{label:"Path",value:s().createElement(x,{path:a})}),s().createElement("div",{style:{height:"40px",margin:"10px 0 0 0"}},s().createElement("button",{className:"launch-button",onClick:async function(){const e=await(0,c.showDialog)({title:"Launch a new ParaView instance",body:new f(t,l.length)});console.log("Launching trame app:",e.value);const a=await p("trame",{method:"POST",body:JSON.stringify({appName:n,...e.value})});await(0,c.showErrorMessage)("Success",`Launched new trame instance on port ${a.port}`)}},"Launch")),s().createElement("div",{className:"instance-list"},l.map(((t,a)=>s().createElement(_,{appName:n,appIndex:e,instanceIndex:a}))))))}function D(){const[e,t]=h("trame");return(0,r.useEffect)((()=>{const e=setInterval(t,3e4);return()=>clearInterval(e)}),[]),s().createElement(s().Fragment,null,s().createElement("h3",null,"trame Apps:"),s().createElement("div",{id:"trame-instances",className:"instance-list"},s().createElement(S.Provider,{value:null!=e?e:[]},null==e?void 0:e.map(((e,t)=>s().createElement(k,{index:t}))))))}const I=new m.LabIcon({name:"jupyterlab-trame-manager:icon",svgstr:'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 25.4.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 196 196" style="enable-background:new 0 0 196 196;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#09A94E;}\n\t.st1{fill:#00549B;}\n\t.st2{display:none;}\n\t.st3{display:inline;fill:#FFFFFF;}\n</style>\n<g id="Layer_1">\n</g>\n<g id="Layer_2">\n</g>\n<g id="Layer_3">\n\t<g>\n\t\t<path class="st0" d="M15.5,101.2L6,110.7c-2.8,2.8-2.8,7.4,0,10.2c2.8,2.8,7.4,2.8,10.2,0c0,0,0,0,0,0l9.5-9.5L15.5,101.2z"/>\n\t\t<path class="st0" d="M180.5,94.8l9.5-9.5c2.8-2.8,2.8-7.4,0-10.2c-2.8-2.8-7.4-2.8-10.2,0c0,0,0,0,0,0l-9.5,9.5L180.5,94.8z"/>\n\t\t<path class="st1" d="M66.4,145.8l44.1,44.1c2.8,2.8,7.4,2.8,10.2,0c2.8-2.8,2.8-7.4,0-10.2c0,0,0,0,0,0l-44.1-44.1L66.4,145.8z"/>\n\t\t<path class="st1" d="M129.5,50.2L85.4,6.1c-2.8-2.8-7.4-2.8-10.2,0c-2.8,2.8-2.8,7.4,0,10.2c0,0,0,0,0,0l44.1,44.1L129.5,50.2z"/>\n\t\t\n\t\t\t<rect x="56.1" y="26.2" transform="matrix(0.7071 0.7071 -0.7071 0.7071 63.3492 -26.2289)" class="st0" width="14.4" height="74.3"/>\n\t\t\n\t\t\t<rect x="125.2" y="95.3" transform="matrix(0.7071 0.7071 -0.7071 0.7071 132.4076 -54.8339)" class="st0" width="14.4" height="74.3"/>\n\t\t\n\t\t\t<rect x="90.5" y="60.6" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 235.8723 97.7284)" class="st1" width="14.4" height="74.3"/>\n\t\t<path class="st0" d="M130.1,31.2C130.1,31.2,130.1,31.2,130.1,31.2c3.2,3.2,5,7.6,5,12.2c0,4.6-1.8,9-5,12.2l-29,29l10.2,10.2\n\t\t\tl26.3-26.3c0.1-0.1,0.2-0.3,0.4-0.4l2.4-2.4c6-6,9.2-13.9,9.2-22.4S146.3,27,140.3,21c-6-6-13.9-9.2-22.4-9.2\n\t\t\tc-5.8,0-11.3,1.5-16.1,4.4L112.7,27C118.6,25.1,125.4,26.5,130.1,31.2z"/>\n\t\t<path class="st1" d="M31.3,65.9C31.3,65.9,31.3,65.9,31.3,65.9c-3.2,3.2-5,7.6-5,12.2c0,4.6,1.8,9,5,12.2l29,29l-10.2,10.2\n\t\t\tl-26.3-26.3c-0.1-0.1-0.2-0.3-0.4-0.4l-2.4-2.4c-6-6-9.2-13.9-9.2-22.4s3.3-16.4,9.2-22.4c6-6,13.9-9.2,22.4-9.2\n\t\t\tc5.8,0,11.3,1.5,16.1,4.4L48.7,61.7C42.8,59.8,36,61.2,31.3,65.9z"/>\n\t\t<path class="st1" d="M164.8,130.3C164.8,130.3,164.8,130.3,164.8,130.3c3.2-3.2,5-7.6,5-12.2c0-4.6-1.8-9-5-12.2l-29-29L146,66.7\n\t\t\tl26.3,26.3c0.1,0.1,0.2,0.3,0.4,0.4l2.4,2.4c6,6,9.2,13.9,9.2,22.4s-3.3,16.4-9.2,22.4c-6,6-13.9,9.2-22.4,9.2\n\t\t\tc-5.8,0-11.3-1.5-16.1-4.4l10.8-10.8C153.3,136.4,160.1,135,164.8,130.3z"/>\n\t\t<path class="st0" d="M65.8,164.8c-3.2-3.2-5-7.6-5-12.2s1.8-9,5-12.2l28.9-28.9l-10.2-10.2l-26.2,26.2c-0.1,0.1-0.3,0.3-0.4,0.4\n\t\t\tl-2.4,2.4c-6,6-9.2,13.9-9.2,22.4c0,8.5,3.3,16.4,9.2,22.4c0,0,0,0,0,0c6,6,13.9,9.2,22.4,9.2c5.7,0,11.2-1.5,16-4.3L83.1,169\n\t\t\tC77.2,170.8,70.5,169.4,65.8,164.8z"/>\n\t</g>\n</g>\n<g id="Layer_4" class="st2">\n\t<path class="st3" d="M-349.4-145.1c8.4,0,16.4,3.3,22.4,9.3c6,6,9.3,13.9,9.3,22.4c0,8.4-3.3,16.4-9.3,22.4c-6,6-13.9,9.3-22.4,9.3\n\t\th-3.3c-0.2,0-0.4,0-0.5,0l-101.6,0c-4.6,0-8.9,1.8-12.2,5.1s-5.1,7.6-5.1,12.2c0,9.5,7.7,17.2,17.2,17.2l126.8,0c0,0,0,0,0,0\n\t\tc4,0,7.2,3.2,7.2,7.2c0,4-3.2,7.2-7.2,7.2l-126.8,0c0,0,0,0,0,0c-8.4,0-16.4-3.3-22.4-9.3c-6-6-9.3-13.9-9.3-22.4\n\t\tc0-8.4,3.3-16.4,9.3-22.4c6-6,13.9-9.3,22.4-9.3h3.3c0.2,0,0.4,0,0.6,0l101.6,0c4.6,0,8.9-1.8,12.2-5.1c3.3-3.3,5.1-7.6,5.1-12.2\n\t\tc0-4.6-1.8-8.9-5.1-12.2c-3.3-3.3-7.6-5.1-12.2-5.1h-126.8c-4,0-7.2-3.2-7.2-7.2c0-4,3.2-7.2,7.2-7.2L-349.4-145.1 M-349.4-149.6\n\t\tL-349.4-149.6l-126.8,0c-6.5,0-11.7,5.2-11.7,11.7c0,6.5,5.2,11.7,11.7,11.7h126.8c3.4,0,6.6,1.3,9,3.8c2.4,2.4,3.8,5.6,3.8,9\n\t\tc0,3.4-1.3,6.6-3.8,9c-2.4,2.4-5.6,3.8-9,3.8l-101.6,0c-0.3,0-0.5,0-0.7,0h-3.2c-9.6,0-18.7,3.8-25.5,10.6\n\t\tc-6.8,6.8-10.6,15.9-10.6,25.5c0,9.6,3.8,18.7,10.6,25.5c6.8,6.8,15.9,10.6,25.5,10.6l126.8,0c3.1,0,6.1-1.2,8.3-3.4\n\t\tc2.2-2.2,3.4-5.1,3.4-8.3c0-3.1-1.2-6.1-3.4-8.3c-2.2-2.2-5.1-3.4-8.3-3.4l-126.8,0c-7,0-12.7-5.7-12.7-12.7c0-3.4,1.3-6.6,3.8-9\n\t\tc2.4-2.4,5.6-3.8,9-3.8l101.6,0c0.2,0,0.5,0,0.7,0h3.2c9.6,0,18.7-3.8,25.5-10.6c6.8-6.8,10.6-15.9,10.6-25.5\n\t\tc0-9.6-3.8-18.7-10.6-25.5C-330.7-145.9-339.8-149.6-349.4-149.6L-349.4-149.6z"/>\n\t<path class="st3" d="M-426.6-173.4c8.4,0,16.4,3.3,22.4,9.3c6,6,9.3,13.9,9.3,22.4v3.3c0,0.2,0,0.4,0,0.5l0,101.6\n\t\tc0,4.6,1.8,8.9,5.1,12.2c3.3,3.3,7.6,5.1,12.2,5.1c9.5,0,17.2-7.7,17.2-17.2l0-126.8c0-4,3.2-7.2,7.2-7.2c4,0,7.2,3.2,7.2,7.2\n\t\tl0,126.8c0,8.4-3.3,16.4-9.3,22.4c-6,6-13.9,9.3-22.4,9.3c0,0,0,0,0,0c-8.4,0-16.4-3.3-22.4-9.3c-6-6-9.3-13.9-9.3-22.4l0-3.3\n\t\tc0-0.2,0-0.4,0-0.5l0-101.6c0-4.6-1.8-8.9-5.1-12.2c-3.3-3.3-7.6-5.1-12.2-5.1c0,0,0,0,0,0c-9.5,0-17.2,7.7-17.2,17.2l0,126.8\n\t\tc0,4-3.2,7.2-7.2,7.2c0,0,0,0,0,0c-2,0-3.8-0.8-5.1-2.1c-1.3-1.3-2.1-3.1-2.1-5.1l0-126.8c0-8.4,3.3-16.4,9.3-22.4\n\t\tC-443-170.1-435.1-173.4-426.6-173.4 M-426.6-177.9L-426.6-177.9c-9.6,0-18.7,3.8-25.5,10.6c-6.8,6.8-10.6,15.9-10.6,25.5l0,126.8\n\t\tc0,3.1,1.2,6.1,3.4,8.3c2.2,2.2,5.1,3.4,8.3,3.4c0,0,0,0,0,0c3.1,0,6.1-1.2,8.3-3.4c2.2-2.2,3.4-5.1,3.4-8.3l0-126.8\n\t\tc0-3.4,1.3-6.6,3.7-9c2.4-2.4,5.6-3.7,9-3.7c3.4,0,6.6,1.3,9,3.8c2.4,2.4,3.8,5.6,3.8,9l0,101.6c0,0.3,0,0.5,0,0.7l0,3.2\n\t\tc0,9.6,3.8,18.7,10.6,25.5c6.8,6.8,15.9,10.6,25.5,10.6c9.6,0,18.7-3.8,25.5-10.6c6.8-6.8,10.6-15.9,10.6-25.5l0-126.8\n\t\tc0-6.5-5.2-11.7-11.7-11.7c-6.5,0-11.7,5.2-11.7,11.7l0,126.8c0,7-5.7,12.7-12.7,12.7c-3.4,0-6.6-1.3-9-3.8c-2.4-2.4-3.8-5.6-3.8-9\n\t\tl0-101.6c0-0.2,0-0.5,0-0.7v-3.2c0-9.6-3.8-18.7-10.6-25.5C-407.9-174.1-417-177.9-426.6-177.9L-426.6-177.9z"/>\n</g>\n</svg>\n'}),P={id:"jupyterlab-trame-manager",autoStart:!0,requires:[a.ILayoutRestorer],activate:(e,t)=>{w.instance=e.commands;const n=new l.SplitPanel;n.orientation="vertical",n.id="trame-manager-sidepanel",n.title.icon=I,n.title.caption="trame Manager";const a=c.ReactWidget.create(s().createElement(L,null));a.addClass("trame-manager-sidepanel-segment"),n.addWidget(a);const r=c.ReactWidget.create(s().createElement(D,null));r.addClass("trame-manager-sidepanel-segment"),n.addWidget(r),t&&t.add(n,"jupyterlab-trame-manager:sidebar"),e.shell.add(n,"left")}}}}]);