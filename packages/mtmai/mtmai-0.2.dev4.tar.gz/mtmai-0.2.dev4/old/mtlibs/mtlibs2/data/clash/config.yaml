port: 7890
socks-port: 7891
redir-port: 7892
tproxy-port: 7893
allow-lan: true
bind-address: '*'
ipv6: false
external-controller: 0.0.0.0:9090
mode: Rule
log-level: debug
secret: "feihuo321"
dns:
  enable: true
  ipv6: false
  listen: :53
  enhanced-mode: redir-host
  default-nameserver:
    - 8.8.8.8
    - 8.8.4.4
  nameserver:
    - 8.8.8.8
    - 8.8.4.4
  fallback:
    - tls://dns.rubyfish.cn:853
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
proxies: 
    #内网高速代理（一级出口）
    - name: "local_lan_proxy"
      type: socks5
      server: 192.168.43.1
      port: 7894

    - name: "tor_local"
      type: socks5
      server: 127.0.0.1
      port: 9050

    - name: "direct_http_proxy"
      type: http
      server: 172.17.0.1
      port: 8086




proxy-groups:
    - name: "relay1"
      type: relay
      proxies:
        - tor_local

rules:
    - IP-CIDR,127.0.0.0/8,DIRECT
    # - IP-CIDR,192.168.0.0/16,DIRECT
    - IP-CIDR,172.17.0.0/16,DIRECT
    - IP-CIDR,172.18.0.0/16,DIRECT
    - IP-CIDR,172.19.0.0/16,DIRECT
    - IP-CIDR,172.20.0.0/16,DIRECT
    # - SRC-IP-CIDR,10.12.12.51/32,gitpod_socks5
    # - SRC-IP-CIDR,10.12.2.0/24,911
    - SRC-IP-CIDR,10.12.12.9/32,DIRECT    #win1   
    - SRC-IP-CIDR,10.12.10.202/32,DIRECT  # 911 # iphone
    # - IP-CIDR,10.12.0.0/16,DIRECT
    - GEOIP,LAN,DIRECT
    - SRC-IP-CIDR,192.168.43.0/25,local_lan_proxy  # 尾数1-127的IP使用普通的方式连接外网
    #- SRC-IP-CIDR,192.168.239.0/24,local_lan_proxy # 对应vmware “host only”模式的网卡（注意要跟实际IP段对应）
    - MATCH,tor_local                              # 其他情况都走tor路径。