export const id=7829;export const ids=[7829];export const modules={53935:(e,t,i)=>{i.d(t,{A:()=>o});const a=e=>e<10?`0${e}`:e;function o(e){const t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return t>0?`${t}:${a(i)}:${a(o)}`:i>0?`${i}:${a(o)}`:o>0?""+o:null}},61399:(e,t,i)=>{i.d(t,{mx:()=>a,sF:()=>o});const a=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=(e,t)=>e.callWS({type:"schedule/create",...t})},25705:(e,t,i)=>{i.d(t,{PF:()=>n,CR:()=>o,ls:()=>s});i(98168);var a=i(53935);const o=(e,t)=>e.callWS({type:"timer/create",...t}),s=e=>{if(!e.attributes.remaining)return;let t=function(e){const t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}(e.attributes.remaining);if("active"===e.state){const i=(new Date).getTime(),a=new Date(e.last_changed).getTime();t=Math.max(t-(i-a)/1e3,0)}return t},n=(e,t,i)=>{if(!t)return null;if("idle"===t.state||0===i)return e.formatEntityState(t);let o=(0,a.A)(i||0)||"0";return"paused"===t.state&&(o=`${o} (${e.formatEntityState(t)})`),o}},50006:(e,t,i)=>{i.d(t,{g:()=>s});i(21950),i(55888),i(8339);var a=i(33167);const o=()=>Promise.all([i.e(7311),i.e(2197),i.e(6442),i.e(8848),i.e(7046),i.e(3421),i.e(5674)]).then(i.bind(i,75674)),s=(e,t,i)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:o,dialogParams:{...t,flowConfig:i,dialogParentElement:e}})}},22882:(e,t,i)=>{i.r(t),i.d(t,{DialogHelperDetail:()=>k});var a=i(62659),o=(i(21950),i(71936),i(14460),i(55888),i(8339),i(58068),i(87777),i(5546)),s=i(196),n=i(56805),l=i(32872),r=i(90662);i(73279);var d=i(88762),c=(i(9484),i(49371));var h=i(31238),m=i(61399),u=i(25705),p=i(63283),_=i(43799),g=i(47424),f=i(23135);const y={input_boolean:{create:(e,t)=>e.callWS({type:"input_boolean/create",...t}),import:()=>i.e(3266).then(i.bind(i,53266))},input_button:{create:(e,t)=>e.callWS({type:"input_button/create",...t}),import:()=>i.e(9946).then(i.bind(i,99946))},input_text:{create:(e,t)=>e.callWS({type:"input_text/create",...t}),import:()=>Promise.all([i.e(8640),i.e(8431)]).then(i.bind(i,38431))},input_number:{create:(e,t)=>e.callWS({type:"input_number/create",...t}),import:()=>Promise.all([i.e(8640),i.e(6805)]).then(i.bind(i,6805))},input_datetime:{create:(e,t)=>e.callWS({type:"input_datetime/create",...t}),import:()=>Promise.all([i.e(8640),i.e(4293)]).then(i.bind(i,74293))},input_select:{create:(e,t)=>e.callWS({type:"input_select/create",...t}),import:()=>i.e(1186).then(i.bind(i,1186))},counter:{create:(e,t)=>e.callWS({type:"counter/create",...t}),import:()=>i.e(3971).then(i.bind(i,3971))},timer:{create:u.CR,import:()=>Promise.all([i.e(9774),i.e(1240)]).then(i.bind(i,71240))},schedule:{create:m.sF,import:()=>Promise.all([i.e(5064),i.e(3838),i.e(4114)]).then(i.bind(i,44114))}};let k=(0,a.A)([(0,s.EM)("dialog-helper-detail")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_item",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_opened",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_domain",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_submitting",value:()=>!1},{kind:"field",decorators:[(0,s.P)(".form")],key:"_form",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_helperFlows",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_loading",value:()=>!1},{kind:"field",key:"_params",value:void 0},{kind:"method",key:"showDialog",value:async function(e){this._params=e,this._domain=e.domain,this._item=void 0,this._domain&&this._domain in y&&await y[this._domain].import(),this._opened=!0,await this.updateComplete,this.hass.loadFragmentTranslation("config"),Promise.all([(0,c.yu)(this.hass,["helper"]),this.hass.loadBackendTranslation("title",void 0,!0)]).then((([e])=>{this._helperFlows=e}))}},{kind:"method",key:"closeDialog",value:function(){this._opened=!1,this._error=void 0,this._domain=void 0,this._params=void 0}},{kind:"method",key:"render",value:function(){if(!this._opened)return o.s6;let e;var t;if(this._domain)e=o.qy` <div class="form" @value-changed="${this._valueChanged}"> ${this._error?o.qy`<div class="error">${this._error}</div>`:""} ${(0,r._)(`ha-${this._domain}-form`,{hass:this.hass,item:this._item,new:!0})} </div> <mwc-button slot="primaryAction" @click="${this._createItem}" .disabled="${this._submitting}"> ${this.hass.localize("ui.panel.config.helpers.dialog.create")} </mwc-button> ${null!==(t=this._params)&&void 0!==t&&t.domain?o.s6:o.qy`<mwc-button slot="secondaryAction" @click="${this._goBack}" .disabled="${this._submitting}"> ${this.hass.localize("ui.common.back")} </mwc-button>`} `;else if(this._loading||void 0===this._helperFlows)e=o.qy`<ha-circular-progress indeterminate></ha-circular-progress>`;else{const t=[];for(const e of Object.keys(y))t.push([e,this.hass.localize(`ui.panel.config.helpers.types.${e}`)||e]);for(const e of this._helperFlows)t.push([e,(0,h.p$)(this.hass.localize,e)]);t.sort(((e,t)=>e[1].localeCompare(t[1]))),e=o.qy` <mwc-list innerRole="listbox" itemRoles="option" innerAriaLabel="${this.hass.localize("ui.panel.config.helpers.dialog.create_helper")}" rootTabbable dialogInitialFocus> ${t.map((([e,t])=>{var i;const a=!(e in y)||(0,l.x)(this.hass,e);return o.qy` <ha-list-item .disabled="${!a}" hasmeta .domain="${e}" @request-selected="${this._domainPicked}" graphic="icon"> <img slot="graphic" loading="lazy" alt="" src="${(0,g.MR)({domain:e,type:"icon",useFallback:!0,darkOptimized:null===(i=this.hass.themes)||void 0===i?void 0:i.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer"> <span class="item-text"> ${t} </span> <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> ${a?"":o.qy` <simple-tooltip animation-delay="0">${this.hass.localize("ui.dialogs.helper_settings.platform_not_loaded",{platform:e})}</simple-tooltip> `} `}))} </mwc-list> `}return o.qy` <ha-dialog open @closed="${this.closeDialog}" class="${(0,n.H)({"button-left":!this._domain})}" scrimClickAction escapeKeyAction .hideActions="${!this._domain}" .heading="${(0,d.l)(this.hass,this._domain?this.hass.localize("ui.panel.config.helpers.dialog.create_platform",{platform:(0,f.z)(this._domain)&&this.hass.localize(`ui.panel.config.helpers.types.${this._domain}`)||this._domain}):this.hass.localize("ui.panel.config.helpers.dialog.create_helper"))}"> ${e} </ha-dialog> `}},{kind:"method",key:"_valueChanged",value:function(e){this._item=e.detail.value}},{kind:"method",key:"_createItem",value:async function(){if(this._domain&&this._item){this._submitting=!0,this._error="";try{var e;const t=await y[this._domain].create(this.hass,this._item);null!==(e=this._params)&&void 0!==e&&e.dialogClosedCallback&&t.id&&this._params.dialogClosedCallback({flowFinished:!0,entityId:`${this._domain}.${t.id}`}),this.closeDialog()}catch(e){this._error=e.message||"Unknown error"}finally{this._submitting=!1}}}},{kind:"method",key:"_domainPicked",value:async function(e){if(!(e=>!(!e.detail.selected||"property"!==e.detail.source||(e.currentTarget.selected=!1,0)))(e))return;const t=e.currentTarget.domain;if(t in y){this._loading=!0;try{await y[t].import(),this._domain=t}finally{this._loading=!1}this._focusForm()}else(0,p.W)(this,{startFlowHandler:t,dialogClosedCallback:this._params.dialogClosedCallback}),this.closeDialog()}},{kind:"method",key:"_focusForm",value:async function(){var e;await this.updateComplete,(null===(e=this._form)||void 0===e?void 0:e.lastElementChild).focus()}},{kind:"method",key:"_goBack",value:function(){this._domain=void 0,this._item=void 0,this._error=void 0}},{kind:"get",static:!0,key:"styles",value:function(){return[_.nA,o.AH`ha-dialog.button-left{--justify-action-buttons:flex-start}ha-dialog{--dialog-content-padding:0;--dialog-scroll-divider-color:transparent;--mdc-dialog-max-height:60vh}@media all and (min-width:550px){ha-dialog{--mdc-dialog-min-width:500px}}ha-icon-next{width:24px}.form{padding:24px}`]}}]}}),o.WF)},47424:(e,t,i)=>{i.d(t,{MR:()=>a,a_:()=>o,bg:()=>s});const a=e=>`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,o=e=>e.split("/")[4],s=e=>e.startsWith("https://brands.home-assistant.io/")}};
//# sourceMappingURL=7829.J6wXHoJhEpY.js.map