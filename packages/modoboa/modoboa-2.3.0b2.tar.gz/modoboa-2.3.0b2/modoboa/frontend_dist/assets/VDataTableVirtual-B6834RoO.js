import{a as de,s as ue,c as ie,d as ce,f as me,u as ve,p as ge,g as he,t as be,i as fe,j as ye,k as pe,l as Te,o as x,q as D,r as I,v as Ve}from"./VDataTable-gjt2Fg5z.js";import{m as xe,u as De,b as Ie}from"./VSelect-B9nLCGKh.js";import{H as we,K as Se,N as o,z as h,y as w,P as Pe,a as t,A as b,Q as m}from"./index-B6sfQZUh.js";import{m as Re,u as ke}from"./filter-CcSZdtpY.js";import{u as Be}from"./tag-wMOM-gqO.js";const Fe=we({...de(),...ue(),...xe(),...Re()},"VDataTableVirtual"),Ae=Se()({name:"VDataTableVirtual",props:Fe(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,S){let{attrs:P,slots:a}=S;const{groupBy:d}=ie(e),{sortBy:u,multiSort:R,mustSort:k}=ce(e),{columns:i,headers:B,filterFunctions:F,sortFunctions:G,sortRawFunctions:H}=me(e,{groupBy:d,showSelect:o(e,"showSelect"),showExpand:o(e,"showExpand")}),{items:E}=ve(e,i),f=o(e,"search"),{filteredItems:N}=ke(e,E,f,{transform:l=>l.columns,customKeyFilter:F}),{toggleSort:z}=ge({sortBy:u,multiSort:R,mustSort:k}),{sortByWithGroups:A,opened:K,extractRows:O,isGroupOpen:U,toggleGroup:_}=he({groupBy:d,sortBy:u}),{sortedItems:j}=be(e,N,A,{transform:l=>l.columns,sortFunctions:G,sortRawFunctions:H}),{flatItems:v}=fe(j,d,K),c=h(()=>O(v.value)),{isSelected:q,select:C,selectAll:Q,toggleSelect:W,someSelected:J,allSelected:L}=ye(e,{allItems:c,currentPage:c}),{isExpanded:M,toggleExpand:X}=pe(e),{containerRef:Y,markerRef:Z,paddingTop:$,paddingBottom:ee,computedItems:ae,handleItemResize:te,handleScroll:le,handleScrollend:re}=De(e,v),oe=h(()=>ae.value.map(l=>l.raw));Te({sortBy:u,page:w(1),itemsPerPage:w(-1),groupBy:d,search:f}),Pe({VDataTableRows:{hideNoData:o(e,"hideNoData"),noDataText:o(e,"noDataText"),loading:o(e,"loading"),loadingText:o(e,"loadingText")}});const n=h(()=>({sortBy:u.value,toggleSort:z,someSelected:J.value,allSelected:L.value,isSelected:q,select:C,selectAll:Q,toggleSelect:W,isExpanded:M,toggleExpand:X,isGroupOpen:U,toggleGroup:_,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:v.value,columns:i.value,headers:B.value}));Be(()=>{const l=x.filterProps(e),se=D.filterProps(e),ne=I.filterProps(e);return t(I,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ne),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,n.value)},wrapper:()=>{var r,y,p;return t("div",{ref:Y,onScrollPassive:le,onScrollend:re,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(r=a.colgroup)==null?void 0:r.call(a,n.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(x,m(l,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&t("tbody",null,[t("tr",{ref:Z,style:{height:b($.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(y=a["body.prepend"])==null?void 0:y.call(a,n.value),t(D,m(P,se,{items:oe.value}),{...a,item:s=>t(Ie,{key:s.internalItem.index,renderless:!0,"onUpdate:height":g=>te(s.internalItem.index,g)},{default:g=>{var V;let{itemRef:T}=g;return((V=a.item)==null?void 0:V.call(a,{...s,itemRef:T}))??t(Ve,m(s.props,{ref:T,key:s.internalItem.index,index:s.internalItem.index}),a)}})}),(p=a["body.append"])==null?void 0:p.call(a,n.value),t("tr",{style:{height:b(ee.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var r;return(r=a.bottom)==null?void 0:r.call(a,n.value)}})})}});export{Ae as V};
