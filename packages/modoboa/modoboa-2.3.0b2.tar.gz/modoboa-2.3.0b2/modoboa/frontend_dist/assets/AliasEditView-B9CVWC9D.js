import{b as S,ah as D,ax as I,q as U,g as G,h as d,d as M,f as i,o as s,c as m,X as _,a,w as e,j as u,t as r,e as k,R as q,Z as z}from"./index-B6sfQZUh.js";import{_ as O,a as X}from"./AliasRecipientForm-DD_hZo7b.js";import{L as Z}from"./LoadingData-XKoiHIys.js";import{w,i as $,V as b}from"./VImg-AVVNtsoJ.js";import{V as A,c as R,a as C,b as H}from"./VExpansionPanels-CVe8KlbO.js";import{a as g,V as p}from"./VRow-DllmF7yv.js";import{V as J}from"./VChip-CRYOXnOA.js";import"./EmailField-Dp8XKnJi.js";import"./VTextField-xrmh1FWy.js";import"./tag-wMOM-gqO.js";import"./VField-Bhyg59H4.js";import"./forwardRefs-DWGaNmQL.js";import"./dimensions-CKYnSDDa.js";import"./VList-BoxPhnZ6.js";import"./ssrBoot-CPdEBhNq.js";import"./createSimpleFunctional-BdzT111U.js";import"./VAvatar-xee8L3pJ.js";import"./VForm-CVtiyeDB.js";import"./VSwitch-Bvl549Dr.js";import"./VSelect-B9nLCGKh.js";import"./dialog-transition-InZxhk0f.js";import"./VMenu-uuonQ6o9.js";import"./VOverlay-GMQTQL34.js";import"./lazy-YEt_kfmk.js";import"./VTextarea-CfzjedqN.js";import"./VContainer-D_MLw6yn.js";/* empty css              */const K={key:1},Q={key:0},W={class:"mr-2"},Y={key:0},ee={class:"mt-4 d-flex justify-end"},ae={__name:"AliasEditForm",setup(B){const{$gettext:n}=S(),y=D(),x=I(),h=U(),L=G(),o=d({pk:h.params.id}),v=d(0),c=d(!1),V=d(!1),F=d(),E=d(),N={generalForm:F,recipientForm:E};async function P(){V.value=!1,v.value=[];for(const[f,l]of Object.entries(N))if(l.value!=null){const{valid:t}=await l.value.vFormRef.validate();t||(V.value=!0,v.value.push(f))}V.value||(c.value=!0,y.updateIdentity("alias",o.value).then(()=>L.push({name:"AliasDetail",params:{id:h.params.id}})).finally(()=>c.value=!1))}return M(()=>{x.getAlias(h.params.id).then(f=>{o.value={...f.data}})}),(f,l)=>!i(x).aliasesLoaded||c.value?(s(),m(Z,{key:0})):(s(),_("div",K,[a(H,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),multiple:V.value},{default:e(()=>[a(A,{eager:"",value:"generalForm"},{default:e(()=>[a(R,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[u(r(i(n)("General")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",Q)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[a(p,{cols:"6"},{default:e(()=>[u(r(i(n)("Address"))+": "+r(o.value.address),1)]),_:1}),a(p,{cols:"6"},{default:e(()=>[k("div",W,r(i(n)("Enabled")),1),o.value.enabled?(s(),m($,{key:0,color:"success"},{default:e(()=>[u("mdi-check-circle-outline")]),_:1})):(s(),m($,{key:1},{default:e(()=>[u("mdi-close-circle-outline")]),_:1}))]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(C,null,{default:e(()=>[a(O,{ref_key:"generalForm",ref:F,modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(A,{eager:"",value:"recipientForm"},{default:e(()=>[a(R,null,{default:e(({expanded:t})=>[a(g,{"no-gutters":""},{default:e(()=>[a(p,{cols:"4"},{default:e(()=>[u(r(i(n)("Recipients")),1)]),_:1}),a(p,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(w,{"leave-absolute":""},{default:e(()=>[t?(s(),_("span",Y)):(s(),m(g,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[(s(!0),_(q,null,z(o.value.recipients,(T,j)=>(s(),m(J,{key:j,size:"small"},{default:e(()=>[u(r(T),1)]),_:2},1024))),128))]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(C,null,{default:e(()=>[a(i(X),{ref_key:"recipientForm",ref:E,modelValue:o.value.recipients,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.recipients=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","multiple"]),k("div",ee,[a(b,{loading:c.value,onClick:l[3]||(l[3]=t=>f.$router.go(-1))},{default:e(()=>[u(r(i(n)("Cancel")),1)]),_:1},8,["loading"]),a(b,{class:"ml-4",color:"primary darken-1",loading:c.value,onClick:P},{default:e(()=>[u(r(i(n)("Save")),1)]),_:1},8,["loading"])])]))}},te={class:"text-h4"},le=k("div",{class:"mt-4"},null,-1),Se={__name:"AliasEditView",setup(B){const{$gettext:n}=S();return(y,x)=>(s(),_("div",null,[k("span",te,r(i(n)("Edit alias")),1),le,a(ae,{alias:y.alias},null,8,["alias"])]))}};export{Se as default};
