import{ae as c,b as k,a2 as j,h as s,r as U,o as T,c as z,w as o,a as t,Q as $,j as g,t as v,f as _,_ as I,X as L}from"./index-B6sfQZUh.js";import{_ as P}from"./MenuItems-DpSUv0fF.js";import{V as q}from"./VDataTable-gjt2Fg5z.js";import{V as B,a as E}from"./VToolbar-i9pq53Nj.js";import{V as w}from"./VMenu-uuonQ6o9.js";import{V as p}from"./VImg-AVVNtsoJ.js";import{V as F}from"./VList-BoxPhnZ6.js";import{V as C}from"./VSpacer-BMAkDs-u.js";import{V as G}from"./VTextField-xrmh1FWy.js";import{c as O}from"./VCard-CKOt35J8.js";import"./tag-wMOM-gqO.js";import"./dimensions-CKYnSDDa.js";import"./VSelect-B9nLCGKh.js";import"./VField-Bhyg59H4.js";import"./forwardRefs-DWGaNmQL.js";import"./dialog-transition-InZxhk0f.js";import"./VOverlay-GMQTQL34.js";import"./lazy-YEt_kfmk.js";import"./VChip-CRYOXnOA.js";import"./VAvatar-xee8L3pJ.js";import"./filter-CcSZdtpY.js";import"./ssrBoot-CPdEBhNq.js";import"./createSimpleFunctional-BdzT111U.js";/* empty css              */const f="migrations",y={getMigrations(r){return c.get(`/${f}/`,{params:r})},getMigration(r,i){return c.get(`/${f}/${r}/`,i)},deleteMigration(r){return c.delete(`/${f}/${r}/`)}},Q={__name:"MigrationsList",setup(r){const{$gettext:i}=k(),V=j(),n=s([]),S=[{title:i("Provider"),value:"provider.name"},{title:i("Old account"),value:"username"},{title:i("New account"),value:"mailbox"},{title:i("Actions"),value:"actions",sortable:!1,align:"right"}],x=s([]),m=s(!1),u=s(""),h=s({}),M=s(0);function A(l){y.deleteMigration(l.id).then(()=>{V.displayNotification({msg:i("Migration deleted")}),n.value=n.value.filter(a=>a.id!==l.id)})}function b(l){m.value=!0;let a={};y.getMigrations(a).then(d=>{n.value=d.data,M.value=n.value.length}).finally(()=>m.value=!1)}function D(){const l=[];return l.push({label:i("Delete"),icon:"mdi-delete-outline",onClick:A(),color:"red"}),l}return b(),(l,a)=>{const d=U("router-link");return T(),z(O,{class:"mt-6"},{default:o(()=>[t(q,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]=e=>x.value=e),options:h.value,"onUpdate:options":a[3]||(a[3]=e=>h.value=e),headers:S,items:n.value,search:u.value,"server-items-length":M.value,loading:m.value,"show-select":""},{top:o(()=>[t(B,{color:"white",flat:""},{default:o(()=>[t(w,{location:"bottom"},{activator:o(({props:e})=>[t(p,$(e,{variant:"flat","append-icon":"mdi-chevron-down",size:"small"}),{default:o(()=>[g(v(_(i)("Actions")),1)]),_:2},1040)]),default:o(()=>[t(F,{density:"compact"})]),_:1}),t(p,{variant:"text",icon:"mdi-reload",onClick:a[0]||(a[0]=e=>b())}),t(C),t(G,{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),"prepend-inner-icon":"mdi-magnify",placeholder:"Search",filled:"",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),"item.mailbox":o(({item:e})=>[t(d,{to:{name:"AccountDetail",params:{id:e.mailbox.user}}},{default:o(()=>[g(v(e.mailbox.full_address),1)]),_:2},1032,["to"])]),"item.actions":o(({item:e})=>[t(w,{"offset-y":""},{activator:o(({props:N})=>[t(p,$({icon:"mdi-dots-horizontal"},N),null,16)]),default:o(()=>[t(_(P),{items:D(),object:e},null,8,["items","object"])]),_:2},1024)]),_:2},1032,["modelValue","options","items","search","server-items-length","loading"])]),_:1})}}},X={__name:"MigrationsView",setup(r){const{$gettext:i}=k();return(V,n)=>(T(),L("div",null,[t(B,{flat:""},{default:o(()=>[t(E,null,{default:o(()=>[g(v(_(i)("Migrations")),1)]),_:1}),t(C)]),_:1}),t(Q)]))}},_t=I(X,[["__scopeId","data-v-5f22702f"]]);export{_t as default};
