import{ae as ze,b as Y,a2 as j,u as ne,z as re,h as _,d as ce,B as De,o as E,c as I,w as u,a as i,j as w,t as h,f as c,i as ie,e as C,aO as he,aP as ae,az as Ve,X as T,Y as x,R as z,Z as Re,k as B,a0 as Be,p as Le,_ as xe}from"./index-B6sfQZUh.js";import{_ as Qe}from"./AccountPasswordSubForm-Ci-suAbr.js";import{V as G,r as J}from"./VForm-CVtiyeDB.js";import{V as Ce,c as Ee,a as Ae,b as He}from"./VExpansionPanels-CVe8KlbO.js";import{V as D}from"./VTextField-xrmh1FWy.js";import{V as Ye}from"./VAutocomplete-D7qVHjLV.js";import{V as O,i as me}from"./VImg-AVVNtsoJ.js";import{V as fe,a as Q,c as H,b as ge}from"./VCard-CKOt35J8.js";import{a as se,V as oe}from"./VRow-DllmF7yv.js";import{V as W}from"./VAlert-ID3jq3-b.js";import{V as Ke}from"./VOtpInput-BARaY157.js";import{r as Me}from"./VDataTable-gjt2Fg5z.js";import{V as We}from"./VSpacer-BMAkDs-u.js";import{V as Pe}from"./VDialog-n5-nWTx5.js";import{V as Se}from"./VTextarea-CfzjedqN.js";import{V as Ne}from"./VCheckbox-CAjAGN0I.js";import{_ as pe}from"./ConfirmDialog-CB9bATIP.js";import{V as qe}from"./VDataTableVirtual-B6834RoO.js";import{V as Ge,a as Je}from"./VToolbar-i9pq53Nj.js";import{V as Xe,a as Ze,b as ee,c as te}from"./VTabs-DD6KX9Qj.js";import"./VSwitch-Bvl549Dr.js";import"./VChip-CRYOXnOA.js";import"./tag-wMOM-gqO.js";import"./VField-Bhyg59H4.js";import"./forwardRefs-DWGaNmQL.js";import"./dimensions-CKYnSDDa.js";import"./VAvatar-xee8L3pJ.js";import"./lazy-YEt_kfmk.js";import"./VSelect-B9nLCGKh.js";import"./VList-BoxPhnZ6.js";import"./ssrBoot-CPdEBhNq.js";import"./createSimpleFunctional-BdzT111U.js";import"./dialog-transition-InZxhk0f.js";import"./VMenu-uuonQ6o9.js";import"./VOverlay-GMQTQL34.js";import"./filter-CcSZdtpY.js";/* empty css              */import"./VWindowItem-d1FqDlD3.js";const je="languages",et={getAll(){return ze.get(`/${je}/`)}},tt={class:"m-label"},at={class:"m-label"},ot={class:"m-label"},nt={class:"text-disabled"},rt={href:"https://explore.transifex.com/tonio/modoboa/",target:"_blank"},lt={href:"https://github.com/modoboa/modoboa/issues/new/choose",target:"_blank"},st={class:"m-label"},it={class:"m-label"},ut={__name:"ProfileForm",setup(d){const{$gettext:r,available:s}=Y(),l=j(),m=ne(),p=re(()=>m.authUser),a=_({}),e=_(),t=_(),o=_([]),n=_(0),v=_(!1),f=_(!1),g=_("");function y(b){a.value={first_name:b.first_name,last_name:b.last_name,language:b.language,phone_number:b.phone_number,secondary_email:b.secondary_email}}async function V(){const{valid:b}=await e.value.validate();b&&(v.value=!0,m.updateAccount(a.value).then(()=>{l.displayNotification({msg:r("Profile updated")}),m.authUser.language in s||(g.value='<a href="google.com">language does not exists</a>')}).finally(()=>v.value=!1))}async function F(){const{valid:b}=await t.value.validate();b&&(f.value=!0,m.updateAccount({password:a.value.password}).then(()=>{l.displayNotification({msg:r("Password updated")})}).finally(()=>f.value=!1))}return ce(()=>{y(p.value),et.getAll().then(b=>{o.value=b.data})}),De(()=>p,b=>{b?y(b):a.value={}}),(b,M)=>(E(),I(He,{modelValue:n.value,"onUpdate:modelValue":M[6]||(M[6]=P=>n.value=P),flat:""},{default:u(()=>[i(Ce,null,{default:u(()=>[i(Ee,null,{default:u(()=>[w(h(c(r)("General settings")),1)]),_:1}),i(Ae,null,{default:u(()=>[i(G,{ref_key:"profileForm",ref:e,onSubmit:ie(V,["prevent"])},{default:u(()=>[C("label",tt,h(c(r)("First name")),1),i(D,{modelValue:a.value.first_name,"onUpdate:modelValue":M[0]||(M[0]=P=>a.value.first_name=P),variant:"outlined",density:"compact"},null,8,["modelValue"]),C("label",at,h(c(r)("Last name")),1),i(D,{modelValue:a.value.last_name,"onUpdate:modelValue":M[1]||(M[1]=P=>a.value.last_name=P),variant:"outlined",density:"compact"},null,8,["modelValue"]),C("label",ot,[w(h(c(r)("Language"))+" ",1),C("p",nt,[w(h(c(r)("Feel free to improve the translations"))+" ",1),C("a",rt,h(c(r)("here")),1),w(" "+h(c(r)("or suggest a new language"))+" ",1),C("a",lt,h(c(r)("there")),1)])]),i(Ye,{modelValue:a.value.language,"onUpdate:modelValue":M[2]||(M[2]=P=>a.value.language=P),items:o.value,"item-title":"label","item-value":"code",variant:"outlined",density:"compact","error-messages":g.value},null,8,["modelValue","items","error-messages"]),C("label",st,h(c(r)("Phone number")),1),i(D,{modelValue:a.value.phone_number,"onUpdate:modelValue":M[3]||(M[3]=P=>a.value.phone_number=P),label:c(r)("Phone number"),variant:"outlined",density:"compact"},null,8,["modelValue","label"]),C("label",it,h(c(r)("Secondary email")),1),i(D,{modelValue:a.value.secondary_email,"onUpdate:modelValue":M[4]||(M[4]=P=>a.value.secondary_email=P),variant:"outlined",density:"compact",rules:[c(J).emailOrNull]},null,8,["modelValue","rules"]),i(O,{color:"success",type:"submit",loading:v.value},{default:u(()=>[w(h(c(r)("Update settings")),1)]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1}),i(Ce,null,{default:u(()=>[i(Ee,null,{default:u(()=>[w(h(c(r)("Password")),1)]),_:1}),i(Ae,null,{default:u(()=>[i(G,{ref_key:"passwordForm",ref:t,onSubmit:ie(F,["prevent"])},{default:u(()=>[i(Qe,{modelValue:a.value,"onUpdate:modelValue":M[5]||(M[5]=P=>a.value=P),"with-password-check":""},null,8,["modelValue"]),i(O,{color:"success",type:"submit",loading:f.value},{default:u(()=>[w(h(c(r)("Update Password")),1)]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};/*!
 * qrcode.vue v3.4.1
 * A Vue.js component to generate QRCode.
 * Â© 2017-2023 @scopewu(https://github.com/scopewu)
 * MIT License.
 */var ue=function(){return ue=Object.assign||function(r){for(var s,l=1,m=arguments.length;l<m;l++){s=arguments[l];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(r[p]=s[p])}return r},ue.apply(this,arguments)};var X;(function(d){var r=function(){function a(e,t,o,n){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<a.MIN_VERSION||e>a.MAX_VERSION)throw new RangeError("Version value out of range");if(n<-1||n>7)throw new RangeError("Mask value out of range");this.size=e*4+17;for(var v=[],f=0;f<this.size;f++)v.push(!1);for(var f=0;f<this.size;f++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();var g=this.addEccAndInterleave(o);if(this.drawCodewords(g),n==-1)for(var y=1e9,f=0;f<8;f++){this.applyMask(f),this.drawFormatBits(f);var V=this.getPenaltyScore();V<y&&(n=f,y=V),this.applyMask(f)}m(0<=n&&n<=7),this.mask=n,this.applyMask(n),this.drawFormatBits(n),this.isFunction=[]}return a.encodeText=function(e,t){var o=d.QrSegment.makeSegments(e);return a.encodeSegments(o,t)},a.encodeBinary=function(e,t){var o=d.QrSegment.makeBytes(e);return a.encodeSegments([o],t)},a.encodeSegments=function(e,t,o,n,v,f){if(o===void 0&&(o=1),n===void 0&&(n=40),v===void 0&&(v=-1),f===void 0&&(f=!0),!(a.MIN_VERSION<=o&&o<=n&&n<=a.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");var g,y;for(g=o;;g++){var V=a.getNumDataCodewords(g,t)*8,F=p.getTotalBits(e,g);if(F<=V){y=F;break}if(g>=n)throw new RangeError("Data too long")}for(var b=0,M=[a.Ecc.MEDIUM,a.Ecc.QUARTILE,a.Ecc.HIGH];b<M.length;b++){var P=M[b];f&&y<=a.getNumDataCodewords(g,P)*8&&(t=P)}for(var A=[],R=0,k=e;R<k.length;R++){var S=k[R];s(S.mode.modeBits,4,A),s(S.numChars,S.mode.numCharCountBits(g),A);for(var L=0,K=S.getData();L<K.length;L++){var $e=K[L];A.push($e)}}m(A.length==y);var ve=a.getNumDataCodewords(g,t)*8;m(A.length<=ve),s(0,Math.min(4,ve-A.length),A),s(0,(8-A.length%8)%8,A),m(A.length%8==0);for(var be=236;A.length<ve;be^=253)s(be,8,A);for(var le=[];le.length*8<A.length;)le.push(0);return A.forEach(function(Oe,we){return le[we>>>3]|=Oe<<7-(we&7)}),new a(g,t,le,v)},a.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},a.prototype.getModules=function(){return this.modules},a.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),o=t.length,e=0;e<o;e++)for(var n=0;n<o;n++)e==0&&n==0||e==0&&n==o-1||e==o-1&&n==0||this.drawAlignmentPattern(t[e],t[n]);this.drawFormatBits(0),this.drawVersion()},a.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,o=t,n=0;n<10;n++)o=o<<1^(o>>>9)*1335;var v=(t<<10|o)^21522;m(v>>>15==0);for(var n=0;n<=5;n++)this.setFunctionModule(8,n,l(v,n));this.setFunctionModule(8,7,l(v,6)),this.setFunctionModule(8,8,l(v,7)),this.setFunctionModule(7,8,l(v,8));for(var n=9;n<15;n++)this.setFunctionModule(14-n,8,l(v,n));for(var n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,l(v,n));for(var n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,l(v,n));this.setFunctionModule(8,this.size-8,!0)},a.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^(e>>>11)*7973;var o=this.version<<12|e;m(o>>>18==0);for(var t=0;t<18;t++){var n=l(o,t),v=this.size-11+t%3,f=Math.floor(t/3);this.setFunctionModule(v,f,n),this.setFunctionModule(f,v,n)}}},a.prototype.drawFinderPattern=function(e,t){for(var o=-4;o<=4;o++)for(var n=-4;n<=4;n++){var v=Math.max(Math.abs(n),Math.abs(o)),f=e+n,g=t+o;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,v!=2&&v!=4)}},a.prototype.drawAlignmentPattern=function(e,t){for(var o=-2;o<=2;o++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+o,Math.max(Math.abs(n),Math.abs(o))!=1)},a.prototype.setFunctionModule=function(e,t,o){this.modules[t][e]=o,this.isFunction[t][e]=!0},a.prototype.addEccAndInterleave=function(e){var t=this.version,o=this.errorCorrectionLevel;if(e.length!=a.getNumDataCodewords(t,o))throw new RangeError("Invalid argument");for(var n=a.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][t],v=a.ECC_CODEWORDS_PER_BLOCK[o.ordinal][t],f=Math.floor(a.getNumRawDataModules(t)/8),g=n-f%n,y=Math.floor(f/n),V=[],F=a.reedSolomonComputeDivisor(v),b=0,M=0;b<n;b++){var P=e.slice(M,M+y-v+(b<g?0:1));M+=P.length;var A=a.reedSolomonComputeRemainder(P,F);b<g&&P.push(0),V.push(P.concat(A))}for(var R=[],k=function(S){V.forEach(function(L,K){(S!=y-v||K>=g)&&R.push(L[S])})},b=0;b<V[0].length;b++)k(b);return m(R.length==f),R},a.prototype.drawCodewords=function(e){if(e.length!=Math.floor(a.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,o=this.size-1;o>=1;o-=2){o==6&&(o=5);for(var n=0;n<this.size;n++)for(var v=0;v<2;v++){var f=o-v,g=(o+1&2)==0,y=g?this.size-1-n:n;!this.isFunction[y][f]&&t<e.length*8&&(this.modules[y][f]=l(e[t>>>3],7-(t&7)),t++)}}m(t==e.length*8)},a.prototype.applyMask=function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var o=0;o<this.size;o++){var n=void 0;switch(e){case 0:n=(o+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=o%3==0;break;case 3:n=(o+t)%3==0;break;case 4:n=(Math.floor(o/3)+Math.floor(t/2))%2==0;break;case 5:n=o*t%2+o*t%3==0;break;case 6:n=(o*t%2+o*t%3)%2==0;break;case 7:n=((o+t)%2+o*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][o]&&n&&(this.modules[t][o]=!this.modules[t][o])}},a.prototype.getPenaltyScore=function(){for(var e=0,t=0;t<this.size;t++){for(var o=!1,n=0,v=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[t][f]==o?(n++,n==5?e+=a.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,v),o||(e+=this.finderPenaltyCountPatterns(v)*a.PENALTY_N3),o=this.modules[t][f],n=1);e+=this.finderPenaltyTerminateAndCount(o,n,v)*a.PENALTY_N3}for(var f=0;f<this.size;f++){for(var o=!1,g=0,v=[0,0,0,0,0,0,0],t=0;t<this.size;t++)this.modules[t][f]==o?(g++,g==5?e+=a.PENALTY_N1:g>5&&e++):(this.finderPenaltyAddHistory(g,v),o||(e+=this.finderPenaltyCountPatterns(v)*a.PENALTY_N3),o=this.modules[t][f],g=1);e+=this.finderPenaltyTerminateAndCount(o,g,v)*a.PENALTY_N3}for(var t=0;t<this.size-1;t++)for(var f=0;f<this.size-1;f++){var y=this.modules[t][f];y==this.modules[t][f+1]&&y==this.modules[t+1][f]&&y==this.modules[t+1][f+1]&&(e+=a.PENALTY_N2)}for(var V=0,F=0,b=this.modules;F<b.length;F++){var M=b[F];V=M.reduce(function(R,k){return R+(k?1:0)},V)}var P=this.size*this.size,A=Math.ceil(Math.abs(V*20-P*10)/P)-1;return m(0<=A&&A<=9),e+=A*a.PENALTY_N4,m(0<=e&&e<=2568888),e},a.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,o=[6],n=this.size-7;o.length<e;n-=t)o.splice(1,0,n);return o},a.getNumRawDataModules=function(e){if(e<a.MIN_VERSION||e>a.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*e+128)*e+64;if(e>=2){var o=Math.floor(e/7)+2;t-=(25*o-10)*o-55,e>=7&&(t-=36)}return m(208<=t&&t<=29648),t},a.getNumDataCodewords=function(e,t){return Math.floor(a.getNumRawDataModules(e)/8)-a.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*a.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]},a.reedSolomonComputeDivisor=function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var t=[],o=0;o<e-1;o++)t.push(0);t.push(1);for(var n=1,o=0;o<e;o++){for(var v=0;v<t.length;v++)t[v]=a.reedSolomonMultiply(t[v],n),v+1<t.length&&(t[v]^=t[v+1]);n=a.reedSolomonMultiply(n,2)}return t},a.reedSolomonComputeRemainder=function(e,t){for(var o=t.map(function(y){return 0}),n=function(y){var V=y^o.shift();o.push(0),t.forEach(function(F,b){return o[b]^=a.reedSolomonMultiply(F,V)})},v=0,f=e;v<f.length;v++){var g=f[v];n(g)}return o},a.reedSolomonMultiply=function(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");for(var o=0,n=7;n>=0;n--)o=o<<1^(o>>>7)*285,o^=(t>>>n&1)*e;return m(o>>>8==0),o},a.prototype.finderPenaltyCountPatterns=function(e){var t=e[1];m(t<=this.size*3);var o=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(o&&e[0]>=t*4&&e[6]>=t?1:0)+(o&&e[6]>=t*4&&e[0]>=t?1:0)},a.prototype.finderPenaltyTerminateAndCount=function(e,t,o){return e&&(this.finderPenaltyAddHistory(t,o),t=0),t+=this.size,this.finderPenaltyAddHistory(t,o),this.finderPenaltyCountPatterns(o)},a.prototype.finderPenaltyAddHistory=function(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)},a.MIN_VERSION=1,a.MAX_VERSION=40,a.PENALTY_N1=3,a.PENALTY_N2=3,a.PENALTY_N3=40,a.PENALTY_N4=10,a.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],a.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],a}();d.QrCode=r;function s(a,e,t){if(e<0||e>31||a>>>e)throw new RangeError("Value out of range");for(var o=e-1;o>=0;o--)t.push(a>>>o&1)}function l(a,e){return(a>>>e&1)!=0}function m(a){if(!a)throw new Error("Assertion error")}var p=function(){function a(e,t,o){if(this.mode=e,this.numChars=t,this.bitData=o,t<0)throw new RangeError("Invalid argument");this.bitData=o.slice()}return a.makeBytes=function(e){for(var t=[],o=0,n=e;o<n.length;o++){var v=n[o];s(v,8,t)}return new a(a.Mode.BYTE,e.length,t)},a.makeNumeric=function(e){if(!a.isNumeric(e))throw new RangeError("String contains non-numeric characters");for(var t=[],o=0;o<e.length;){var n=Math.min(e.length-o,3);s(parseInt(e.substring(o,o+n),10),n*3+1,t),o+=n}return new a(a.Mode.NUMERIC,e.length,t)},a.makeAlphanumeric=function(e){if(!a.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],o;for(o=0;o+2<=e.length;o+=2){var n=a.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o))*45;n+=a.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o+1)),s(n,11,t)}return o<e.length&&s(a.ALPHANUMERIC_CHARSET.indexOf(e.charAt(o)),6,t),new a(a.Mode.ALPHANUMERIC,e.length,t)},a.makeSegments=function(e){return e==""?[]:a.isNumeric(e)?[a.makeNumeric(e)]:a.isAlphanumeric(e)?[a.makeAlphanumeric(e)]:[a.makeBytes(a.toUtf8ByteArray(e))]},a.makeEci=function(e){var t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)s(e,8,t);else if(e<16384)s(2,2,t),s(e,14,t);else if(e<1e6)s(6,3,t),s(e,21,t);else throw new RangeError("ECI assignment value out of range");return new a(a.Mode.ECI,0,t)},a.isNumeric=function(e){return a.NUMERIC_REGEX.test(e)},a.isAlphanumeric=function(e){return a.ALPHANUMERIC_REGEX.test(e)},a.prototype.getData=function(){return this.bitData.slice()},a.getTotalBits=function(e,t){for(var o=0,n=0,v=e;n<v.length;n++){var f=v[n],g=f.mode.numCharCountBits(t);if(f.numChars>=1<<g)return 1/0;o+=4+g+f.bitData.length}return o},a.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],o=0;o<e.length;o++)e.charAt(o)!="%"?t.push(e.charCodeAt(o)):(t.push(parseInt(e.substring(o+1,o+3),16)),o+=2);return t},a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",a}();d.QrSegment=p})(X||(X={}));(function(d){(function(r){var s=function(){function l(m,p){this.ordinal=m,this.formatBits=p}return l.LOW=new l(0,1),l.MEDIUM=new l(1,0),l.QUARTILE=new l(2,3),l.HIGH=new l(3,2),l}();r.Ecc=s})(d.QrCode||(d.QrCode={}))})(X||(X={}));(function(d){(function(r){var s=function(){function l(m,p){this.modeBits=m,this.numBitsCharCount=p}return l.prototype.numCharCountBits=function(m){return this.numBitsCharCount[Math.floor((m+7)/17)]},l.NUMERIC=new l(1,[10,12,14]),l.ALPHANUMERIC=new l(2,[9,11,13]),l.BYTE=new l(4,[8,16,16]),l.KANJI=new l(8,[8,10,12]),l.ECI=new l(7,[0,0,0]),l}();r.Mode=s})(d.QrSegment||(d.QrSegment={}))})(X||(X={}));var Z=X,Fe="H",_e={L:Z.QrCode.Ecc.LOW,M:Z.QrCode.Ecc.MEDIUM,Q:Z.QrCode.Ecc.QUARTILE,H:Z.QrCode.Ecc.HIGH},dt=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Te(d){return d in _e}function Ie(d,r){r===void 0&&(r=0);var s=[];return d.forEach(function(l,m){var p=null;l.forEach(function(a,e){if(!a&&p!==null){s.push("M".concat(p+r," ").concat(m+r,"h").concat(e-p,"v1H").concat(p+r,"z")),p=null;return}if(e===l.length-1){if(!a)return;p===null?s.push("M".concat(e+r,",").concat(m+r," h1v1H").concat(e+r,"z")):s.push("M".concat(p+r,",").concat(m+r," h").concat(e+1-p,"v1H").concat(p+r,"z"));return}a&&p===null&&(p=e)})}),s.join("")}var ye={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:Fe,validator:function(d){return Te(d)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0}},ct=ue(ue({},ye),{renderAs:{type:String,required:!1,default:"canvas",validator:function(d){return["canvas","svg"].indexOf(d)>-1}}}),ft=he({name:"QRCodeSvg",props:ye,setup:function(d){var r=_(0),s=_(""),l=function(){var m=d.value,p=d.level,a=d.margin,e=Z.QrCode.encodeText(m,_e[p]).getModules();r.value=e.length+a*2,s.value=Ie(e,a)};return l(),Ve(l),function(){return ae("svg",{width:d.size,height:d.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(r.value," ").concat(r.value)},[ae("path",{fill:d.background,d:"M0,0 h".concat(r.value,"v").concat(r.value,"H0z")}),ae("path",{fill:d.foreground,d:s.value})])}}}),vt=he({name:"QRCodeCanvas",props:ye,setup:function(d){var r=_(null),s=function(){var l=d.value,m=d.level,p=d.size,a=d.margin,e=d.background,t=d.foreground,o=r.value;if(o){var n=o.getContext("2d");if(n){var v=Z.QrCode.encodeText(l,_e[m]).getModules(),f=v.length+a*2,g=window.devicePixelRatio||1,y=p/f*g;o.height=o.width=p*g,n.scale(y,y),n.fillStyle=e,n.fillRect(0,0,f,f),n.fillStyle=t,dt?n.fill(new Path2D(Ie(v,a))):v.forEach(function(V,F){V.forEach(function(b,M){b&&n.fillRect(M+a,F+a,1,1)})})}}};return ce(s),Ve(s),function(){return ae("canvas",{ref:r,style:{width:"".concat(d.size,"px"),height:"".concat(d.size,"px")}})}}}),mt=he({name:"Qrcode",render:function(){var d=this.$props,r=d.renderAs,s=d.value,l=d.size,m=d.margin,p=d.level,a=d.background,e=d.foreground,t=l>>>0,o=m>>>0,n=Te(p)?p:Fe;return ae(r==="svg"?ft:vt,{value:s,size:t,margin:o,level:n,background:a,foreground:e})},props:ct});const pt={class:"text-h6"},ht={class:"m-label"},gt={class:"mt-4"},_t={class:"m-label"},yt={class:"mt-5"},bt={tag:"p",class:"my-4"},wt={__name:"TotpAuthForm",setup(d){const{$gettext:r}=Y(),s=j(),l=ne(),m=_(),p=_(""),a=_([]),e=_(null),t=_(null),o=_(!1),n=_(!1),v=_(""),f=_([]),g=_([]),y=_(!1),V=re(()=>l.authUser.totp_enabled);function F(){B.getKeyForTFASetup().then(R=>{e.value=R.data.key,t.value=R.data.url})}function b(){navigator.clipboard.writeText(e.value),o.value=!0}function M(){B.startTFASetup().then(()=>{F()})}function P(){l.finalizeTFASetup(p.value).then(R=>{e.value=null,t.value=null,R.status===200&&(g.value=R.data.tokens),y.value=!0}).catch(R=>{R.response.status===400&&(a.value=R.response.data.pin_code)})}async function A(){if(!await m.value.validate())return;const k={password:v.value};n.value=!0,B.disableTFA(k).then(()=>{l.fetchUser()}).catch(S=>{S.response.status===400?f.value=S.response.data.password:s.displayNotification({msg:r(S.response.data),type:"error"})}).finally(()=>{n.value=!1,m.value.reset()})}return(R,k)=>(E(),T("div",null,[i(H,{flat:""},{default:u(()=>[i(fe,null,{default:u(()=>[C("span",pt,h(c(r)("One-time passwords")),1)]),_:1}),i(Q,null,{default:u(()=>[t.value?(E(),I(se,{key:0},{default:u(()=>[i(oe,{cols:"4"},{default:u(()=>[i(se,{rows:"2"},{default:u(()=>[i(mt,{value:t.value,size:250,"render-as":"svg",level:"H",class:"qrcode"},null,8,["value"])]),_:1}),i(se,null,{default:u(()=>[i(O,{color:"primary",class:"key",onClick:b},{default:u(()=>[w(h(c(r)("Click here to copy the key"))+" ",1),o.value?(E(),I(me,{key:0,color:"success"},{default:u(()=>[w(" mdi-check-all ")]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1}),i(oe,{cols:"6"},{default:u(()=>[i(W,{type:"info",class:"ma-4"},{default:u(()=>[w(h(c(r)("Install a soft token authenticator like FreeOTP or Google Authenticator from your application repository and use that app to scan this QR code.")),1)]),_:1}),C("label",ht,h(c(r)("Pin code")),1),i(Ke,{modelValue:p.value,"onUpdate:modelValue":k[0]||(k[0]=S=>p.value=S),error:a.value.length!==0},null,8,["modelValue","error"]),i(O,{color:"primary",onClick:P},{default:u(()=>[w(h(c(r)("Register")),1)]),_:1})]),_:1})]),_:1})):y.value?(E(),T(z,{key:1},[i(W,{type:"success"},{default:u(()=>[w(h(c(r)("Congratulations! Two-factor authentication using one-time passwords is now enabled for your account.")),1)]),_:1}),g.value.length?(E(),T(z,{key:0},[C("p",gt,h(c(r)("The following recovery codes can be used one time each to let you regain access to your account, in case you lose your phone for example. Make sure to save them in a safe place, otherwise you won't be able to access your account anymore.")),1),i(Me,{density:"compact"},{default:u(()=>[C("tbody",null,[(E(!0),T(z,null,Re(g.value,S=>(E(),T("tr",{key:S},[C("td",null,h(S),1)]))),128))])]),_:1})],64)):x("",!0)],64)):V.value?(E(),T(z,{key:2},[i(W,{type:"info",class:"mb-2"},{default:u(()=>[w(h(c(r)("Two-factor authentication using one-time passwords is enabled for your account.")),1)]),_:1}),i(G,{ref_key:"editTFAForm",ref:m},{default:u(()=>[C("label",_t,h(c(r)("Password")),1),i(D,{modelValue:v.value,"onUpdate:modelValue":k[1]||(k[1]=S=>v.value=S),autocomplete:"new-password",type:"password",variant:"outlined",density:"compact",rules:[c(J).required],"error-messages":f.value},null,8,["modelValue","rules","error-messages"]),C("div",yt,[i(O,{color:"error",class:"mr-2",loading:n.value,onClick:A},{default:u(()=>[w(h(c(r)("Disable 2FA")),1)]),_:1},8,["loading"])])]),_:1},512)],64)):(E(),T(z,{key:3},[C("div",bt,h(c(r)("Two-factor authentication (2FA) using one-time passwords is not yet activated for your account.")),1),i(O,{color:"success",onClick:M},{default:u(()=>[w(h(c(r)("Register authenticator")),1)]),_:1})],64))]),_:1})]),_:1})]))}},Ct={class:"headline"},Ue={__name:"RecoveryCodesResetDialog",props:{tokens:{type:Array,default:null}},emits:["close"],setup(d,{emit:r}){const{$gettext:s}=Y(),l=r;function m(){l("close")}return(p,a)=>(E(),I(H,null,{default:u(()=>[i(fe,null,{default:u(()=>[C("span",Ct,h(c(s)("New recovery codes")),1)]),_:1}),i(Q,null,{default:u(()=>[i(W,{type:"info"},{default:u(()=>[w(h(c(s)("The following recovery codes can be used one time each to let you regain access to your account, in case you lose your phone for example. Make sure to save them in a safe place, otherwise you won't be able to access your account anymore.")),1)]),_:1}),i(Me,{class:"mt-4",density:"compact"},{default:u(()=>[C("tbody",null,[(E(!0),T(z,null,Re(d.tokens,e=>(E(),T("tr",{key:e},[C("td",null,h(e),1)]))),128))])]),_:1})]),_:1}),i(ge,null,{default:u(()=>[i(We),i(O,{color:"grey darken-1",text:"",onClick:m},{default:u(()=>[w(h(c(s)("Close")),1)]),_:1})]),_:1})]),_:1}))}},Et={class:"text-h6"},At={class:"m-label"},kt={class:"mt-5"},Vt={key:1,tag:"p",class:"my-4"},Rt={__name:"BackupCodeAuthForm",setup(d){const{$gettext:r}=Y(),s=j(),l=ne(),m=re(()=>l.authUser.tfa_enabled),p=_(!1),a=_(),e=_(""),t=_([]),o=_(),n=_(!1);async function v(){if(!await a.value.validate())return;const y={password:e.value};p.value=!0,B.resetRecoveryCodes(y).then(V=>{t.value=V.data.tokens,n.value=!0}).catch(V=>{V.response.status===400?o.value=V.response.data.password:s.displayNotification({msg:r(V.response.data),type:"error"})}).finally(()=>{p.value=!1,a.value.reset()})}function f(){t.value=[],n.value=!1}return(g,y)=>(E(),T("div",null,[i(H,{flat:""},{default:u(()=>[i(fe,null,{default:u(()=>[C("span",Et,h(c(r)("Backup codes")),1)]),_:1}),i(Q,null,{default:u(()=>[m.value?(E(),T(z,{key:0},[i(W,{type:"info",class:"mb-2"},{default:u(()=>[w(h(c(r)("You already have generated backup codes for this account. If you don't remember them or have used them all, you can generate new ones.")),1)]),_:1}),i(G,{ref_key:"editTFAForm",ref:a},{default:u(()=>[C("label",At,h(c(r)("Password")),1),i(D,{modelValue:e.value,"onUpdate:modelValue":y[0]||(y[0]=V=>e.value=V),autocomplete:"new-password",type:"password",variant:"outlined",density:"compact",rules:[c(J).required],"error-messages":o.value},null,8,["modelValue","rules","error-messages"]),C("div",kt,[i(O,{loading:p.value,color:"success",onClick:v},{default:u(()=>[w(h(c(r)("Reset recovery codes")),1)]),_:1},8,["loading"])])]),_:1},512)],64)):(E(),T("div",Vt,h(c(r)("No two-factor authentificator is yet set for your account.")),1)),i(Pe,{modelValue:n.value,"onUpdate:modelValue":y[1]||(y[1]=V=>n.value=V),"max-width":"800px",persistent:""},{default:u(()=>[i(c(Ue),{tokens:t.value,onClose:f},null,8,["tokens"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}},Mt={class:"m-label"},Pt={__name:"ForwardForm",setup(d){const{$gettext:r}=Y(),s=j(),l=_({}),m=_(!1);function p(){m.value=!0,B.setForward(l.value).then(()=>{m.value=!1,s.displayNotification({type:"success",msg:r("Forward updated")})})}return B.getForward().then(a=>{l.value=a.data}),(a,e)=>(E(),I(H,{flat:""},{default:u(()=>[i(Q,null,{default:u(()=>[C("label",Mt,h(c(r)("Recipient(s)")),1),i(Se,{modelValue:l.value.recipients,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.recipients=t),hint:c(r)("Indicate one or more recipients separated by a comma (,)"),"persistent-hint":"",rows:"3",variant:"outlined"},null,8,["modelValue","hint"]),i(Ne,{modelValue:l.value.keepcopies,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.keepcopies=t),label:c(r)("Keep local copies"),hint:c(r)("Forward messages and store copies into your local mailbox"),"persistent-hint":""},null,8,["modelValue","label","hint"])]),_:1}),i(ge,{class:"pa-4"},{default:u(()=>[i(O,{color:"success",variant:"flat",loading:m.value,onClick:p},{default:u(()=>[w(h(c(r)("Update")),1)]),_:1},8,["loading"])]),_:1})]),_:1}))}},St={class:"m-label"},Nt={class:"mb-4"},Ft={class:"m-label"},Tt={class:"mb-4"},It={class:"m-label"},Ut={class:"mb-4"},$t={class:"m-label"},Ot={__name:"AutoReplyForm",setup(d){const r=j(),{$gettext:s}=Y(),l=_({}),m=_(),p=_(!1);async function a(){const{valid:e}=await m.value.validate();e&&(p.value=!0,B.setARMessage(l.value).then(()=>{r.displayNotification({msg:s("Auto-reply message updated")}),p.value=!1}).catch(()=>{p.value=!1}))}return B.getARMessage().then(e=>{l.value=e.data,l.value.fromdate&&(l.value.fromdate=l.value.fromdate.slice(0,-4)),l.value.untildate&&(l.value.untildate=l.value.untildate.slice(0,-4))}),(e,t)=>(E(),I(H,{flat:""},{default:u(()=>[i(Q,null,{default:u(()=>[i(G,{ref_key:"formRef",ref:m,onSubmit:ie(a,["prevent"])},{default:u(()=>[i(Ne,{modelValue:l.value.enabled,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.enabled=o),label:c(s)("Enabled"),color:"primary","hide-details":"",class:"mb-4"},null,8,["modelValue","label"]),C("label",St,h(c(s)("Subject")),1),i(D,{modelValue:l.value.subject,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.subject=o),variant:"outlined",density:"compact",rules:[c(J).required]},null,8,["modelValue","rules"]),C("div",Nt,[C("label",Ft,h(c(s)("Content")),1),i(Se,{modelValue:l.value.content,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.content=o),hint:c(s)("The content of your answer. You can use the following variables, which will be automatically replaced by the appropriate value: %(name)s, %(fromdate)s, %(untildate)s"),"persistent-hint":"",variant:"outlined",rows:"3",density:"compact",rules:[c(J).required]},null,8,["modelValue","hint","rules"])]),C("div",Tt,[C("label",It,h(c(s)("From")),1),i(D,{modelValue:l.value.fromdate,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.fromdate=o),hint:c(s)("Activate your auto reply from this date"),variant:"outlined","persistent-hint":"",type:"datetime-local",density:"compact"},null,8,["modelValue","hint"])]),C("div",Ut,[C("label",$t,h(c(s)("Until")),1),i(D,{modelValue:l.value.untildate,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.untildate=o),hint:c(s)("Activate your auto reply until this date"),variant:"outlined","persistent-hint":"",type:"datetime-local",density:"compact"},null,8,["modelValue","hint"])]),i(O,{color:"success",type:"submit",loading:p.value},{default:u(()=>[w(h(c(s)("Update auto-reply")),1)]),_:1},8,["loading"])]),_:1},512)]),_:1})]),_:1}))}},zt={class:"m-label"},Dt={class:"ml-5 mr-5"},Bt=["href"],Lt={__name:"APISetupForm",setup(d){const{$gettext:r}=Y(),s=j(),l=Be("$config"),m=re(()=>l.API_DOC_URL),p=_(!1),a=_(null),e=_();function t(){navigator.clipboard.writeText(a.value),s.displayNotification({msg:r("API token copied to your clipboard"),type:"success"})}function o(){p.value=!0,B.createAPIToken().then(f=>{a.value=f.data.token,s.displayNotification({msg:r("API token created"),type:"success"})}).finally(()=>p.value=!1)}function n(){e.value.open(r("Warning"),r("You are about to delete your API access token"),{color:"error",cancelLabel:r("Cancel"),agreeLabel:r("Proceed")})}async function v(){await B.deleteAPIToken(),s.displayNotification({msg:r("API token deleted"),type:"success"}),a.value=null}return ce(()=>{B.getAPIToken().then(f=>{a.value=f.data.token})}),(f,g)=>(E(),T(z,null,[a.value?(E(),I(H,{key:1,flat:""},{default:u(()=>[i(Q,null,{default:u(()=>[C("label",zt,h(c(r)("Your API token is:")),1),C("code",Dt,h(a.value),1),i(O,{icon:"mdi-clipboard-plus",density:"compact",title:c(r)("Copy token to clipboard"),variant:"text",onClick:g[0]||(g[0]=y=>t())},null,8,["title"]),i(O,{icon:"mdi-delete",density:"compact",color:"error",variant:"text",title:c(r)("Delete token"),onClick:n},null,8,["title"])]),_:1})]),_:1})):(E(),I(H,{key:0,flat:""},{default:u(()=>[i(Q,null,{default:u(()=>[w(h(c(r)("Your API token has not been generated yet.")),1)]),_:1}),i(ge,null,{default:u(()=>[i(O,{color:"success",variant:"flat",loading:p.value,onClick:o},{default:u(()=>[w(h(c(r)("Generate")),1)]),_:1},8,["loading"])]),_:1})]),_:1})),i(W,{type:"info",variant:"tonal",border:"start",class:"mt-4"},{default:u(()=>[w(h(c(r)("A documentation of the API is available"))+" ",1),C("a",{href:m.value,target:"_blank"},h(c(r)("here")),9,Bt),w(". ")]),_:1}),i(pe,{ref_key:"confirm",ref:e,onAgree:v},null,512)],64))}};function xt(d){const r="==".slice(0,(4-d.length%4)%4),s=d.replace(/-/g,"+").replace(/_/g,"/")+r,l=atob(s),m=new ArrayBuffer(l.length),p=new Uint8Array(m);for(let a=0;a<l.length;a++)p[a]=l.charCodeAt(a);return m}function Qt(d){const r=new Uint8Array(d);let s="";for(const p of r)s+=String.fromCharCode(p);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var N="copy",q="convert";function de(d,r,s){if(r===N)return s;if(r===q)return d(s);if(r instanceof Array)return s.map(l=>de(d,r[0],l));if(r instanceof Object){const l={};for(const[m,p]of Object.entries(r)){if(p.derive){const a=p.derive(s);a!==void 0&&(s[m]=a)}if(!(m in s)){if(p.required)throw new Error(`Missing key: ${m}`);continue}if(s[m]==null){l[m]=null;continue}l[m]=de(d,p.schema,s[m])}return l}}function ke(d,r){return{required:!0,schema:d,derive:r}}function U(d){return{required:!0,schema:d}}function $(d){return{required:!1,schema:d}}var Ht={type:U(N),id:U(q),transports:$(N)},Yt={appid:$(N),appidExclude:$(N),credProps:$(N)},Kt={appid:$(N),appidExclude:$(N),credProps:$(N)},Wt={publicKey:U({rp:U(N),user:U({id:U(q),name:U(N),displayName:U(N)}),challenge:U(q),pubKeyCredParams:U(N),timeout:$(N),excludeCredentials:$([Ht]),authenticatorSelection:$(N),attestation:$(N),extensions:$(Yt)}),signal:$(N)},qt={type:U(N),id:U(N),rawId:U(q),authenticatorAttachment:$(N),response:U({clientDataJSON:U(q),attestationObject:U(q),transports:ke(N,d=>{var r;return((r=d.getTransports)==null?void 0:r.call(d))||[]})}),clientExtensionResults:ke(Kt,d=>d.getClientExtensionResults())};function Gt(d){return de(xt,Wt,d)}function Jt(d){return de(Qt,qt,d)}async function Xt(d){const r=await navigator.credentials.create(d);return r.toJSON=()=>Jt(r),r}const Zt={class:"text-h6"},jt={tag:"p",class:"my-4"},ea={__name:"FidoAuthForm",setup(d){const r=ne(),{$gettext:s}=Y(),l=_(),m=_(!1),p=!!(navigator.credentials&&navigator.credentials.create&&navigator.credentials.get&&window.PublicKeyCredential),a=_(),e=re(()=>r.fidoCreds),t=[{title:s("Name"),key:"name"},{title:s("Added On"),key:"added_on"},{title:s("Last Used"),key:"last_used"},{title:s("Use count"),key:"use_count"},{title:s("Actions"),key:"actions"}],o=_(),n=_(),v=_(),f=_(""),g=_(),y=_(!1);async function V(){const{valid:A}=await a.value.validate();if(!A)return;m.value=!0;const R=await Le.beginFidoRegistration();if(R){const k=Gt(R.data),L=(await Xt(k)).toJSON();L.name=l.value,r.addFidoCred(L).then(K=>{K.status===200&&(g.value=K.data.tokens,y.value=!0)}),a.value.reset(),m.value=!1;return}m.value=!1}function F(){g.value=[],y.value=!1}async function b(A){await o.value.open(s("Warning"),s("Do you really want to delete this WebAuthn device?"),{color:"warning",cancelLabel:s("No"),agreeLabel:s("Yes")})&&r.deleteFidoCreds(A.id)}async function M(){return(await v.value.validate()).valid}async function P(A){if(f.value=A.name,!await n.value.open(s("Edition"),s("Edit your device"),{color:"warning",cancelLabel:s("Cancel"),agreeLabel:s("Save")}))return;const k={name:f.value};await r.editFidoCred(A.id,k)}return ce(()=>{r.getFidoCreds()}),(A,R)=>(E(),T(z,null,[C("div",null,[i(H,{flat:""},{default:u(()=>[i(fe,null,{default:u(()=>[C("span",Zt,h(c(s)("WebAuthn")),1)]),_:1}),i(Q,null,{default:u(()=>[i(se,null,{default:u(()=>[e.value.length===0?(E(),I(oe,{key:0,cols:"4"},{default:u(()=>[C("div",jt,h(c(s)("You don't have any WebAuthN device registered as a second authentication method.")),1)]),_:1})):(E(),I(oe,{key:1,cols:"8"},{default:u(()=>[C("h3",null,h(c(s)("Registered Webauthn devices")),1),i(qe,{headers:t,items:e.value,"item-value":"id"},{"item.added_on":u(({item:k})=>[w(h(A.$date(k.added_on)),1)]),"item.last_used":u(({item:k})=>[k.last_used===null?(E(),T(z,{key:0},[w(h(c(s)("Never")),1)],64)):(E(),T(z,{key:1},[w(h(A.$date(k.last_used)),1)],64))]),"item.enabled":u(({item:k})=>[w(h(A.$yesno(k.enabled)),1)]),"item.actions":u(({item:k})=>[i(me,{class:"me-2",size:"small",onClick:S=>P(k)},{default:u(()=>[w(" mdi-pencil ")]),_:2},1032,["onClick"]),i(me,{size:"small",onClick:S=>b(k)},{default:u(()=>[w(" mdi-delete ")]),_:2},1032,["onClick"])]),_:2},1032,["items"])]),_:1})),i(oe,{cols:"4"},{default:u(()=>[p?(E(),T(z,{key:0},[C("h3",null,h(c(s)("Enter a name to register a new webauthn device.")),1),i(G,{ref_key:"fidoForm",ref:a,onSubmit:ie(V,["prevent"])},{default:u(()=>[i(D,{modelValue:l.value,"onUpdate:modelValue":R[0]||(R[0]=k=>l.value=k),label:c(s)("New device name"),rules:[c(J).required]},null,8,["modelValue","label","rules"]),i(O,{color:"success",type:"submit",loading:m.value},{default:u(()=>[w(h(c(s)("Setup device")),1)]),_:1},8,["loading"])]),_:1},512)],64)):(E(),I(W,{key:1,type:"error"},{default:u(()=>[w(h(c(s)("Your browser does not seem compatible with WebAuthN")),1)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),i(pe,{ref_key:"confirmDeletion",ref:o},null,512),i(pe,{ref_key:"confirmEdition",ref:n,callback_agree:M},{default:u(()=>[i(G,{ref_key:"editForm",ref:v},{default:u(()=>[i(D,{modelValue:f.value,"onUpdate:modelValue":R[1]||(R[1]=k=>f.value=k),label:c(s)("name"),rules:[c(J).required]},null,8,["modelValue","label","rules"])]),_:1},512)]),_:1},512),i(Pe,{modelValue:y.value,"onUpdate:modelValue":R[2]||(R[2]=k=>y.value=k),"max-width":"800px",persistent:""},{default:u(()=>[i(Ue,{tokens:g.value,onClose:F},null,8,["tokens"])]),_:1},8,["modelValue"])],64))}},ta={class:"pa-4"},aa={__name:"SettingsView",setup(d){const r=ne(),s=_();return(l,m)=>(E(),T(z,null,[i(Ge,{flat:""},{default:u(()=>[i(Je,null,{default:u(()=>[w(h(l.$gettext("Account settings")),1)]),_:1})]),_:1}),C("div",ta,[i(Xe,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=p=>s.value=p),color:"primary",class:"mb-4"},{default:u(()=>[i(ee,{value:"profile"},{default:u(()=>[w(h(l.$gettext("Profile")),1)]),_:1}),i(ee,{value:"security"},{default:u(()=>[w(h(l.$gettext("Two-factor auth")),1)]),_:1}),c(r).userHasMailbox?(E(),I(ee,{key:0,value:"forward"},{default:u(()=>[w(h(l.$gettext("Forward")),1)]),_:1})):x("",!0),c(r).userHasMailbox?(E(),I(ee,{key:1,value:"autoreply"},{default:u(()=>[w(h(l.$gettext("Auto-reply message")),1)]),_:1})):x("",!0),c(r).authUser.role==="SuperAdmins"?(E(),I(ee,{key:2,value:"api"},{default:u(()=>[w(h(l.$gettext("API access")),1)]),_:1})):x("",!0)]),_:1},8,["modelValue"]),i(Ze,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=p=>s.value=p)},{default:u(()=>[i(te,{value:"profile"},{default:u(()=>[i(ut)]),_:1}),i(te,{value:"security"},{default:u(()=>[i(wt),i(ea),i(Rt)]),_:1}),c(r).userHasMailbox?(E(),I(te,{key:0,value:"forward"},{default:u(()=>[i(Pt)]),_:1})):x("",!0),c(r).userHasMailbox?(E(),I(te,{key:1,value:"autoreply"},{default:u(()=>[i(Ot)]),_:1})):x("",!0),c(r).authUser.role==="SuperAdmins"?(E(),I(te,{key:2,value:"api"},{default:u(()=>[i(Lt)]),_:1})):x("",!0)]),_:1},8,["modelValue"])])],64))}},La=xe(aa,[["__scopeId","data-v-12b4456a"]]);export{La as default};
