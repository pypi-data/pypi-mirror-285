import{a as te}from"./dimensions-CKYnSDDa.js";import{H as N,a0 as V,z as l,h as oe,aB as w,aC as D,A as R,aD as U,S as A,aE as Z,aF as ae,aG as ne,y as se,aH as ue,aI as le,C as ie}from"./index-B6sfQZUh.js";const $=Symbol.for("vuetify:layout"),F=Symbol.for("vuetify:layout-item"),K=1e3,de=N({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),fe=N({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function me(){const n=V($);if(!n)throw new Error("[Vuetify] Could not find injected layout");return{layoutIsReady:A(),getLayoutItem:n.getLayoutItem,mainRect:n.mainRect,mainStyles:n.mainStyles}}function pe(n){const o=V($);if(!o)throw new Error("[Vuetify] Could not find injected layout");const i=n.id??`layout-item-${ne()}`,c=U("useLayoutItem");Z(F,{id:i});const a=se(!1);ue(()=>a.value=!0),le(()=>a.value=!1);const y=A(),{layoutItemStyles:u,layoutItemScrimStyles:v}=o.register(c,{...n,active:l(()=>a.value?!1:n.active.value),id:i});return ie(()=>o.unregister(i)),{layoutItemStyles:u,layoutRect:o.layoutRect,layoutItemScrimStyles:v,layoutIsReady:y}}const re=(n,o,i,c)=>{let a={top:0,left:0,right:0,bottom:0};const y=[{id:"",layer:{...a}}];for(const u of n){const v=o.get(u),p=i.get(u),L=c.get(u);if(!v||!p||!L)continue;const g={...a,[v.value]:parseInt(a[v.value],10)+(L.value?parseInt(p.value,10):0)};y.push({id:u,layer:g}),a=g}return y};function ge(n){const o=V($,null),i=l(()=>o?o.rootZIndex.value-100:K),c=oe([]),a=w(new Map),y=w(new Map),u=w(new Map),v=w(new Map),p=w(new Map),{resizeRef:L,contentRect:g}=te(),h=D(()=>{const t=[...new Set([...u.values()].map(e=>e.value))].sort((e,f)=>e-f),r=[];for(const e of t){const f=c.value.filter(s=>{var m;return((m=u.get(s))==null?void 0:m.value)===e});r.push(...f)}return re(r,a,y,v)}),M=l(()=>!Array.from(p.values()).some(t=>t.value)),I=l(()=>h.value[h.value.length-1].layer),X=l(()=>({"--v-layout-left":R(I.value.left),"--v-layout-right":R(I.value.right),"--v-layout-top":R(I.value.top),"--v-layout-bottom":R(I.value.bottom),...M.value?void 0:{transition:"none"}})),x=D(()=>h.value.slice(1).map((t,r)=>{let{id:e}=t;const{layer:f}=h.value[r],s=y.get(e),m=a.get(e);return{id:e,...f,size:Number(s.value),position:m.value}})),T=t=>x.value.find(r=>r.id===t),z=U("createLayout"),B=A();Z($,{register:(t,r)=>{let{id:e,order:f,position:s,layoutSize:m,elementSize:b,active:P,disableTransitions:j,absolute:W}=r;u.set(e,f),a.set(e,s),y.set(e,m),v.set(e,P),j&&p.set(e,j);const k=ae(F,z==null?void 0:z.vnode).indexOf(t);k>-1?c.value.splice(k,0,e):c.value.push(e);const C=l(()=>x.value.findIndex(S=>S.id===e)),E=l(()=>i.value+h.value.length*2-C.value*2),Y=l(()=>{const S=s.value==="left"||s.value==="right",H=s.value==="right",J=s.value==="bottom",O=b.value??m.value,Q=O===0?"%":"px",ee={[s.value]:0,zIndex:E.value,transform:`translate${S?"X":"Y"}(${(P.value?0:-(O===0?100:O))*(H||J?-1:1)}${Q})`,position:W.value||i.value!==K?"absolute":"fixed",...M.value?void 0:{transition:"none"}};if(C.value<0)throw new Error(`Layout item "${e}" is missing`);const d=x.value[C.value];if(!d)throw new Error(`[Vuetify] Could not find layout item "${e}"`);return{...ee,height:S?`calc(100% - ${d.top}px - ${d.bottom}px)`:b.value?`${b.value}px`:void 0,left:H?void 0:`${d.left}px`,right:H?`${d.right}px`:void 0,top:s.value!=="bottom"?`${d.top}px`:void 0,bottom:s.value!=="top"?`${d.bottom}px`:void 0,width:S?b.value?`${b.value}px`:void 0:`calc(100% - ${d.left}px - ${d.right}px)`}}),_=l(()=>({zIndex:E.value-1}));return{layoutItemStyles:Y,layoutItemScrimStyles:_,zIndex:E}},unregister:t=>{u.delete(t),a.delete(t),y.delete(t),v.delete(t),p.delete(t),c.value=c.value.filter(r=>r!==t)},mainRect:I,mainStyles:X,getLayoutItem:T,items:x,layoutRect:g,rootZIndex:i,layoutIsReady:B});const q=l(()=>["v-layout",{"v-layout--full-height":n.fullHeight}]),G=l(()=>({zIndex:o?i.value:void 0,position:o?"relative":void 0,overflow:o?"hidden":void 0}));return{layoutClasses:q,layoutStyles:G,getLayoutItem:T,items:x,layoutRect:g,layoutIsReady:B,layoutRef:L}}export{$ as V,me as a,de as b,ge as c,fe as m,pe as u};
