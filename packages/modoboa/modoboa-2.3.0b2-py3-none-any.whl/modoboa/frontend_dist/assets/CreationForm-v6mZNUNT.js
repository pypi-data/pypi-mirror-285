import{_ as ce}from"./ConfirmDialog-CB9bATIP.js";import{_ as de,b as le,o as y,X as B,Z as T,R as A,e as h,t as p,f as k,c as I,w as c,ao as M,a,j as _,Y as ne,H as C,K as L,a8 as me,z as S,s as pe,ap as ve,$ as fe,a0 as ye,O as Se,Q as K,I as Ve,aq as ge,m as se,ar as be,as as Z,P as ke,h as O,at as _e,au as he,av as xe}from"./index-B6sfQZUh.js";import{V as j,a as re}from"./VRow-DllmF7yv.js";import{c as we}from"./createSimpleFunctional-BdzT111U.js";import{h as J,V as $,x as Ie,R as Ce,y as Pe,p as $e,i as Be,z as Ae,A as We,a as je}from"./VImg-AVVNtsoJ.js";import{V as Te}from"./VAvatar-xee8L3pJ.js";import{u as R}from"./tag-wMOM-gqO.js";import{m as Le,V as ee,a as Re,b as te}from"./VWindowItem-d1FqDlD3.js";import{V as De}from"./VContainer-D_MLw6yn.js";import{m as Fe,V as ae}from"./VSheet-UF7FAefD.js";import{d as Ee}from"./VList-BoxPhnZ6.js";const Ne="/new-admin/assets/Modoboa_RVB-BLEU-SANS-pKrnjsR_.png",ze={class:"subtitle mt-4 d-flex"},Ge={class:"text-h6"},Oe=["onClick"],Me={class:"text-grey"},He={__name:"CreationSummary",props:{sections:{type:Array,default:()=>[]}},emits:["modify-step"],setup(e,{emit:v}){const{$gettext:t}=le(),l=v;function s(o){return o.length?o.join(", "):t("Empty")}return(o,m)=>(y(!0),B(A,null,T(e.sections,(d,r)=>(y(),B(A,{key:r},[h("div",ze,[h("span",Ge,p(d.title),1),h("a",{href:"#",class:"edit-link ml-auto",onClick:n=>l("modify-step",r+1)},p(k(t)("Modify")),9,Oe)]),(y(!0),B(A,null,T(d.items,(n,x)=>(y(),I(re,{key:x,dense:""},{default:c(()=>[n.value!==void 0?M(o.$slots,`item.${n.name}`,{key:0,item:n,displayList:s},()=>[a(j,null,{default:c(()=>[h("span",Me,p(n.key),1)]),_:2},1024),n.type==="yesno"?(y(),I(j,{key:0,class:"text-right"},{default:c(()=>[_(p(o.$yesno(n.value)),1)]),_:2},1024)):n.type==="list"?(y(),I(j,{key:1,class:"text-right"},{default:c(()=>[_(p(s(n.value)),1)]),_:2},1024)):(y(),I(j,{key:2,class:"text-right"},{default:c(()=>[_(p(n.value),1)]),_:2},1024))],!0):ne("",!0)]),_:2},1024))),128))],64))),128))}},Ue=de(He,[["__scopeId","data-v-6e743e1a"]]),Y=Symbol.for("vuetify:v-stepper"),oe=C({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),Ke=L()({name:"VStepperActions",props:oe(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,v){let{emit:t,slots:l}=v;const{t:s}=me();function o(){t("click:prev")}function m(){t("click:next")}return R(()=>{const d={onClick:o},r={onClick:m};return a("div",{class:"v-stepper-actions"},[a(J,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:s(e.prevText),variant:"text"}}},{default:()=>{var n;return[((n=l.prev)==null?void 0:n.call(l,{props:d}))??a($,d,null)]}}),a(J,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:s(e.nextText),variant:"tonal"}}},{default:()=>{var n;return[((n=l.next)==null?void 0:n.call(l,{props:r}))??a($,r,null)]}})])}),{}}}),ie=we("v-stepper-header"),Ye=C({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},error:Boolean,errorIcon:{type:String,default:"$error"},icon:String,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),qe=C({...Ye(),...Ie()},"VStepperItem"),H=L()({name:"VStepperItem",directives:{Ripple:Ce},props:qe(),emits:{"group:selected":e=>!0},setup(e,v){let{slots:t}=v;const l=Pe(e,Y,!0),s=S(()=>(l==null?void 0:l.value.value)??e.value),o=S(()=>e.rules.every(f=>f()===!0)),m=S(()=>!e.disabled&&e.editable),d=S(()=>!e.disabled&&e.editable),r=S(()=>e.error||!o.value),n=S(()=>e.complete||e.rules.length>0&&o.value),x=S(()=>r.value?e.errorIcon:n.value?e.completeIcon:l.isSelected.value&&e.editable?e.editIcon:e.icon),w=S(()=>({canEdit:d.value,hasError:r.value,hasCompleted:n.value,title:e.title,subtitle:e.subtitle,step:s.value,value:e.value}));return R(()=>{var V,W,D;const f=(!l||l.isSelected.value||n.value||d.value)&&!r.value&&!e.disabled,b=!!(e.title!=null||t.title),i=!!(e.subtitle!=null||t.subtitle);function u(){l==null||l.toggle()}return pe(a("button",{class:["v-stepper-item",{"v-stepper-item--complete":n.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":r.value},l==null?void 0:l.selectedClass.value],disabled:!e.editable,onClick:u},[m.value&&$e(!0,"v-stepper-item"),a(Te,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:f?e.color:void 0,size:24},{default:()=>{var g;return[((g=t.icon)==null?void 0:g.call(t,w.value))??(x.value?a(Be,{icon:x.value},null):s.value)]}}),a("div",{class:"v-stepper-item__content"},[b&&a("div",{key:"title",class:"v-stepper-item__title"},[((V=t.title)==null?void 0:V.call(t,w.value))??e.title]),i&&a("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((W=t.subtitle)==null?void 0:W.call(t,w.value))??e.subtitle]),(D=t.default)==null?void 0:D.call(t,w.value)])]),[[ve("ripple"),e.ripple&&e.editable,null]])}),{}}}),Qe=C({...fe(Le(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),ue=L()({name:"VStepperWindow",props:Qe(),emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:t}=v;const l=ye(Y,null),s=Se(e,"modelValue"),o=S({get(){var m;return s.value!=null||!l?s.value:(m=l.items.value.find(d=>l.selected.value.includes(d.id)))==null?void 0:m.value},set(m){s.value=m}});return R(()=>{const m=ee.filterProps(e);return a(ee,K({_as:"VStepperWindow"},m,{modelValue:o.value,"onUpdate:modelValue":d=>o.value=d,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),t)}),{}}}),Xe=C({...Re()},"VStepperWindowItem"),U=L()({name:"VStepperWindowItem",props:Xe(),setup(e,v){let{slots:t}=v;return R(()=>{const l=te.filterProps(e);return a(te,K({_as:"VStepperWindowItem"},l,{class:["v-stepper-window-item",e.class],style:e.style}),t)}),{}}}),Ze=C({altLabels:Boolean,bgColor:String,completeIcon:String,editIcon:String,editable:Boolean,errorIcon:String,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...Ve()},"Stepper"),Je=C({...Ze(),...Ae({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...Fe(),...ge(oe(),["prevText","nextText"])},"VStepper"),et=L()({name:"VStepper",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:t}=v;const{items:l,next:s,prev:o,selected:m}=We(e,Y),{displayClasses:d,mobile:r}=se(e),{completeIcon:n,editIcon:x,errorIcon:w,color:f,editable:b,prevText:i,nextText:u}=be(e),V=S(()=>e.items.map((g,N)=>{const F=Z(g,e.itemTitle,g),z=Z(g,e.itemValue,N+1);return{title:F,value:z,raw:g}})),W=S(()=>l.value.findIndex(g=>m.value.includes(g.id))),D=S(()=>e.disabled?e.disabled:W.value===0?"prev":W.value===l.value.length-1?"next":!1);return ke({VStepperItem:{editable:b,errorIcon:w,completeIcon:n,editIcon:x,prevText:i,nextText:u},VStepperActions:{color:f,disabled:D,prevText:i,nextText:u}}),R(()=>{const g=ae.filterProps(e),N=!!(t.header||e.items.length),F=e.items.length>0,z=!e.hideActions&&!!(F||t.actions);return a(ae,K(g,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":r.value},d.value,e.class],style:e.style}),{default:()=>{var q,Q;return[N&&a(ie,{key:"stepper-header"},{default:()=>[V.value.map((P,E)=>{let{raw:G,...X}=P;return a(A,null,[!!E&&a(Ee,null,null),a(H,X,{default:t[`header-item.${X.value}`]??t.header,icon:t.icon,title:t.title,subtitle:t.subtitle})])})]}),F&&a(ue,{key:"stepper-window"},{default:()=>[V.value.map(P=>a(U,{value:P.value},{default:()=>{var E,G;return((E=t[`item.${P.value}`])==null?void 0:E.call(t,P))??((G=t.item)==null?void 0:G.call(t,P))}}))]}),(q=t.default)==null?void 0:q.call(t,{prev:o,next:s}),z&&(((Q=t.actions)==null?void 0:Q.call(t,{next:s,prev:o}))??a(Ke,{key:"stepper-actions","onClick:prev":o,"onClick:next":s},t))]}})}),{prev:o,next:s}}}),tt={class:"d-flex justify-center inner fill-height"},at={class:"mb-5 text-h5"},lt={class:"text-grey-darken-1"},nt={class:"d-flex justify-end mt-4"},st={class:"text-center text-h3"},rt={class:"d-flex justify-center mt-8"},Vt={__name:"CreationForm",props:{title:{type:String,default:""},steps:{type:Array,default:()=>[]},summarySections:{type:Array,default:()=>[]},getVFormRef:{type:Function,default:null},formGetter:{type:Function,default:null},validateObject:{type:Function,default:null}},emits:["close","create","validationError"],setup(e,{emit:v}){const{smAndDown:t}=se(),l=e,s=O(1),o=O(!1),m=O(),d=v,{$gettext:r}=le();async function n(){await m.value.open(r("Warning"),r("If you close this form now, your modifications won't be saved. Do you confirm?"),{color:"warning",agreeLabel:r("Yes"),cancelLabel:r("No")})&&d("close")}async function x(f,b){const i=l.getVFormRef(l.steps[f-1]);if(i!==void 0){const{valid:u}=await i.validate();if(!u)return;if(l.validateObject)try{await l.validateObject()}catch(V){d("validationError",f,V.response.data);return}}s.value=b}function w(){o.value=!0,d("create")}return(f,b)=>(y(),B("div",tt,[a(et,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=i=>s.value=i),mobile:!k(t)},{default:c(()=>[a(k(ce),{ref_key:"confirm",ref:m},null,512),a(ie,{class:"align-center px-10"},{default:c(()=>[a(je,{src:Ne,"max-width":"190",class:"hidden-sm-and-down"}),(y(!0),B(A,null,T(e.steps,(i,u)=>(y(),I(H,{key:i.name,color:"primary",value:u+1,complete:s.value>u+1},{default:c(()=>[_(p(i.title),1)]),_:2},1032,["value","complete"]))),128)),a(H,{value:e.steps.length+1},{default:c(()=>[_(p(k(r)("Summary")),1)]),_:1},8,["value"]),a($,{icon:"mdi-close",color:"primary",size:k(t)?"small":"x-large",variant:"text",onClick:n},null,8,["size"])]),_:1}),a(ue,{class:"mt-4 d-flex justify-center"},{default:c(()=>[(y(!0),B(A,null,T(e.steps,(i,u)=>(y(),I(U,{key:i.name,value:u+1,class:"flex-grow-1 ma-10"},{default:c(()=>[a(De,{fluid:""},{default:c(()=>[a(re,{align:"center",justify:"center"},{default:c(()=>[a(j,{cols:"8",align:"start"},{default:c(()=>[h("div",at,[h("span",lt,p(e.title),1),_(" / "+p(i.title),1)]),M(f.$slots,`form.${i.name}`,{step:i,currentStep:u+1})]),_:2},1024)]),_:2},1024)]),_:2},1024),h("div",nt,[u+1>1?(y(),I($,{key:0,class:"mr-10",variant:"text",onClick:V=>s.value=u},{default:c(()=>[_(p(k(r)("Back")),1)]),_:2},1032,["onClick"])):ne("",!0),a($,{color:"primary",size:"large",onClick:V=>x(u+1,u+2)},{default:c(()=>[_(p(k(r)("Next")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["value"]))),128)),a(U,{value:e.steps.length+1,class:"flex-grow-0"},{default:c(()=>[h("div",st,p(k(r)("Summary")),1),a(Ue,{sections:e.summarySections,onModifyStep:b[0]||(b[0]=i=>s.value=i)},_e({_:2},[T(f.$slots,(i,u)=>({name:u,fn:c(V=>[M(f.$slots,u,he(xe(V)))])}))]),1032,["sections"]),h("div",rt,[a($,{color:"primary",size:"large",loading:o.value,onClick:w},{default:c(()=>[_(p(k(r)("Confirm and create")),1)]),_:1},8,["loading"])])]),_:3},8,["value"])]),_:3})]),_:3},8,["modelValue","mobile"])]))}};export{Vt as _};
