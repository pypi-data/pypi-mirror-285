<!DOCTYPE html>
<html>

<head>
    <title>Text to Speech</title>
</head>

<body>
    <textarea id="text-to-speak" rows="4" cols="50"></textarea>
    <br />
    <!-- <label for="voices">Choose a voice: </label>
    <select id="voices"></select>
    <br /> -->
    <button id="start-speech">Start Speech</button>

    <script>
        const textArea = document.getElementById("text-to-speak");
        // const voiceSelect = document.getElementById("voices");
        const startButton = document.getElementById("start-speech");
        // let voices = [];

        // function populateVoiceList() {
        //     voices = window.speechSynthesis.getVoices();
        //     voiceSelect.innerHTML = "";
        //     voices.forEach((voice, index) => {
        //         const option = document.createElement("option");
        //         option.textContent = `${voice.name} (${voice.lang})`;
        //         option.value = index;
        //         voiceSelect.appendChild(option);
        //     });
        // }

        // populateVoiceList();
        // if (speechSynthesis.onvoiceschanged !== undefined) {
        //     speechSynthesis.onvoiceschanged = populateVoiceList;
        // }

        speechSynthesis.onvoiceschanged = function () {
            const voices = speechSynthesis.getVoices();
            const selectedVoice = voices.find(voice => voice.name === "Google UK English Male");
            console.log(selectedVoice)
            startButton.onclick = function () {
                const text = textArea.value;
                const utterance = new SpeechSynthesisUtterance(text);
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                } else {
                    console.error("Selected voice not found.");
                }
                speechSynthesis.speak(utterance);
            };
        };

    </script>
</body>

</html>