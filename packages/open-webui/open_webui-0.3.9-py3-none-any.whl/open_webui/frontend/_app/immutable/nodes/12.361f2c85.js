import{s as Qt,p as Ft,W as te,P as ce,w as Pt,o as ue,f as p,l as G,a as H,g,h as w,m as J,d as o,c as N,R as Dt,j as n,i as j,r as a,Q as jt,u as ft,O as Le,n as ot,v as ee,M as ze,C as de,K as Be,e as ge,z as Nt,A as Ct}from"../chunks/scheduler.8ceb707f.js";import{S as le,i as se,f as ae,b as Et,d as Tt,m as It,a as rt,t as vt,e as Vt,g as Yt,c as Kt}from"../chunks/index.07e72a31.js";import{g as Pe}from"../chunks/globals.7f7f1b26.js";import{e as Zt}from"../chunks/each.0e379b97.js";import{a as bt}from"../chunks/Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{f as je}from"../chunks/FileSaver.min.898eb36f.js";import{w as kt,S as He,z as Ne,W as Fe,n as qe}from"../chunks/index.b8b2aa6c.js";import{u as Re,g as St,t as _e,c as ie,d as we}from"../chunks/index.9ace9eb7.js";import{m as Qe,i as Ge,p as Je}from"../chunks/index.2ebbe5a2.js";import{t as Ce,k as We}from"../chunks/index.163e6562.js";import{C as Ue}from"../chunks/Checkbox.3d101069.js";import"../chunks/dayjs.min.1e504c00.js";import{M as $e}from"../chunks/Modal.9e048b4e.js";import{T as Oe}from"../chunks/Tags.cfed8963.js";import"../chunks/sha256.65a6c54a.js";import{A as Xe}from"../chunks/AddFilesPlaceholder.685275a7.js";import{t as Ye}from"../chunks/index.cb638955.js";function Ke(e){let t,l,s,f=e[3].t("Edit Doc")+"",u,r,d,m='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,i,h,b,k,x,S,L=e[3].t("Name Tag")+"",E,F,y,M,z="#",mt,P,$,it,tt,q=e[3].t("Title")+"",ct,nt,O,X,ut,dt,et,U=e[3].t("Tags")+"",A,R,c,B,T,D,C=e[3].t("Save")+"",Y,Q,pt,K;return c=new Oe({props:{tags:e[1],addTag:e[6],deleteTag:e[7]}}),{c(){t=p("div"),l=p("div"),s=p("div"),u=G(f),r=H(),d=p("button"),d.innerHTML=m,_=H(),i=p("div"),h=p("div"),b=p("form"),k=p("div"),x=p("div"),S=p("div"),E=G(L),F=H(),y=p("div"),M=p("div"),M.textContent=z,mt=H(),P=p("input"),$=H(),it=p("div"),tt=p("div"),ct=G(q),nt=H(),O=p("div"),X=p("input"),ut=H(),dt=p("div"),et=p("div"),A=G(U),R=H(),Et(c.$$.fragment),B=H(),T=p("div"),D=p("button"),Y=G(C),this.h()},l(I){t=g(I,"DIV",{});var W=w(t);l=g(W,"DIV",{class:!0});var Z=w(l);s=g(Z,"DIV",{class:!0});var Mt=w(s);u=J(Mt,f),Mt.forEach(o),r=N(Z),d=g(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt(d)!=="svelte-745w2y"&&(d.innerHTML=m),Z.forEach(o),_=N(W),i=g(W,"DIV",{class:!0});var Lt=w(i);h=g(Lt,"DIV",{class:!0});var Ut=w(h);b=g(Ut,"FORM",{class:!0});var Bt=w(b);k=g(Bt,"DIV",{class:!0});var _t=w(k);x=g(_t,"DIV",{class:!0});var $t=w(x);S=g($t,"DIV",{class:!0});var wt=w(S);E=J(wt,L),wt.forEach(o),F=N($t),y=g($t,"DIV",{class:!0});var Ht=w(y);M=g(Ht,"DIV",{class:!0,"data-svelte-h":!0}),Dt(M)!=="svelte-1xdm6fj"&&(M.textContent=z),mt=N(Ht),P=g(Ht,"INPUT",{class:!0,type:!0,autocomplete:!0}),Ht.forEach(o),$t.forEach(o),$=N(_t),it=g(_t,"DIV",{class:!0});var Ot=w(it);tt=g(Ot,"DIV",{class:!0});var st=w(tt);ct=J(st,q),st.forEach(o),nt=N(Ot),O=g(Ot,"DIV",{class:!0});var gt=w(O);X=g(gt,"INPUT",{class:!0,type:!0,autocomplete:!0}),gt.forEach(o),Ot.forEach(o),ut=N(_t),dt=g(_t,"DIV",{class:!0});var At=w(dt);et=g(At,"DIV",{class:!0});var qt=w(et);A=J(qt,U),qt.forEach(o),R=N(At),Tt(c.$$.fragment,At),At.forEach(o),_t.forEach(o),B=N(Bt),T=g(Bt,"DIV",{class:!0});var at=w(T);D=g(at,"BUTTON",{class:!0,type:!0});var yt=w(D);Y=J(yt,C),yt.forEach(o),at.forEach(o),Bt.forEach(o),Ut.forEach(o),Lt.forEach(o),W.forEach(o),this.h()},h(){n(s,"class","text-lg font-medium self-center"),n(d,"class","self-center"),n(l,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),n(S,"class","mb-1 text-xs text-gray-500"),n(M,"class","bg-gray-200 dark:bg-gray-800 font-semibold px-3 py-0.5 border border-r-0 dark:border-gray-800 rounded-l-xl flex items-center"),n(P,"class","w-full rounded-r-xl py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 disabled:text-gray-500 dark:disabled:text-gray-500 outline-none svelte-1vx7r9s"),n(P,"type","text"),n(P,"autocomplete","off"),P.required=!0,n(y,"class","flex flex-1"),n(x,"class","flex flex-col w-full"),n(tt,"class","mb-1 text-xs text-gray-500"),n(X,"class","w-full rounded-xl py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none svelte-1vx7r9s"),n(X,"type","text"),n(X,"autocomplete","off"),X.required=!0,n(O,"class","flex-1"),n(it,"class","flex flex-col w-full"),n(et,"class","mb-2 text-xs text-gray-500"),n(dt,"class","flex flex-col w-full"),n(k,"class","flex flex-col space-y-1.5"),n(D,"class","px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg"),n(D,"type","submit"),n(T,"class","flex justify-end pt-5 text-sm font-medium"),n(b,"class","flex flex-col w-full"),n(h,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),n(i,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(I,W){j(I,t,W),a(t,l),a(l,s),a(s,u),a(l,r),a(l,d),a(t,_),a(t,i),a(i,h),a(h,b),a(b,k),a(k,x),a(x,S),a(S,E),a(x,F),a(x,y),a(y,M),a(y,mt),a(y,P),jt(P,e[2].name),a(k,$),a(k,it),a(it,tt),a(tt,ct),a(it,nt),a(it,O),a(O,X),jt(X,e[2].title),a(k,ut),a(k,dt),a(dt,et),a(et,A),a(dt,R),It(c,dt,null),a(b,B),a(b,T),a(T,D),a(D,Y),Q=!0,pt||(K=[ft(d,"click",e[9]),ft(P,"input",e[10]),ft(X,"input",e[11]),ft(b,"submit",Le(e[12]))],pt=!0)},p(I,W){(!Q||W&8)&&f!==(f=I[3].t("Edit Doc")+"")&&ot(u,f),(!Q||W&8)&&L!==(L=I[3].t("Name Tag")+"")&&ot(E,L),W&4&&P.value!==I[2].name&&jt(P,I[2].name),(!Q||W&8)&&q!==(q=I[3].t("Title")+"")&&ot(ct,q),W&4&&X.value!==I[2].title&&jt(X,I[2].title),(!Q||W&8)&&U!==(U=I[3].t("Tags")+"")&&ot(A,U);const Z={};W&2&&(Z.tags=I[1]),c.$set(Z),(!Q||W&8)&&C!==(C=I[3].t("Save")+"")&&ot(Y,C)},i(I){Q||(rt(c.$$.fragment,I),Q=!0)},o(I){vt(c.$$.fragment,I),Q=!1},d(I){I&&o(t),Vt(c),pt=!1,ee(K)}}}function Ze(e){let t,l,s;function f(r){e[13](r)}let u={size:"sm",$$slots:{default:[Ke]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.show=e[0]),t=new $e({props:u}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,d){It(t,r,d),s=!0},p(r,[d]){const m={};d&16399&&(m.$$scope={dirty:d,ctx:r}),!l&&d&1&&(l=!0,m.show=r[0],te(()=>l=!1)),t.$set(m)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function tl(e,t,l){let s;const f=ce("i18n");Pt(e,f,E=>l(3,s=E));let{show:u=!1}=t,{selectedDoc:r}=t,d=[],m={name:"",title:"",content:null};const _=async()=>{await Re(localStorage.token,r.name,{title:m.title,name:m.name}).catch(F=>{bt.error(F)})&&(l(0,u=!1),kt.set(await St(localStorage.token)))},i=async E=>{!d.find(F=>F.name===E)&&E!==""?(l(1,d=[...d,{name:E}]),await _e(localStorage.token,m.name,{name:m.name,tags:d}),kt.set(await St(localStorage.token))):console.log("tag already exists")},h=async E=>{l(1,d=d.filter(F=>F.name!==E)),await _e(localStorage.token,m.name,{name:m.name,tags:d}),kt.set(await St(localStorage.token))};ue(()=>{var E;r&&(l(2,m=JSON.parse(JSON.stringify(r))),l(1,d=((E=m==null?void 0:m.content)==null?void 0:E.tags)??[]))});const b=()=>{l(0,u=!1)};function k(){m.name=this.value,l(2,m)}function x(){m.title=this.value,l(2,m)}const S=()=>{_()};function L(E){u=E,l(0,u)}return e.$$set=E=>{"show"in E&&l(0,u=E.show),"selectedDoc"in E&&l(8,r=E.selectedDoc)},[u,d,m,s,f,_,i,h,r,b,k,x,S,L]}class el extends le{constructor(t){super(),se(this,t,tl,Ze,Qt,{show:0,selectedDoc:8})}}function ll(e){let t=e[4].t("Click here to select documents.")+"",l;return{c(){l=G(t)},l(s){l=J(s,t)},m(s,f){j(s,l,f)},p(s,f){f&16&&t!==(t=s[4].t("Click here to select documents.")+"")&&ot(l,t)},d(s){s&&o(l)}}}function sl(e){let t=e[2].length>0?`${e[2].length}`:"",l,s;return{c(){l=G(t),s=G(" document(s) selected.")},l(f){l=J(f,t),s=J(f," document(s) selected.")},m(f,u){j(f,l,u),j(f,s,u)},p(f,u){u&4&&t!==(t=f[2].length>0?`${f[2].length}`:"")&&ot(l,t)},d(f){f&&(o(l),o(s))}}}function al(e){let t,l,s,f=e[4].t("Add Docs")+"",u,r,d,m='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,i,h,b,k,x,S,L,E,F,y,M,z=e[4].t("Tags")+"",mt,P,$,it,tt,q,ct=e[4].t("Save")+"",nt,O,X,ut;function dt(A,R){return A[2]?sl:ll}let et=dt(e),U=et(e);return $=new Oe({props:{tags:e[3],addTag:e[7],deleteTag:e[8]}}),{c(){t=p("div"),l=p("div"),s=p("div"),u=G(f),r=H(),d=p("button"),d.innerHTML=m,_=H(),i=p("div"),h=p("div"),b=p("form"),k=p("div"),x=p("input"),S=H(),L=p("button"),U.c(),E=H(),F=p("div"),y=p("div"),M=p("div"),mt=G(z),P=H(),Et($.$$.fragment),it=H(),tt=p("div"),q=p("button"),nt=G(ct),this.h()},l(A){t=g(A,"DIV",{});var R=w(t);l=g(R,"DIV",{class:!0});var c=w(l);s=g(c,"DIV",{class:!0});var B=w(s);u=J(B,f),B.forEach(o),r=N(c),d=g(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt(d)!=="svelte-745w2y"&&(d.innerHTML=m),c.forEach(o),_=N(R),i=g(R,"DIV",{class:!0});var T=w(i);h=g(T,"DIV",{class:!0});var D=w(h);b=g(D,"FORM",{class:!0});var C=w(b);k=g(C,"DIV",{class:!0});var Y=w(k);x=g(Y,"INPUT",{id:!0,type:!0,class:!0}),S=N(Y),L=g(Y,"BUTTON",{class:!0,type:!0});var Q=w(L);U.l(Q),Q.forEach(o),Y.forEach(o),E=N(C),F=g(C,"DIV",{class:!0});var pt=w(F);y=g(pt,"DIV",{class:!0});var K=w(y);M=g(K,"DIV",{class:!0});var I=w(M);mt=J(I,z),I.forEach(o),P=N(K),Tt($.$$.fragment,K),K.forEach(o),pt.forEach(o),it=N(C),tt=g(C,"DIV",{class:!0});var W=w(tt);q=g(W,"BUTTON",{class:!0,type:!0});var Z=w(q);nt=J(Z,ct),Z.forEach(o),W.forEach(o),C.forEach(o),D.forEach(o),T.forEach(o),R.forEach(o),this.h()},h(){n(s,"class","text-lg font-medium self-center"),n(d,"class","self-center"),n(l,"class","flex justify-between dark:text-gray-300 px-5 pt-4"),n(x,"id","upload-doc-input"),x.hidden=!0,n(x,"type","file"),x.multiple=!0,n(x,"class","svelte-1vx7r9s"),n(L,"class","w-full text-sm font-medium py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 text-center rounded-xl"),n(L,"type","button"),n(k,"class","mb-3 w-full"),n(M,"class","mb-1.5 text-xs text-gray-500"),n(y,"class","flex flex-col w-full"),n(F,"class","flex flex-col space-y-1.5"),n(q,"class","px-4 py-2 bg-emerald-700 hover:bg-emerald-800 text-gray-100 transition rounded-lg"),n(q,"type","submit"),n(tt,"class","flex justify-end pt-5 text-sm font-medium"),n(b,"class","flex flex-col w-full"),n(h,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),n(i,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(A,R){j(A,t,R),a(t,l),a(l,s),a(s,u),a(l,r),a(l,d),a(t,_),a(t,i),a(i,h),a(h,b),a(b,k),a(k,x),e[10](x),a(k,S),a(k,L),U.m(L,null),a(b,E),a(b,F),a(F,y),a(y,M),a(M,mt),a(y,P),It($,y,null),a(b,it),a(b,tt),a(tt,q),a(q,nt),O=!0,X||(ut=[ft(d,"click",e[9]),ft(x,"change",e[11]),ft(L,"click",e[12]),ft(b,"submit",Le(e[13]))],X=!0)},p(A,R){(!O||R&16)&&f!==(f=A[4].t("Add Docs")+"")&&ot(u,f),et===(et=dt(A))&&U?U.p(A,R):(U.d(1),U=et(A),U&&(U.c(),U.m(L,null))),(!O||R&16)&&z!==(z=A[4].t("Tags")+"")&&ot(mt,z);const c={};R&8&&(c.tags=A[3]),$.$set(c),(!O||R&16)&&ct!==(ct=A[4].t("Save")+"")&&ot(nt,ct)},i(A){O||(rt($.$$.fragment,A),O=!0)},o(A){vt($.$$.fragment,A),O=!1},d(A){A&&o(t),e[10](null),U.d(),Vt($),X=!1,ee(ut)}}}function nl(e){let t,l,s;function f(r){e[14](r)}let u={size:"sm",$$slots:{default:[al]},$$scope:{ctx:e}};return e[0]!==void 0&&(u.show=e[0]),t=new $e({props:u}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,d){It(t,r,d),s=!0},p(r,[d]){const m={};d&131103&&(m.$$scope={dirty:d,ctx:r}),!l&&d&1&&(l=!0,m.show=r[0],te(()=>l=!1)),t.$set(m)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function rl(e,t,l){let s;const f=ce("i18n");Pt(e,f,y=>l(4,s=y));let{show:u=!1}=t,r,d,m=[];const _=async y=>{const M=await Qe(localStorage.token,"",y).catch(z=>(bt.error(z),null));M&&(await ie(localStorage.token,M.collection_name,M.filename,Ce(M.filename),M.filename,m.length>0?{tags:m}:null).catch(z=>(bt.error(z),null)),await kt.set(await St(localStorage.token)))},i=async()=>{if(d&&d.length>0){for(const y of d)console.log(y,y.name.split(".").at(-1)),He.includes(y.type)||Ne.includes(y.name.split(".").at(-1))||bt.error(`Unknown File Type '${y.type}', but accepting and treating as plain text`),_(y);l(2,d=null),l(1,r.value="",r)}else bt.error(s.t("File not found."));l(0,u=!1),kt.set(await St(localStorage.token))},h=async y=>{!m.find(M=>M.name===y)&&y!==""?l(3,m=[...m,{name:y}]):console.log("tag already exists")},b=async y=>{l(3,m=m.filter(M=>M.name!==y))};ue(()=>{});const k=()=>{l(0,u=!1)};function x(y){Ft[y?"unshift":"push"](()=>{r=y,l(1,r)})}function S(){d=this.files,l(2,d)}const L=()=>{r.click()},E=()=>{i()};function F(y){u=y,l(0,u)}return e.$$set=y=>{"show"in y&&l(0,u=y.show)},[u,r,d,m,s,f,i,h,b,k,x,S,L,E,F]}class ol extends le{constructor(t){super(),se(this,t,rl,nl,Qt,{show:0})}}const{document:oe}=Pe;function be(e,t,l){const s=e.slice();return s[35]=t[l],s[36]=t,s[37]=l,s}function ke(e,t,l){const s=e.slice();return s[38]=t[l],s}function ye(e){let t,l,s,f,u,r,d;return u=new Xe({props:{$$slots:{default:[il]},$$scope:{ctx:e}}}),{c(){t=p("div"),l=p("div"),s=p("div"),f=p("div"),Et(u.$$.fragment),this.h()},l(m){t=g(m,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var _=w(t);l=g(_,"DIV",{class:!0});var i=w(l);s=g(i,"DIV",{class:!0});var h=w(s);f=g(h,"DIV",{class:!0});var b=w(f);Tt(u.$$.fragment,b),b.forEach(o),h.forEach(o),i.forEach(o),_.forEach(o),this.h()},h(){n(f,"class","max-w-md"),n(s,"class","m-auto pt-64 flex flex-col justify-center"),n(l,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),n(t,"class",r="fixed "+(e[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),n(t,"id","dropzone"),n(t,"role","region"),n(t,"aria-label","Drag and Drop Container")},m(m,_){j(m,t,_),a(t,l),a(l,s),a(s,f),It(u,f,null),d=!0},p(m,_){const i={};_[1]&1024&&(i.$$scope={dirty:_,ctx:m}),u.$set(i),(!d||_[0]&8192&&r!==(r="fixed "+(m[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&n(t,"class",r)},i(m){d||(rt(u.$$.fragment,m),d=!0)},o(m){vt(u.$$.fragment,m),d=!1},d(m){m&&o(t),Vt(u)}}}function il(e){let t,l="Drop any files here to add to my documents";return{c(){t=p("div"),t.textContent=l,this.h()},l(s){t=g(s,"DIV",{class:!0,"data-svelte-h":!0}),Dt(t)!=="svelte-19eg75t"&&(t.textContent=l),this.h()},h(){n(t,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(s,f){j(s,t,f)},p:de,d(s){s&&o(t)}}}function xe(e){let t,l,s;function f(r){e[18](r)}let u={selectedDoc:e[8]};return e[7]!==void 0&&(u.show=e[7]),t=new el({props:u}),Ft.push(()=>ae(t,"show",f)),{c(){Et(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,d){It(t,r,d),s=!0},p(r,d){const m={};d[0]&256&&(m.selectedDoc=r[8]),!l&&d[0]&128&&(l=!0,m.show=r[7],te(()=>l=!1)),t.$set(m)},i(r){s||(rt(t.$$.fragment,r),s=!0)},o(r){vt(t.$$.fragment,r),s=!1},d(r){Vt(t,r)}}}function De(e){let t,l,s,f,u,r;s=new Ue({props:{state:e[10].filter(Ie).length===e[10].length?"checked":"unchecked",indeterminate:e[10].filter(Ve).length>0&&e[10].filter(Me).length!==e[10].length}}),s.$on("change",e[22]);function d(i,h){return h[0]&1024&&(u=null),u==null&&(u=i[10].filter(hl).length===0),u?ul:cl}let m=d(e,[-1,-1]),_=m(e);return{c(){t=p("div"),l=p("div"),Et(s.$$.fragment),f=H(),_.c(),this.h()},l(i){t=g(i,"DIV",{class:!0});var h=w(t);l=g(h,"DIV",{class:!0});var b=w(l);Tt(s.$$.fragment,b),b.forEach(o),f=N(h),_.l(h),h.forEach(o),this.h()},h(){n(l,"class","ml-0.5 pr-3 my-auto flex items-center"),n(t,"class","px-2.5 pt-1 flex gap-1 flex-wrap")},m(i,h){j(i,t,h),a(t,l),It(s,l,null),a(t,f),_.m(t,null),r=!0},p(i,h){const b={};h[0]&1024&&(b.state=i[10].filter(Ie).length===i[10].length?"checked":"unchecked"),h[0]&1024&&(b.indeterminate=i[10].filter(Ve).length>0&&i[10].filter(Me).length!==i[10].length),s.$set(b),m===(m=d(i,h))&&_?_.p(i,h):(_.d(1),_=m(i),_&&(_.c(),_.m(t,null)))},i(i){r||(rt(s.$$.fragment,i),r=!0)},o(i){vt(s.$$.fragment,i),r=!1},d(i){i&&o(t),Vt(s),_.d()}}}function cl(e){let t,l,s=e[10].filter(Se).length+"",f,u,r,d,m,_,i=e[11].t("delete")+"",h,b,k;return{c(){t=p("div"),l=p("div"),f=G(s),u=G(" Selected"),r=H(),d=p("div"),m=p("button"),_=p("div"),h=G(i),this.h()},l(x){t=g(x,"DIV",{class:!0});var S=w(t);l=g(S,"DIV",{class:!0});var L=w(l);f=J(L,s),u=J(L," Selected"),L.forEach(o),r=N(S),d=g(S,"DIV",{class:!0});var E=w(d);m=g(E,"BUTTON",{class:!0});var F=w(m);_=g(F,"DIV",{class:!0});var y=w(_);h=J(y,i),y.forEach(o),F.forEach(o),E.forEach(o),S.forEach(o),this.h()},h(){n(l,"class","text-xs font-medium py-0.5 self-center mr-1"),n(_,"class","text-xs font-medium self-center line-clamp-1"),n(m,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white"),n(d,"class","flex gap-1"),n(t,"class","flex-1 flex w-full justify-between items-center")},m(x,S){j(x,t,S),a(t,l),a(l,f),a(l,u),a(t,r),a(t,d),a(d,m),a(m,_),a(_,h),b||(k=ft(m,"click",e[25]),b=!0)},p(x,S){S[0]&1024&&s!==(s=x[10].filter(Se).length+"")&&ot(f,s),S[0]&2048&&i!==(i=x[11].t("delete")+"")&&ot(h,i)},d(x){x&&o(t),b=!1,k()}}}function ul(e){let t,l,s=e[11].t("all")+"",f,u,r,d,m,_=Zt(e[5]),i=[];for(let h=0;h<_.length;h+=1)i[h]=Ee(ke(e,_,h));return{c(){t=p("button"),l=p("div"),f=G(s),u=H();for(let h=0;h<i.length;h+=1)i[h].c();r=ge(),this.h()},l(h){t=g(h,"BUTTON",{class:!0});var b=w(t);l=g(b,"DIV",{class:!0});var k=w(l);f=J(k,s),k.forEach(o),b.forEach(o),u=N(h);for(let x=0;x<i.length;x+=1)i[x].l(h);r=ge(),this.h()},h(){n(l,"class","text-xs font-medium self-center line-clamp-1"),n(t,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(h,b){j(h,t,b),a(t,l),a(l,f),j(h,u,b);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(h,b);j(h,r,b),d||(m=ft(t,"click",e[23]),d=!0)},p(h,b){if(b[0]&2048&&s!==(s=h[11].t("all")+"")&&ot(f,s),b[0]&34){_=Zt(h[5]);let k;for(k=0;k<_.length;k+=1){const x=ke(h,_,k);i[k]?i[k].p(x,b):(i[k]=Ee(x),i[k].c(),i[k].m(r.parentNode,r))}for(;k<i.length;k+=1)i[k].d(1);i.length=_.length}},d(h){h&&(o(t),o(u),o(r)),Be(i,h),d=!1,m()}}}function Ee(e){let t,l,s,f=e[38]+"",u,r,d,m;function _(){return e[24](e[38])}return{c(){t=p("button"),l=p("div"),s=G("#"),u=G(f),r=H(),this.h()},l(i){t=g(i,"BUTTON",{class:!0});var h=w(t);l=g(h,"DIV",{class:!0});var b=w(l);s=J(b,"#"),u=J(b,f),b.forEach(o),r=N(h),h.forEach(o),this.h()},h(){n(l,"class","text-xs font-medium self-center line-clamp-1"),n(t,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(i,h){j(i,t,h),a(t,l),a(l,s),a(l,u),a(t,r),d||(m=ft(t,"click",_),d=!0)},p(i,h){e=i,h[0]&32&&f!==(f=e[38]+"")&&ot(u,f)},d(i){i&&o(t),d=!1,m()}}}function dl(e){let t,l,s,f,u,r;return{c(){t=Nt("svg"),l=Nt("style"),s=G(`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),f=Nt("circle"),u=Nt("circle"),r=Nt("circle"),this.h()},l(d){t=Ct(d,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var m=w(t);l=Ct(m,"style",{});var _=w(l);s=J(_,`.spinner_qM83 {
										animation: spinner_8HQG 1.05s infinite;
									}
									.spinner_oXPr {
										animation-delay: 0.1s;
									}
									.spinner_ZTLf {
										animation-delay: 0.2s;
									}
									@keyframes spinner_8HQG {
										0%,
										57.14% {
											animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);
											transform: translate(0);
										}
										28.57% {
											animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);
											transform: translateY(-6px);
										}
										100% {
											transform: translate(0);
										}
									}
								`),_.forEach(o),f=Ct(m,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(f).forEach(o),u=Ct(m,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(u).forEach(o),r=Ct(m,"circle",{class:!0,cx:!0,cy:!0,r:!0}),w(r).forEach(o),m.forEach(o),this.h()},h(){n(f,"class","spinner_qM83"),n(f,"cx","4"),n(f,"cy","12"),n(f,"r","2.5"),n(u,"class","spinner_qM83 spinner_oXPr"),n(u,"cx","12"),n(u,"cy","12"),n(u,"r","2.5"),n(r,"class","spinner_qM83 spinner_ZTLf"),n(r,"cx","20"),n(r,"cy","12"),n(r,"r","2.5"),n(t,"class","w-6 h-6 translate-y-[0.5px]"),n(t,"fill","currentColor"),n(t,"viewBox","0 0 24 24"),n(t,"xmlns","http://www.w3.org/2000/svg")},m(d,m){j(d,t,m),a(t,l),a(l,s),a(t,f),a(t,u),a(t,r)},d(d){d&&o(t)}}}function fl(e){let t,l,s;return{c(){t=Nt("svg"),l=Nt("path"),s=Nt("path"),this.h()},l(f){t=Ct(f,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var u=w(t);l=Ct(u,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(l).forEach(o),s=Ct(u,"path",{d:!0}),w(s).forEach(o),u.forEach(o),this.h()},h(){n(l,"fill-rule","evenodd"),n(l,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),n(l,"clip-rule","evenodd"),n(s,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),n(t,"xmlns","http://www.w3.org/2000/svg"),n(t,"viewBox","0 0 24 24"),n(t,"fill","currentColor"),n(t,"class","w-6 h-6")},m(f,u){j(f,t,u),a(t,l),a(t,s)},d(f){f&&o(t)}}}function Te(e){var B;let t,l,s,f,u,r,d,m,_,i,h,b=e[35].name+"",k,x,S=e[35].filename+"",L,E,F,y,M=e[35].title+"",z,mt,P,$,it='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>',tt,q,ct='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>',nt,O,X,ut;s=new Ue({props:{state:((B=e[35])==null?void 0:B.selected)??"unchecked"}});function dt(T,D){return T[35]?fl:dl}let et=dt(e),U=et(e);function A(...T){return e[26](e[35],...T)}function R(...T){return e[27](e[35],...T)}function c(){return e[28](e[35],e[36],e[37])}return{c(){t=p("button"),l=p("div"),Et(s.$$.fragment),f=H(),u=p("div"),r=p("div"),d=p("div"),U.c(),m=H(),_=p("div"),i=p("div"),h=G("#"),k=G(b),x=G(" ("),L=G(S),E=G(")"),F=H(),y=p("div"),z=G(M),mt=H(),P=p("div"),$=p("button"),$.innerHTML=it,tt=H(),q=p("button"),q.innerHTML=ct,nt=H(),this.h()},l(T){t=g(T,"BUTTON",{class:!0});var D=w(t);l=g(D,"DIV",{class:!0});var C=w(l);Tt(s.$$.fragment,C),C.forEach(o),f=N(D),u=g(D,"DIV",{class:!0});var Y=w(u);r=g(Y,"DIV",{class:!0});var Q=w(r);d=g(Q,"DIV",{class:!0});var pt=w(d);U.l(pt),pt.forEach(o),m=N(Q),_=g(Q,"DIV",{class:!0});var K=w(_);i=g(K,"DIV",{class:!0});var I=w(i);h=J(I,"#"),k=J(I,b),x=J(I," ("),L=J(I,S),E=J(I,")"),I.forEach(o),F=N(K),y=g(K,"DIV",{class:!0});var W=w(y);z=J(W,M),W.forEach(o),K.forEach(o),Q.forEach(o),Y.forEach(o),mt=N(D),P=g(D,"DIV",{class:!0});var Z=w(P);$=g(Z,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Dt($)!=="svelte-105zedk"&&($.innerHTML=it),tt=N(Z),q=g(Z,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Dt(q)!=="svelte-13wl5iz"&&(q.innerHTML=ct),Z.forEach(o),nt=N(D),D.forEach(o),this.h()},h(){n(l,"class","my-auto flex items-center"),n(d,"class","p-2.5 bg-red-400 text-white rounded-lg"),n(i,"class","font-semibold line-clamp-1"),n(y,"class","text-xs overflow-hidden text-ellipsis line-clamp-1"),n(_,"class","self-center flex-1"),n(r,"class","flex items-center space-x-3"),n(u,"class","flex flex-1 space-x-4 cursor-pointer w-full"),n($,"class","self-center w-fit text-sm z-20 px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),n($,"type","button"),n(q,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),n(q,"type","button"),n(P,"class","flex flex-row space-x-1 self-center"),n(t,"class","flex space-x-4 cursor-pointer text-left w-full px-3 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl")},m(T,D){j(T,t,D),a(t,l),It(s,l,null),a(t,f),a(t,u),a(u,r),a(r,d),U.m(d,null),a(r,m),a(r,_),a(_,i),a(i,h),a(i,k),a(i,x),a(i,L),a(i,E),a(_,F),a(_,y),a(y,z),a(t,mt),a(t,P),a(P,$),a(P,tt),a(P,q),a(t,nt),O=!0,X||(ut=[ft($,"click",A),ft(q,"click",R),ft(t,"click",c)],X=!0)},p(T,D){var Y;e=T;const C={};D[0]&1024&&(C.state=((Y=e[35])==null?void 0:Y.selected)??"unchecked"),s.$set(C),et!==(et=dt(e))&&(U.d(1),U=et(e),U&&(U.c(),U.m(d,null))),(!O||D[0]&1024)&&b!==(b=e[35].name+"")&&ot(k,b),(!O||D[0]&1024)&&S!==(S=e[35].filename+"")&&ot(L,S),(!O||D[0]&1024)&&M!==(M=e[35].title+"")&&ot(z,M)},i(T){O||(rt(s.$$.fragment,T),O=!0)},o(T){vt(s.$$.fragment,T),O=!1},d(T){T&&o(t),Vt(s),U.d(),X=!1,ee(ut)}}}function ml(e){let t,l,s,f=e[8],u,r,d,m,_,i,h,b=e[11].t("Documents")+"",k,x,S,L,E,F='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',y,M,z,mt,P,$,it='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',tt,q,ct,nt,O,X,ut,dt,et=e[11].t("Use '#' in the prompt input to load and select your documents.")+"",U,A,R,c,B,T,D,C,Y=e[11].t("Import Documents Mapping")+"",Q,pt,K,I='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z" clip-rule="evenodd"></path></svg>',W,Z,Mt,Lt=e[11].t("Export Documents Mapping")+"",Ut,Bt,_t,$t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z" clip-rule="evenodd"></path></svg>',wt,Ht,Ot;oe.title=t=`
		`+e[11].t("Documents")+" | "+e[12]+`
	`;let st=e[9]&&ye(e),gt=xe(e);function At(v){e[19](v)}let qt={};e[6]!==void 0&&(qt.show=e[6]),r=new ol({props:qt}),Ft.push(()=>ae(r,"show",At));let at=e[5].length>0&&De(e),yt=Zt(e[10]),lt=[];for(let v=0;v<yt.length;v+=1)lt[v]=Te(be(e,yt,v));const Ae=v=>vt(lt[v],1,1,()=>{lt[v]=null});return{c(){l=H(),st&&st.c(),s=H(),gt.c(),u=H(),Et(r.$$.fragment),m=H(),_=p("div"),i=p("div"),h=p("div"),k=G(b),x=H(),S=p("div"),L=p("div"),E=p("div"),E.innerHTML=F,y=H(),M=p("input"),mt=H(),P=p("div"),$=p("button"),$.innerHTML=it,tt=H(),q=p("hr"),ct=H(),at&&at.c(),nt=H(),O=p("div");for(let v=0;v<lt.length;v+=1)lt[v].c();X=H(),ut=p("div"),dt=G("ⓘ "),U=G(et),A=H(),R=p("div"),c=p("div"),B=p("input"),T=H(),D=p("button"),C=p("div"),Q=G(Y),pt=H(),K=p("div"),K.innerHTML=I,W=H(),Z=p("button"),Mt=p("div"),Ut=G(Lt),Bt=H(),_t=p("div"),_t.innerHTML=$t,this.h()},l(v){ze("svelte-vxyf60",oe.head).forEach(o),l=N(v),st&&st.l(v),s=N(v),gt.l(v),u=N(v),Tt(r.$$.fragment,v),m=N(v),_=g(v,"DIV",{class:!0});var xt=w(_);i=g(xt,"DIV",{class:!0});var ht=w(i);h=g(ht,"DIV",{class:!0});var Rt=w(h);k=J(Rt,b),Rt.forEach(o),ht.forEach(o),xt.forEach(o),x=N(v),S=g(v,"DIV",{class:!0});var Gt=w(S);L=g(Gt,"DIV",{class:!0});var Jt=w(L);E=g(Jt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(E)!=="svelte-v38fm1"&&(E.innerHTML=F),y=N(Jt),M=g(Jt,"INPUT",{class:!0,placeholder:!0}),Jt.forEach(o),mt=N(Gt),P=g(Gt,"DIV",{});var fe=w(P);$=g(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),Dt($)!=="svelte-1rxkyow"&&($.innerHTML=it),fe.forEach(o),Gt.forEach(o),tt=N(v),q=g(v,"HR",{class:!0}),ct=N(v),at&&at.l(v),nt=N(v),O=g(v,"DIV",{class:!0});var me=w(O);for(let re=0;re<lt.length;re+=1)lt[re].l(me);me.forEach(o),X=N(v),ut=g(v,"DIV",{class:!0});var ne=w(ut);dt=J(ne,"ⓘ "),U=J(ne,et),ne.forEach(o),A=N(v),R=g(v,"DIV",{class:!0});var he=w(R);c=g(he,"DIV",{class:!0});var zt=w(c);B=g(zt,"INPUT",{id:!0,type:!0,accept:!0}),T=N(zt),D=g(zt,"BUTTON",{class:!0});var Wt=w(D);C=g(Wt,"DIV",{class:!0});var ve=w(C);Q=J(ve,Y),ve.forEach(o),pt=N(Wt),K=g(Wt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(K)!=="svelte-aqr4dt"&&(K.innerHTML=I),Wt.forEach(o),W=N(zt),Z=g(zt,"BUTTON",{class:!0});var Xt=w(Z);Mt=g(Xt,"DIV",{class:!0});var pe=w(Mt);Ut=J(pe,Lt),pe.forEach(o),Bt=N(Xt),_t=g(Xt,"DIV",{class:!0,"data-svelte-h":!0}),Dt(_t)!=="svelte-1n7zye"&&(_t.innerHTML=$t),Xt.forEach(o),zt.forEach(o),he.forEach(o),this.h()},h(){n(h,"class","text-lg font-semibold self-center"),n(i,"class","flex justify-between items-center"),n(_,"class","mb-3"),n(E,"class","self-center ml-1 mr-3"),n(M,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),n(M,"placeholder",z=e[11].t("Search Documents")),n(L,"class","flex flex-1"),n($,"class","px-2 py-2 rounded-xl border border-gray-200 dark:border-gray-600 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1"),n(S,"class","flex w-full space-x-2"),n(q,"class","dark:border-gray-850 my-2.5"),n(O,"class","my-3 mb-5"),n(ut,"class","text-gray-500 text-xs mt-1 mb-2"),n(B,"id","documents-import-input"),n(B,"type","file"),n(B,"accept",".json"),B.hidden=!0,n(C,"class","self-center mr-2 font-medium line-clamp-1"),n(K,"class","self-center"),n(D,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),n(Mt,"class","self-center mr-2 font-medium line-clamp-1"),n(_t,"class","self-center"),n(Z,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),n(c,"class","flex space-x-2"),n(R,"class","flex justify-end w-full mb-2")},m(v,V){j(v,l,V),st&&st.m(v,V),j(v,s,V),gt.m(v,V),j(v,u,V),It(r,v,V),j(v,m,V),j(v,_,V),a(_,i),a(i,h),a(h,k),j(v,x,V),j(v,S,V),a(S,L),a(L,E),a(L,y),a(L,M),jt(M,e[0]),a(S,mt),a(S,P),a(P,$),j(v,tt,V),j(v,q,V),j(v,ct,V),at&&at.m(v,V),j(v,nt,V),j(v,O,V);for(let xt=0;xt<lt.length;xt+=1)lt[xt]&&lt[xt].m(O,null);j(v,X,V),j(v,ut,V),a(ut,dt),a(ut,U),j(v,A,V),j(v,R,V),a(R,c),a(c,B),e[29](B),a(c,T),a(c,D),a(D,C),a(C,Q),a(D,pt),a(D,K),a(c,W),a(c,Z),a(Z,Mt),a(Mt,Ut),a(Z,Bt),a(Z,_t),wt=!0,Ht||(Ot=[ft(M,"input",e[20]),ft($,"click",e[21]),ft(B,"change",e[30]),ft(B,"change",e[31]),ft(D,"click",e[32]),ft(Z,"click",e[33])],Ht=!0)},p(v,V){(!wt||V[0]&6144)&&t!==(t=`
		`+v[11].t("Documents")+" | "+v[12]+`
	`)&&(oe.title=t),v[9]?st?(st.p(v,V),V[0]&512&&rt(st,1)):(st=ye(v),st.c(),rt(st,1),st.m(s.parentNode,s)):st&&(Yt(),vt(st,1,1,()=>{st=null}),Kt()),V[0]&256&&Qt(f,f=v[8])?(Yt(),vt(gt,1,1,de),Kt(),gt=xe(v),gt.c(),rt(gt,1),gt.m(u.parentNode,u)):gt.p(v,V);const xt={};if(!d&&V[0]&64&&(d=!0,xt.show=v[6],te(()=>d=!1)),r.$set(xt),(!wt||V[0]&2048)&&b!==(b=v[11].t("Documents")+"")&&ot(k,b),(!wt||V[0]&2048&&z!==(z=v[11].t("Search Documents")))&&n(M,"placeholder",z),V[0]&1&&M.value!==v[0]&&jt(M,v[0]),v[5].length>0?at?(at.p(v,V),V[0]&32&&rt(at,1)):(at=De(v),at.c(),rt(at,1),at.m(nt.parentNode,nt)):at&&(Yt(),vt(at,1,1,()=>{at=null}),Kt()),V[0]&66944){yt=Zt(v[10]);let ht;for(ht=0;ht<yt.length;ht+=1){const Rt=be(v,yt,ht);lt[ht]?(lt[ht].p(Rt,V),rt(lt[ht],1)):(lt[ht]=Te(Rt),lt[ht].c(),rt(lt[ht],1),lt[ht].m(O,null))}for(Yt(),ht=yt.length;ht<lt.length;ht+=1)Ae(ht);Kt()}(!wt||V[0]&2048)&&et!==(et=v[11].t("Use '#' in the prompt input to load and select your documents.")+"")&&ot(U,et),(!wt||V[0]&2048)&&Y!==(Y=v[11].t("Import Documents Mapping")+"")&&ot(Q,Y),(!wt||V[0]&2048)&&Lt!==(Lt=v[11].t("Export Documents Mapping")+"")&&ot(Ut,Lt)},i(v){if(!wt){rt(st),rt(gt),rt(r.$$.fragment,v),rt(at);for(let V=0;V<yt.length;V+=1)rt(lt[V]);wt=!0}},o(v){vt(st),vt(gt),vt(r.$$.fragment,v),vt(at),lt=lt.filter(Boolean);for(let V=0;V<lt.length;V+=1)vt(lt[V]);wt=!1},d(v){v&&(o(l),o(s),o(u),o(m),o(_),o(x),o(S),o(tt),o(q),o(ct),o(nt),o(O),o(X),o(ut),o(A),o(R)),st&&st.d(v),gt.d(v),Vt(r,v),at&&at.d(v),Be(lt,v),e[29](null),Ht=!1,ee(Ot)}}}const hl=e=>(e==null?void 0:e.selected)==="checked",Ie=e=>(e==null?void 0:e.selected)==="checked",Ve=e=>(e==null?void 0:e.selected)==="checked",Me=e=>(e==null?void 0:e.selected)==="checked",Se=e=>(e==null?void 0:e.selected)==="checked";function vl(e,t,l){let s,f,u,r;Pt(e,kt,c=>l(2,s=c)),Pt(e,Fe,c=>l(12,u=c)),Pt(e,qe,c=>l(13,r=c));const{saveAs:d}=je,m=ce("i18n");Pt(e,m,c=>l(11,f=c));let _="",i="",h,b=[],k=!1,x=!1,S,L="",E=!1;const F=async c=>{await we(localStorage.token,c),await kt.set(await St(localStorage.token))},y=async c=>{await Promise.all(c.map(async B=>await we(localStorage.token,B.name))),await kt.set(await St(localStorage.token))},M=async c=>{if(console.log(c),["audio/mpeg","audio/wav"].includes(c.type)){const D=await Ye(localStorage.token,c).catch(C=>(bt.error(C),null));if(D){console.log(D);const C=new Blob([D.text],{type:"text/plain"});c=We(C,`${c.name}.txt`)}}const B=await Ge(localStorage.token,c).catch(D=>(bt.error(D),null)),T=await Je(localStorage.token,B.id).catch(D=>(bt.error(D),null));T&&(await ie(localStorage.token,T.collection_name,T.filename,Ce(T.filename),T.filename).catch(D=>(bt.error(D),null)),await kt.set(await St(localStorage.token)))};ue(()=>{kt.subscribe(C=>{l(5,b=C.reduce((Y,Q,pt,K)=>{var I;return[...new Set([...Y,...(((I=Q==null?void 0:Q.content)==null?void 0:I.tags)??[]).map(W=>W.name)])]},[]))});const c=document.querySelector("body"),B=C=>{C.preventDefault(),l(9,E=!0)},T=()=>{l(9,E=!1)},D=async C=>{var Y,Q;if(C.preventDefault(),(Y=C.dataTransfer)!=null&&Y.files){let pt=new FileReader;pt.onload=I=>{files=[...files,{type:"image",url:`${I.target.result}`}]};const K=(Q=C.dataTransfer)==null?void 0:Q.files;if(K&&K.length>0)for(const I of K)console.log(I,I.name.split(".").at(-1)),He.includes(I.type)||Ne.includes(I.name.split(".").at(-1))||bt.error(`Unknown File Type '${I.type}', but accepting and treating as plain text`),M(I);else bt.error(f.t("File not found."))}l(9,E=!1)};return c==null||c.addEventListener("dragover",B),c==null||c.addEventListener("drop",D),c==null||c.addEventListener("dragleave",T),()=>{c==null||c.removeEventListener("dragover",B),c==null||c.removeEventListener("drop",D),c==null||c.removeEventListener("dragleave",T)}});let z;function mt(c){x=c,l(7,x)}function P(c){k=c,l(6,k)}function $(){i=this.value,l(0,i)}const it=()=>{l(6,k=!0)},tt=c=>{c.detail==="checked"?l(10,z=z.map(B=>({...B,selected:"checked"}))):c.detail==="unchecked"&&l(10,z=z.map(B=>({...B,selected:"unchecked"})))},q=async()=>{l(1,L="")},ct=async c=>{l(1,L=c)},nt=async()=>{y(z.filter(c=>c.selected==="checked"))},O=async(c,B)=>{B.stopPropagation(),l(7,x=!x),l(8,S=c)},X=(c,B)=>{B.stopPropagation(),F(c.name)},ut=(c,B,T)=>{(c==null?void 0:c.selected)==="checked"?l(10,B[T].selected="unchecked",z):l(10,B[T].selected="checked",z)};function dt(c){Ft[c?"unshift":"push"](()=>{h=c,l(4,h)})}function et(){_=this.files,l(3,_)}const U=()=>{console.log(_);const c=new FileReader;c.onload=async B=>{const T=JSON.parse(B.target.result);console.log(T);for(const D of T)await ie(localStorage.token,D.collection_name,D.filename,D.name,D.title).catch(C=>(bt.error(C),null));await kt.set(await St(localStorage.token))},c.readAsText(_[0])},A=()=>{h.click()},R=async()=>{let c=new Blob([JSON.stringify(s)],{type:"application/json"});d(c,`documents-mapping-export-${Date.now()}.json`)};return e.$$.update=()=>{e.$$.dirty[0]&7&&l(10,z=s.filter(c=>{var B;return(L===""||(((B=c==null?void 0:c.content)==null?void 0:B.tags)??[]).map(T=>T.name).includes(L))&&(i===""||c.name.includes(i))}))},[i,L,s,_,h,b,k,x,S,E,z,f,u,r,d,m,F,y,mt,P,$,it,tt,q,ct,nt,O,X,ut,dt,et,U,A,R]}class pl extends le{constructor(t){super(),se(this,t,vl,ml,Qt,{},null,[-1,-1])}}function gl(e){let t,l;return t=new pl({}),{c(){Et(t.$$.fragment)},l(s){Tt(t.$$.fragment,s)},m(s,f){It(t,s,f),l=!0},p:de,i(s){l||(rt(t.$$.fragment,s),l=!0)},o(s){vt(t.$$.fragment,s),l=!1},d(s){Vt(t,s)}}}class Cl extends le{constructor(t){super(),se(this,t,null,gl,Qt,{})}}export{Cl as component};
//# sourceMappingURL=12.361f2c85.js.map
